"use strict";(self.webpackChunkfadz_web_frontend=self.webpackChunkfadz_web_frontend||[]).push([[611],{2739:()=>{},6472:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});s(5043);var t=s(1245),n=s(8818),l=s(579);function c(){return(0,l.jsx)(t.A,{role:"staff",useUnifiedHeader:!0,customHeader:(0,l.jsx)(n.A,{roleSegment:"staff"})})}},7870:(e,a,s)=>{s.r(a),s.d(a,{default:()=>o});var t=s(5043),n=s(3216),l=s(411),c=(s(2739),s(8818)),i=s(3204),r=s(579);const o=()=>{const[e,a]=(0,t.useState)("all"),[s,o]=(0,t.useState)("grid"),[d,m]=(0,t.useState)(""),[j,u]=(0,t.useState)("name"),[h,p]=(0,t.useState)("asc"),[v,x]=(0,t.useState)([]),[g,N]=(0,t.useState)([]),[f,b]=(0,t.useState)(!1),[y,w]=(0,t.useState)(!0),[S,C]=(0,t.useState)(null),k=(0,n.Zp)(),A=(0,t.useMemo)((()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")}catch(e){return{}}}),[]),D=null===A||void 0===A?void 0:A._id;(0,t.useEffect)((()=>{if(!D)return;let e=!1;return w(!0),C(null),(async()=>{try{const[a,s]=await Promise.all([l.Ay.get("/projects/assigned/allroles/".concat(D)),l.Ay.get("/projects")]);if(e)return;x(Array.isArray(a.data)?a.data:[]),N(Array.isArray(s.data)?s.data:[])}catch(a){e||C("Failed to load projects")}finally{e||w(!1)}})(),()=>{e=!0}}),[D]);const P=f?g:v,L=P.filter((a=>{if("completed"===e)return"Completed"===a.status;if("ongoing"===e)return"Ongoing"===a.status||"On Going"===a.status;if("pending"===e)return"Pending"===a.status||"Not Started"===a.status;if(d){var s,t,n,l,c,i;const e=d.toLowerCase();return(null===(s=a.projectName)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(t=a.location)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(l=a.projectmanager)||void 0===l||null===(c=l.name)||void 0===c?void 0:c.toLowerCase().includes(e))||(null===(i=a.contractor)||void 0===i?void 0:i.toLowerCase().includes(e))}return!0})).sort(((e,a)=>{var s,t,n,l;let c,i;switch(j){case"name":default:c=e.projectName||"",i=a.projectName||"";break;case"location":c=(null===(s=e.location)||void 0===s?void 0:s.name)||"",i=(null===(t=a.location)||void 0===t?void 0:t.name)||"";break;case"manager":c=(null===(n=e.projectmanager)||void 0===n?void 0:n.name)||"",i=(null===(l=a.projectmanager)||void 0===l?void 0:l.name)||"";break;case"status":c=e.status||"",i=a.status||"";break;case"startDate":c=new Date(e.startDate||0),i=new Date(a.startDate||0)}return"asc"===h?c>i?1:-1:c<i?1:-1})),_=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"completed":return"#10B981";case"ongoing":case"on going":return"#3B82F6";case"pending":case"not started":return"#F59E0B";default:return"#6B7280"}};return y?(0,r.jsx)("div",{className:"dashboard-container",children:(0,r.jsxs)("div",{className:"loading-container",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"Loading projects..."})]})}):(0,r.jsxs)("div",{className:"dashboard-container",children:[(0,r.jsx)(c.A,{roleSegment:"pic",overrideNav:[{to:"/staff/current-project",label:"Project",icon:(0,r.jsx)(i.bfZ,{}),match:"/staff/current-project"},{to:"/staff/chat",label:"Chat",icon:(0,r.jsx)(i.w_X,{}),match:"/staff/chat"},{to:"/staff/all-projects",label:f?"All Projects":"My Projects",icon:(0,r.jsx)(i.yd7,{}),match:"/staff/all-projects"}]}),(0,r.jsx)("main",{className:"dashboard-main",children:(0,r.jsxs)("div",{className:"projects-container",children:[(0,r.jsxs)("div",{className:"page-header",children:[(0,r.jsxs)("div",{className:"page-title-section",children:[(0,r.jsx)("h1",{className:"page-title",children:f?"All Projects":"My Projects"}),(0,r.jsxs)("p",{className:"page-subtitle",children:[f?"Complete portfolio overview":"Projects you are assigned to"," "]})]}),(0,r.jsx)("div",{className:"page-actions",style:{display:"flex",gap:"0.5rem"},children:(0,r.jsx)("button",{className:"view-mode-btn",style:{minWidth:130},onClick:()=>b((e=>!e)),children:f?"Show My Projects":"Show All"})})]}),(0,r.jsxs)("div",{className:"projects-controls",children:[(0,r.jsxs)("div",{className:"controls-left",children:[(0,r.jsxs)("div",{className:"search-container",children:[(0,r.jsx)(i.KSO,{className:"search-icon"}),(0,r.jsx)("input",{type:"text",placeholder:"Search projects...",value:d,onChange:e=>m(e.target.value),className:"search-input"})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsxs)("button",{className:"filter-btn ".concat("all"===e?"active":""),onClick:()=>a("all"),children:["All (",P.length,")"]}),(0,r.jsxs)("button",{className:"filter-btn ".concat("ongoing"===e?"active":""),onClick:()=>a("ongoing"),children:["Ongoing (",P.filter((e=>"Ongoing"===e.status||"On Going"===e.status)).length,")"]}),(0,r.jsxs)("button",{className:"filter-btn ".concat("completed"===e?"active":""),onClick:()=>a("completed"),children:["Completed (",P.filter((e=>"Completed"===e.status)).length,")"]}),(0,r.jsxs)("button",{className:"filter-btn ".concat("pending"===e?"active":""),onClick:()=>a("pending"),children:["Pending (",P.filter((e=>"Pending"===e.status||"Not Started"===e.status)).length,")"]})]})]}),(0,r.jsxs)("div",{className:"controls-right",children:[(0,r.jsxs)("div",{className:"sort-container",children:[(0,r.jsxs)("select",{value:j,onChange:e=>u(e.target.value),className:"sort-select",children:[(0,r.jsx)("option",{value:"name",children:"Sort by Name"}),(0,r.jsx)("option",{value:"location",children:"Sort by Location"}),(0,r.jsx)("option",{value:"manager",children:"Sort by Manager"}),(0,r.jsx)("option",{value:"status",children:"Sort by Status"}),(0,r.jsx)("option",{value:"startDate",children:"Sort by Start Date"})]}),(0,r.jsx)("button",{className:"sort-order-btn",onClick:()=>p("asc"===h?"desc":"asc"),children:"asc"===h?(0,r.jsx)(i.Ucs,{}):(0,r.jsx)(i.Vr3,{})})]}),(0,r.jsxs)("div",{className:"view-mode-container",children:[(0,r.jsx)("button",{className:"view-mode-btn ".concat("grid"===s?"active":""),onClick:()=>o("grid"),children:(0,r.jsx)(i.QJV,{})}),(0,r.jsx)("button",{className:"view-mode-btn ".concat("list"===s?"active":""),onClick:()=>o("list"),children:(0,r.jsx)(i.svy,{})})]})]})]}),S&&(0,r.jsxs)("div",{className:"error-state",children:[(0,r.jsx)(i.w_X,{}),(0,r.jsx)("span",{children:S}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"retry-btn",children:"Try Again"})]}),!S&&(0,r.jsx)("div",{className:"projects-display ".concat(s),children:0===L.length?(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)(i.yd7,{}),(0,r.jsx)("h3",{children:"No projects found"}),(0,r.jsx)("p",{children:d||"all"!==e?"Try adjusting your search or filters":"You are not assigned to any projects yet"})]}):L.map((e=>{var a,s,t;return(0,r.jsxs)("div",{className:"project-card",onClick:()=>k("/staff/current-project/".concat(e._id)),children:[(0,r.jsxs)("div",{className:"project-image-container",children:[(0,r.jsx)("img",{src:e.photos&&e.photos.length>0?e.photos[0]:"https://placehold.co/400x250?text=No+Photo",alt:e.projectName,className:"project-image"}),(0,r.jsxs)("div",{className:"project-status-badge",style:{backgroundColor:_(e.status)},children:[(t=e.status,"completed"===(null===t||void 0===t?void 0:t.toLowerCase())?(0,r.jsx)(i.A7C,{}):(0,r.jsx)(i.w_X,{})),(0,r.jsx)("span",{children:e.status||"Unknown"})]})]}),(0,r.jsxs)("div",{className:"project-content",children:[(0,r.jsxs)("div",{className:"project-header",children:[(0,r.jsx)("h3",{className:"project-name",children:e.projectName}),(0,r.jsxs)("div",{className:"project-location",children:[(0,r.jsx)(i.vq8,{}),(0,r.jsx)("span",{children:(null===(a=e.location)||void 0===a?void 0:a.name)||"No Location"})]})]}),(0,r.jsxs)("div",{className:"project-details",children:[(0,r.jsxs)("div",{className:"detail-item",children:[(0,r.jsx)(i.p7b,{className:"detail-icon"}),(0,r.jsxs)("div",{className:"detail-content",children:[(0,r.jsx)("span",{className:"detail-label",children:"Project Manager"}),(0,r.jsx)("span",{className:"detail-value",children:(null===(s=e.projectmanager)||void 0===s?void 0:s.name)||"Not Assigned"})]})]}),(0,r.jsxs)("div",{className:"detail-item",children:[(0,r.jsx)(i.ymh,{className:"detail-icon"}),(0,r.jsxs)("div",{className:"detail-content",children:[(0,r.jsx)("span",{className:"detail-label",children:"Contractor"}),(0,r.jsx)("span",{className:"detail-value",children:e.contractor||"Not Assigned"})]})]}),(0,r.jsxs)("div",{className:"detail-item",children:[(0,r.jsx)(i.bfZ,{className:"detail-icon"}),(0,r.jsxs)("div",{className:"detail-content",children:[(0,r.jsx)("span",{className:"detail-label",children:"Timeline"}),(0,r.jsx)("span",{className:"detail-value",children:e.startDate&&e.endDate?"".concat(new Date(e.startDate).toLocaleDateString()," - ").concat(new Date(e.endDate).toLocaleDateString()):"Not Set"})]})]}),(0,r.jsxs)("div",{className:"detail-item",children:[(0,r.jsx)(i.YXz,{className:"detail-icon"}),(0,r.jsxs)("div",{className:"detail-content",children:[(0,r.jsx)("span",{className:"detail-label",children:"Manpower"}),(0,r.jsx)("span",{className:"detail-value",children:Array.isArray(e.manpower)&&e.manpower.length>0?"".concat(e.manpower.length," assigned"):"No manpower assigned"})]})]}),e.budget&&(0,r.jsxs)("div",{className:"detail-item",children:[(0,r.jsx)(i.MxO,{className:"detail-icon"}),(0,r.jsxs)("div",{className:"detail-content",children:[(0,r.jsx)("span",{className:"detail-label",children:"Budget"}),(0,r.jsx)("span",{className:"detail-value",children:e.budget?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.budget):"N/A"})]})]})]})]})]},e._id)}))})]})})]})}},9513:(e,a,s)=>{s.r(a),s.d(a,{default:()=>l});s(5043);var t=s(8153),n=s(579);const l=()=>(0,n.jsx)(t.default,{baseSegment:"staff"})}}]);
//# sourceMappingURL=staff.ef2e7b83.chunk.js.map