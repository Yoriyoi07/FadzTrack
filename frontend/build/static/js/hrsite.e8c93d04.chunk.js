"use strict";(self.webpackChunkfadz_web_frontend=self.webpackChunkfadz_web_frontend||[]).push([[124],{2326:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var t=s(5043),n=s(3216),l=s(411),c=s(8818),i=(s(2739),s(3204)),o=s(579);const r=()=>{const[e,a]=(0,t.useState)("all"),[s,r]=(0,t.useState)("grid"),[d,m]=(0,t.useState)(""),[j,u]=(0,t.useState)("name"),[h,v]=(0,t.useState)("asc"),[x,p]=(0,t.useState)([]),[g,N]=(0,t.useState)(!0),[b,f]=(0,t.useState)(null),w=(0,n.Zp)(),y=(0,t.useMemo)((()=>{try{return JSON.parse(localStorage.getItem("user")||"{}")}catch(e){return{}}}),[]),S=null===y||void 0===y?void 0:y._id;(0,t.useEffect)((()=>{S&&(async()=>{try{N(!0);const e=await l.Ay.get("/projects/assigned/allroles/".concat(S));p(e.data||[]),f(null)}catch(b){console.error("Failed to fetch projects:",b),f("Failed to load projects. Please try again.")}finally{N(!1)}})()}),[S]);const C=x.filter((a=>{if("completed"===e)return"Completed"===a.status;if("ongoing"===e)return"Ongoing"===a.status||"On Going"===a.status;if("pending"===e)return"Pending"===a.status||"Not Started"===a.status;if(d){var s,t,n,l,c,i;const e=d.toLowerCase();return(null===(s=a.projectName)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(t=a.location)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(l=a.projectmanager)||void 0===l||null===(c=l.name)||void 0===c?void 0:c.toLowerCase().includes(e))||(null===(i=a.contractor)||void 0===i?void 0:i.toLowerCase().includes(e))}return!0})).sort(((e,a)=>{var s,t,n,l;let c,i;switch(j){case"name":default:c=e.projectName||"",i=a.projectName||"";break;case"location":c=(null===(s=e.location)||void 0===s?void 0:s.name)||"",i=(null===(t=a.location)||void 0===t?void 0:t.name)||"";break;case"manager":c=(null===(n=e.projectmanager)||void 0===n?void 0:n.name)||"",i=(null===(l=a.projectmanager)||void 0===l?void 0:l.name)||"";break;case"status":c=e.status||"",i=a.status||"";break;case"startDate":c=new Date(e.startDate||0),i=new Date(a.startDate||0)}return"asc"===h?c>i?1:-1:c<i?1:-1})),k=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"completed":return"#10B981";case"ongoing":case"on going":return"#3B82F6";case"pending":case"not started":return"#F59E0B";default:return"#6B7280"}};return g?(0,o.jsx)("div",{className:"dashboard-container",children:(0,o.jsxs)("div",{className:"loading-container",children:[(0,o.jsx)("div",{className:"loading-spinner"}),(0,o.jsx)("p",{children:"Loading projects..."})]})}):(0,o.jsxs)("div",{className:"dashboard-container",children:[(0,o.jsx)(c.A,{roleSegment:"hrsite"}),(0,o.jsx)("main",{className:"dashboard-main",children:(0,o.jsxs)("div",{className:"projects-container",children:[(0,o.jsx)("div",{className:"page-header",children:(0,o.jsxs)("div",{className:"page-title-section",children:[(0,o.jsx)("h1",{className:"page-title",children:"My Projects"}),(0,o.jsx)("p",{className:"page-subtitle",children:"View all projects you are assigned to"})]})}),(0,o.jsxs)("div",{className:"projects-controls",children:[(0,o.jsxs)("div",{className:"controls-left",children:[(0,o.jsxs)("div",{className:"search-container",children:[(0,o.jsx)(i.KSO,{className:"search-icon"}),(0,o.jsx)("input",{type:"text",placeholder:"Search projects...",value:d,onChange:e=>m(e.target.value),className:"search-input"})]}),(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsxs)("button",{className:"filter-btn ".concat("all"===e?"active":""),onClick:()=>a("all"),children:["All (",x.length,")"]}),(0,o.jsxs)("button",{className:"filter-btn ".concat("ongoing"===e?"active":""),onClick:()=>a("ongoing"),children:["Ongoing (",x.filter((e=>"Ongoing"===e.status||"On Going"===e.status)).length,")"]}),(0,o.jsxs)("button",{className:"filter-btn ".concat("completed"===e?"active":""),onClick:()=>a("completed"),children:["Completed (",x.filter((e=>"Completed"===e.status)).length,")"]}),(0,o.jsxs)("button",{className:"filter-btn ".concat("pending"===e?"active":""),onClick:()=>a("pending"),children:["Pending (",x.filter((e=>"Pending"===e.status||"Not Started"===e.status)).length,")"]})]})]}),(0,o.jsxs)("div",{className:"controls-right",children:[(0,o.jsxs)("div",{className:"sort-container",children:[(0,o.jsxs)("select",{value:j,onChange:e=>u(e.target.value),className:"sort-select",children:[(0,o.jsx)("option",{value:"name",children:"Sort by Name"}),(0,o.jsx)("option",{value:"location",children:"Sort by Location"}),(0,o.jsx)("option",{value:"manager",children:"Sort by Manager"}),(0,o.jsx)("option",{value:"status",children:"Sort by Status"}),(0,o.jsx)("option",{value:"startDate",children:"Sort by Start Date"})]}),(0,o.jsx)("button",{className:"sort-order-btn",onClick:()=>v("asc"===h?"desc":"asc"),children:"asc"===h?(0,o.jsx)(i.Ucs,{}):(0,o.jsx)(i.Vr3,{})})]}),(0,o.jsxs)("div",{className:"view-mode-container",children:[(0,o.jsx)("button",{className:"view-mode-btn ".concat("grid"===s?"active":""),onClick:()=>r("grid"),children:(0,o.jsx)(i.QJV,{})}),(0,o.jsx)("button",{className:"view-mode-btn ".concat("list"===s?"active":""),onClick:()=>r("list"),children:(0,o.jsx)(i.svy,{})})]})]})]}),b&&(0,o.jsxs)("div",{className:"error-state",children:[(0,o.jsx)(i.w_X,{}),(0,o.jsx)("span",{children:b}),(0,o.jsx)("button",{onClick:()=>window.location.reload(),className:"retry-btn",children:"Try Again"})]}),!b&&(0,o.jsx)("div",{className:"projects-display ".concat(s),children:0===C.length?(0,o.jsxs)("div",{className:"empty-state",children:[(0,o.jsx)(i.yd7,{}),(0,o.jsx)("h3",{children:"No projects found"}),(0,o.jsx)("p",{children:d||"all"!==e?"Try adjusting your search or filters":"You are not assigned to any projects yet"})]}):C.map((e=>{var a,s,t;return(0,o.jsxs)("div",{className:"project-card",onClick:()=>w("/hr-site/current-project"),children:[(0,o.jsxs)("div",{className:"project-image-container",children:[(0,o.jsx)("img",{src:e.photos&&e.photos.length>0?e.photos[0]:"https://placehold.co/400x250?text=No+Photo",alt:e.projectName,className:"project-image"}),(0,o.jsxs)("div",{className:"project-status-badge",style:{backgroundColor:k(e.status)},children:[(t=e.status,"completed"===(null===t||void 0===t?void 0:t.toLowerCase())?(0,o.jsx)(i.A7C,{}):(0,o.jsx)(i.w_X,{})),(0,o.jsx)("span",{children:e.status||"Unknown"})]})]}),(0,o.jsxs)("div",{className:"project-content",children:[(0,o.jsxs)("div",{className:"project-header",children:[(0,o.jsx)("h3",{className:"project-name",children:e.projectName}),(0,o.jsxs)("div",{className:"project-location",children:[(0,o.jsx)(i.vq8,{}),(0,o.jsx)("span",{children:(null===(a=e.location)||void 0===a?void 0:a.name)||"No Location"})]})]}),(0,o.jsxs)("div",{className:"project-details",children:[(0,o.jsxs)("div",{className:"detail-item",children:[(0,o.jsx)(i.p7b,{className:"detail-icon"}),(0,o.jsxs)("div",{className:"detail-content",children:[(0,o.jsx)("span",{className:"detail-label",children:"Project Manager"}),(0,o.jsx)("span",{className:"detail-value",children:(null===(s=e.projectmanager)||void 0===s?void 0:s.name)||"Not Assigned"})]})]}),(0,o.jsxs)("div",{className:"detail-item",children:[(0,o.jsx)(i.ymh,{className:"detail-icon"}),(0,o.jsxs)("div",{className:"detail-content",children:[(0,o.jsx)("span",{className:"detail-label",children:"Contractor"}),(0,o.jsx)("span",{className:"detail-value",children:e.contractor||"Not Assigned"})]})]}),(0,o.jsxs)("div",{className:"detail-item",children:[(0,o.jsx)(i.bfZ,{className:"detail-icon"}),(0,o.jsxs)("div",{className:"detail-content",children:[(0,o.jsx)("span",{className:"detail-label",children:"Timeline"}),(0,o.jsx)("span",{className:"detail-value",children:e.startDate&&e.endDate?"".concat(new Date(e.startDate).toLocaleDateString()," - ").concat(new Date(e.endDate).toLocaleDateString()):"Not Set"})]})]}),(0,o.jsxs)("div",{className:"detail-item",children:[(0,o.jsx)(i.YXz,{className:"detail-icon"}),(0,o.jsxs)("div",{className:"detail-content",children:[(0,o.jsx)("span",{className:"detail-label",children:"Manpower"}),(0,o.jsx)("span",{className:"detail-value",children:Array.isArray(e.manpower)&&e.manpower.length>0?"".concat(e.manpower.length," assigned"):"No manpower assigned"})]})]}),e.budget&&(0,o.jsxs)("div",{className:"detail-item",children:[(0,o.jsx)(i.MxO,{className:"detail-icon"}),(0,o.jsxs)("div",{className:"detail-content",children:[(0,o.jsx)("span",{className:"detail-label",children:"Budget"}),(0,o.jsx)("span",{className:"detail-value",children:e.budget})]})]})]})]})]},e._id)}))})]})})]})}},2739:()=>{},4058:(e,a,s)=>{s.r(a),s.d(a,{default:()=>l});s(5043);var t=s(8153),n=s(579);const l=()=>(0,n.jsx)(t.default,{baseSegment:"hr-site"})},6116:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});s(5043);var t=s(8818),n=s(1245),l=s(579);function c(){return(0,l.jsx)(n.A,{role:"hrsite",useUnifiedHeader:!0,customHeader:(0,l.jsx)(t.A,{roleSegment:"hrsite"})})}}}]);
//# sourceMappingURL=hrsite.e8c93d04.chunk.js.map