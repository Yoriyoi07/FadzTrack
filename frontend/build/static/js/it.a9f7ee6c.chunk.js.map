{"version":3,"file":"static/js/it.a9f7ee6c.chunk.js","mappings":"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","sources":["components/it/ItMatRequestListWrapper.js","components/it/ItMatRequestDetailWrapper.js","components/it/ItMaterialRequestDetail.js","components/it/ItAuditLogs.js","utils/manpowerRequestsPdf.js","components/it/ItManpowerRequestDetail.js","components/it/ItViewProject.js","components/it/ItMaterialRequestEdit.js","components/it/ItManpowerList.js","components/chats/ItChat.js","components/it/ItProjects.js","utils/accountsPdf.js","components/it/ItDash.js"],"sourcesContent":["import React from 'react';\r\nimport MaterialRequestListView from '../material/MaterialRequestListView';\r\nimport '../material/materialRequests.css';\r\n\r\nconst ItMatRequestListWrapper = () => (\r\n  <MaterialRequestListView\r\n    role=\"IT\"\r\n    fetchUrl=\"/requests/all\"\r\n    detailLinkBase=\"/it/material-request\"\r\n    rootClass=\"it-request-list\"\r\n    headerTitle=\"Material Requests\"\r\n    headerSubtitle=\"All material requests (IT view)\"\r\n    enableExport={true}\r\n    exportTitle=\"Material Requests Export (IT View)\"\r\n  />\r\n);\r\n\r\nexport default ItMatRequestListWrapper;\r\n","import React from 'react';\r\nimport MaterialRequestDetailView from '../material/MaterialRequestDetailView';\r\nimport AppHeader from '../layout/AppHeader';\r\n\r\nconst ItMatRequestDetailWrapper = () => (\r\n  <MaterialRequestDetailView\r\n    role=\"IT\"\r\n    rootClass=\"it-request-detail\"\r\n    customHeader={<AppHeader roleSegment=\"it\" />}\r\n    headerTitle=\"Material Request Detail\"\r\n    headerSubtitle=\"Full lifecycle view (IT)\"\r\n  />\r\n);\r\n\r\nexport default ItMatRequestDetailWrapper;\r\n","// Legacy IT detail component replaced by generic MaterialRequestDetailView wrapper.\r\nimport ItMatRequestDetailWrapper from './ItMatRequestDetailWrapper';\r\nexport default ItMatRequestDetailWrapper;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport api from '../../api/axiosInstance';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport '../style/it_style/It_Dash.css';\r\n// Nav icons\r\nimport { FaTachometerAlt, FaComments, FaBoxes, FaUsers, FaClipboardList, FaFileExport, FaDownload } from 'react-icons/fa';\r\n// PDF export\r\nimport { jsPDF } from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport AppHeader from '../layout/AppHeader';\r\n\r\nconst ItAuditLog = () => {\r\n  const navigate = useNavigate();\r\n  const [profileMenuOpen, setProfileMenuOpen] = useState(false);\r\n  const [isHeaderCollapsed, setIsHeaderCollapsed] = useState(false);\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [roleFilter, setRoleFilter] = useState(\"\");\r\n  const [actionFilter, setActionFilter] = useState(\"\");\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [endDate, setEndDate] = useState(\"\");\r\n  const [exportModalOpen, setExportModalOpen] = useState(false);\r\n  const [exportLoading, setExportLoading] = useState(false);\r\n  const [expandedRow, setExpandedRow] = useState(null); // which log _id is expanded\r\n  // Pagination state\r\n  // Query param hydration\r\n  const initialParams = (() => {\r\n    try {\r\n      const sp = new URLSearchParams(window.location.search);\r\n      const p = parseInt(sp.get('page') || '1', 10);\r\n      const ps = parseInt(sp.get('pageSize') || '30', 10);\r\n      return { p: isFinite(p) && p>0 ? p : 1, ps: [30,50,100].includes(ps) ? ps : 30 };\r\n    } catch { return { p:1, ps:30 }; }\r\n  })();\r\n  const [page, setPage] = useState(initialParams.p);\r\n  const [pageSize, setPageSize] = useState(initialParams.ps);\r\n  const [jumpPage, setJumpPage] = useState('');\r\n\r\n  // Pagination button & ellipsis styling helpers\r\n  const paginationBtnStyle = (disabled, active=false) => ({\r\n    padding: '6px 12px',\r\n    fontSize: 13,\r\n    borderRadius: 6,\r\n    border: active ? '1px solid #2563eb' : '1px solid #d1d5db',\r\n    backgroundColor: disabled ? '#f1f5f9' : active ? '#3b82f6' : '#ffffff',\r\n    color: disabled ? '#94a3b8' : active ? '#ffffff' : '#374151',\r\n    cursor: disabled ? 'not-allowed' : 'pointer',\r\n    fontWeight: active ? 600 : 500,\r\n    lineHeight: 1.2,\r\n    transition: 'all .15s ease',\r\n    minWidth: 42,\r\n  });\r\n  const ellipsisStyle = { padding: '6px 4px', color: '#64748b', fontSize: 13, userSelect: 'none' };\r\n\r\n  // User state\r\n  const [user, setUser] = useState(() => {\r\n    const stored = localStorage.getItem('user');\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n  const [token, setToken] = useState(() => localStorage.getItem('token') || \"\");\r\n  const [userId, setUserId] = useState(() => user?._id);\r\n  const [userName, setUserName] = useState(user?.name || 'IT Manager');\r\n  const [userRole, setUserRole] = useState(user?.role || '');\r\n\r\n  // Listen for storage changes\r\n  useEffect(() => {\r\n    const handleUserChange = () => {\r\n      const stored = localStorage.getItem('user');\r\n      setUser(stored ? JSON.parse(stored) : null);\r\n      setUserId(stored ? JSON.parse(stored)._id : undefined);\r\n      setToken(localStorage.getItem('token') || \"\");\r\n    };\r\n    window.addEventListener(\"storage\", handleUserChange);\r\n    return () => window.removeEventListener(\"storage\", handleUserChange);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setUserName(user?.name || 'IT Manager');\r\n    setUserRole(user?.role || '');\r\n  }, [user]);\r\n\r\n  // Scroll handler for header collapse\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n      const shouldCollapse = scrollTop > 50;\r\n      setIsHeaderCollapsed(shouldCollapse);\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [isHeaderCollapsed]);\r\n\r\n  useEffect(() => {\r\n    api.get('/audit-logs') // Adjust endpoint if you have a specific IT audit logs endpoint\r\n      .then((res) => {\r\n        setLogs(res.data);\r\n        setLoading(false);\r\n      })\r\n      .catch(() => setLoading(false));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (!event.target.closest(\".user-profile\")) {\r\n        setProfileMenuOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"click\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    api.post('/auth/logout', {}, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    }).finally(() => {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      setUser(null);\r\n      setUserId(undefined);\r\n      setToken(\"\");\r\n      window.dispatchEvent(new Event('storage'));\r\n      navigate('/');\r\n    });\r\n  };\r\n\r\n  // Toggle details row\r\n  const toggleRow = (id) => {\r\n    setExpandedRow(prev => prev === id ? null : id);\r\n  };\r\n\r\n  // Render meta details nicely\r\n  const renderMeta = (log) => {\r\n    const meta = log.meta || {};\r\n    // Changed fields diff\r\n    if (Array.isArray(meta.changedFields) && meta.changedFields.length) {\r\n      return (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 12 }}>\r\n          <div style={{ fontWeight: 600, fontSize: 14 }}>Changed Fields ({meta.changedFields.length})</div>\r\n          <div style={{ overflowX: 'auto' }}>\r\n            <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: 12 }}>\r\n              <thead>\r\n                <tr style={{ background: '#f1f5f9' }}>\r\n                  <th style={metaTh}>Field</th>\r\n                  <th style={metaTh}>Before</th>\r\n                  <th style={metaTh}>After</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {meta.changedFields.map((f,i) => {\r\n                  const changed = f.before !== f.after;\r\n                  return (\r\n                    <tr key={i} style={{ background: i % 2 ? '#ffffff' : '#f8fafc' }}>\r\n                      <td style={metaTd}>{f.field}</td>\r\n                      <td style={{ ...metaTd, color: changed ? '#dc2626' : '#475569' }}>\r\n                        {formatValue(f.before)}\r\n                      </td>\r\n                      <td style={{ ...metaTd, color: changed ? '#16a34a' : '#475569' }}>\r\n                        {formatValue(f.after)}\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // File uploads (chat / project)\r\n    if (meta.fileNames || meta.filesCount) {\r\n      return (\r\n        <div style={{ fontSize: 12, display: 'flex', flexDirection: 'column', gap: 6 }}>\r\n          {meta.filesCount != null && <div><b>Files Count:</b> {meta.filesCount}</div>}\r\n          {Array.isArray(meta.fileNames) && meta.fileNames.length > 0 && (\r\n            <div>\r\n              <b>Files:</b>\r\n              <ul style={{ margin: '4px 0 0 16px', padding: 0 }}>\r\n                {meta.fileNames.map((n,i) => <li key={i} style={{ fontFamily: 'monospace' }}>{n}</li>)}\r\n              </ul>\r\n            </div>\r\n          )}\r\n          {meta.fileTypes && (\r\n            <div><b>Types:</b> {Array.isArray(meta.fileTypes) ? meta.fileTypes.join(', ') : meta.fileTypes}</div>\r\n          )}\r\n          {meta.totalSize && <div><b>Total Size:</b> {meta.totalSize} bytes</div>}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Generic fallback JSON\r\n    return (\r\n      <pre style={{ whiteSpace: 'pre-wrap', fontSize: 12, margin: 0 }}>\r\n        {JSON.stringify(meta, null, 2)}\r\n      </pre>\r\n    );\r\n  };\r\n\r\n  const formatValue = (v) => {\r\n    if (v === null || v === undefined) return '';\r\n    if (typeof v === 'object') return JSON.stringify(v);\r\n    return String(v);\r\n  };\r\n\r\n  // Filter logic\r\n  const filteredLogs = logs.filter((log) => {\r\n    const logDate = new Date(log.timestamp);\r\n    const start = startDate ? new Date(startDate) : null;\r\n    const end = endDate ? new Date(endDate + 'T23:59:59') : null; // Include the entire end date\r\n    \r\n    // Date filter logic\r\n    const dateFilter = (!start || logDate >= start) && (!end || logDate <= end);\r\n    \r\n    return (\r\n      dateFilter &&\r\n      (!roleFilter || log.performedByRole?.toLowerCase().includes(roleFilter.toLowerCase())) &&\r\n      (!actionFilter || log.action?.toLowerCase().includes(actionFilter.toLowerCase())) &&\r\n      (\r\n        !search ||\r\n        log.description?.toLowerCase().includes(search.toLowerCase()) ||\r\n        log.performedBy?.name?.toLowerCase().includes(search.toLowerCase()) ||\r\n        log.performedByRole?.toLowerCase().includes(search.toLowerCase()) ||\r\n        log.action?.toLowerCase().includes(search.toLowerCase())\r\n      )\r\n    );\r\n  });\r\n\r\n  // Reset to first page whenever filters change\r\n  useEffect(()=>{ setPage(1); }, [search, roleFilter, actionFilter, startDate, endDate, pageSize]);\r\n\r\n  // Sync to URL (debounced minimal) when page or pageSize changes\r\n  useEffect(()=>{\r\n    const sp = new URLSearchParams(window.location.search);\r\n    sp.set('page', String(page));\r\n    sp.set('pageSize', String(pageSize));\r\n    const newUrl = `${window.location.pathname}?${sp.toString()}`;\r\n    window.history.replaceState(null,'',newUrl);\r\n  }, [page, pageSize]);\r\n\r\n  // Derive paginated slice\r\n  const totalFiltered = filteredLogs.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalFiltered / pageSize));\r\n  const currentPage = Math.min(page, totalPages);\r\n  const paginatedLogs = filteredLogs.slice((currentPage - 1) * pageSize, currentPage * pageSize);\r\n\r\n  // Helper function for action colors\r\n  const getActionColor = (action) => {\r\n    const actionLower = action?.toLowerCase();\r\n    switch (actionLower) {\r\n      case 'login':\r\n      case 'login_trusted':\r\n        return '#10b981'; // Green\r\n      case 'logout':\r\n        return '#ef4444'; // Red\r\n      case 'create_material_request':\r\n      case 'create_manpower_request':\r\n      case 'add_project':\r\n        return '#3b82f6'; // Blue\r\n      case 'update_material_request':\r\n      case 'update_manpower_request':\r\n      case 'update_project':\r\n      case 'update_project_tasks':\r\n        return '#f59e0b'; // Yellow\r\n      case 'delete_material_request':\r\n      case 'delete_manpower_request':\r\n      case 'delete_project':\r\n      case 'delete_project_document':\r\n        return '#dc2626'; // Red\r\n      case 'approve_material_request':\r\n      case 'approve_manpower_request':\r\n        return '#059669'; // Green\r\n      case 'complete_manpower_request':\r\n        return '#10b981'; // Green\r\n      case 'add_project_documents':\r\n        return '#8b5cf6'; // Purple\r\n      case 'submit_daily_report':\r\n        return '#06b6d4'; // Cyan\r\n      case 'generate_attendance_report':\r\n        return '#8b5cf6'; // Purple\r\n      case 'submit_attendance_report':\r\n        return '#06b6d4'; // Cyan\r\n      case 'upload_project_discussion':\r\n        return '#8b5cf6'; // Purple\r\n      case 'upload_project_files':\r\n        return '#8b5cf6'; // Purple\r\n      case 'generate_dss_report':\r\n        return '#06b6d4'; // Cyan\r\n      case 'upload_chat_files':\r\n        return '#8b5cf6'; // Purple\r\n      default:\r\n        return '#6b7280'; // Gray\r\n    }\r\n  };\r\n\r\n  // Export functions\r\n  const handleExport = async () => {\r\n    setExportLoading(true);\r\n    try {\r\n      await exportToPDF(filteredLogs);\r\n      setExportModalOpen(false);\r\n    } catch (error) {\r\n      console.error('Export error:', error);\r\n      alert('Failed to export PDF. Please try again.');\r\n    } finally {\r\n      setExportLoading(false);\r\n    }\r\n  };\r\n\r\n  const exportToPDF = async (data) => {\r\n    try {\r\n      // Create new PDF document\r\n      const doc = new jsPDF();\r\n      \r\n      // Add company logo\r\n      const logoImg = new Image();\r\n      logoImg.src = '/images/Fadz-logo.png';\r\n      \r\n      await new Promise((resolve, reject) => {\r\n        logoImg.onload = () => {\r\n          try {\r\n            // Add logo to top left (increased size)\r\n            doc.addImage(logoImg, 'PNG', 20, 20, 50, 50);\r\n            resolve();\r\n          } catch (error) {\r\n            console.warn('Could not add logo to PDF:', error);\r\n            resolve();\r\n          }\r\n        };\r\n        logoImg.onerror = () => {\r\n          console.warn('Could not load logo for PDF');\r\n          resolve();\r\n        };\r\n      });\r\n\r\n      // Add company name and title\r\n      doc.setFontSize(26); // increased font size\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('FadzTrack', 80, 40); // adjusted position for larger logo\r\n      \r\n      doc.setFontSize(20); // increased font size\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('IT Audit Logs Report', 80, 55); // adjusted position\r\n      \r\n      // Add export details\r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'normal');\r\n      doc.text(`Exported by: ${userName} (${userRole})`, 20, 70);\r\n      doc.text(`Export Date: ${new Date().toLocaleString()}`, 20, 80);\r\n      \r\n      // Add active filters\r\n      let filterY = 95;\r\n      doc.setFontSize(12);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Active Filters:', 20, filterY);\r\n      \r\n      filterY += 10;\r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'normal');\r\n      \r\n      if (search) {\r\n        doc.text(`Search: \"${search}\"`, 20, filterY);\r\n        filterY += 8;\r\n      }\r\n      if (roleFilter) {\r\n        doc.text(`Role: ${roleFilter}`, 20, filterY);\r\n        filterY += 8;\r\n      }\r\n      if (actionFilter) {\r\n        doc.text(`Action: ${actionFilter}`, 20, filterY);\r\n        filterY += 8;\r\n      }\r\n      if (startDate) {\r\n        doc.text(`Start Date: ${startDate}`, 20, filterY);\r\n        filterY += 8;\r\n      }\r\n      if (endDate) {\r\n        doc.text(`End Date: ${endDate}`, 20, filterY);\r\n        filterY += 8;\r\n      }\r\n      \r\n      // Add summary\r\n      filterY += 5;\r\n      doc.setFontSize(12);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text(`Total Records: ${data.length}`, 20, filterY);\r\n      \r\n      // Add table\r\n      const tableY = filterY + 20;\r\n      \r\n      const headers = [\r\n        'Date/Time',\r\n        'Action', \r\n        'Performed By',\r\n        'Role',\r\n        'Description'\r\n      ];\r\n      \r\n      const rows = data.map(log => [\r\n        new Date(log.timestamp).toLocaleString(),\r\n        log.action || '',\r\n        log.performedBy?.name || 'Unknown',\r\n        log.performedByRole || '',\r\n        log.description || ''\r\n      ]);\r\n      \r\n      // Use autoTable for better table formatting\r\n      autoTable(doc, {\r\n        head: [headers],\r\n        body: rows,\r\n        startY: tableY,\r\n        margin: { top: 20, right: 20, bottom: 20, left: 20 },\r\n        styles: {\r\n          fontSize: 8,\r\n          cellPadding: 2,\r\n          overflow: 'linebreak'\r\n        },\r\n        headStyles: {\r\n          fillColor: [59, 130, 246],\r\n          textColor: 255,\r\n          fontStyle: 'bold'\r\n        },\r\n        alternateRowStyles: {\r\n          fillColor: [248, 250, 252]\r\n        },\r\n        columnStyles: {\r\n          0: { cellWidth: 35 }, // Date/Time\r\n          1: { cellWidth: 30 }, // Action\r\n          2: { cellWidth: 35 }, // Performed By\r\n          3: { cellWidth: 25 }, // Role\r\n          4: { cellWidth: 50 }  // Description\r\n        }\r\n      });\r\n      \r\n      // Save the PDF\r\n      const fileName = `audit-logs-${new Date().toISOString().split('T')[0]}.pdf`;\r\n      doc.save(fileName);\r\n      \r\n    } catch (error) {\r\n      console.error('Error generating PDF:', error);\r\n      throw new Error('Failed to generate PDF');\r\n    }\r\n  };\r\n\r\n  // Clear all filters\r\n  const clearAllFilters = () => {\r\n    setSearch(\"\");\r\n    setRoleFilter(\"\");\r\n    setActionFilter(\"\");\r\n    setStartDate(\"\");\r\n    setEndDate(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-container\" style={{ overflow: 'visible' }}>\r\n      <AppHeader roleSegment=\"it\" />\r\n      {/* Ensure only one vertical scrollbar by disabling internal main overflow */}\r\n      <main className=\"dashboard-main\" style={{ marginTop:'1rem', overflow:'visible', maxHeight:'none' }}>\r\n        <div style={{ maxWidth: 1200, margin: \"30px auto\", padding: 24, background: \"#fff\", borderRadius: 12, boxShadow: \"0 2px 16px #0001\" }}>\r\n          {/* Page Header */}\r\n          <div style={{ \r\n            display: 'flex', \r\n            justifyContent: 'space-between', \r\n            alignItems: 'center', \r\n            marginBottom: 24,\r\n            borderBottom: '2px solid #f0f0f0',\r\n            paddingBottom: 16\r\n          }}>\r\n            <div>\r\n              <h2 style={{ \r\n                margin: 0, \r\n                fontSize: '28px', \r\n                fontWeight: '600', \r\n                color: '#1f2937',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '12px'\r\n              }}>\r\n                <FaClipboardList style={{ color: '#3b82f6' }} />\r\n                IT Audit Log\r\n              </h2>\r\n              <p style={{ \r\n                margin: '8px 0 0 0', \r\n                color: '#6b7280', \r\n                fontSize: '14px',\r\n                fontWeight: '500'\r\n              }}>\r\n                Monitor and track all system activities and user actions\r\n              </p>\r\n            </div>\r\n            <button \r\n              onClick={() => setExportModalOpen(true)}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '8px',\r\n                padding: '10px 16px',\r\n                backgroundColor: '#3b82f6',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s ease',\r\n                boxShadow: '0 2px 4px rgba(59, 130, 246, 0.2)'\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                e.target.style.backgroundColor = '#2563eb';\r\n                e.target.style.transform = 'translateY(-1px)';\r\n                e.target.style.boxShadow = '0 4px 8px rgba(59, 130, 246, 0.3)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.target.style.backgroundColor = '#3b82f6';\r\n                e.target.style.transform = 'translateY(0)';\r\n                e.target.style.boxShadow = '0 2px 4px rgba(59, 130, 246, 0.2)';\r\n              }}\r\n            >\r\n              <FaFileExport />\r\n              Export PDF\r\n            </button>\r\n          </div>\r\n\r\n                     {/* Search and Filters */}\r\n           <div style={{ \r\n             display: \"flex\", \r\n             gap: 16, \r\n             marginBottom: 24, \r\n             flexWrap: \"wrap\",\r\n             padding: '20px',\r\n             backgroundColor: '#f8fafc',\r\n             borderRadius: '12px',\r\n             border: '1px solid #e2e8f0'\r\n           }}>\r\n             <div style={{ flex: 2, minWidth: 250 }}>\r\n               <label style={{ \r\n                 display: 'block', \r\n                 marginBottom: '6px', \r\n                 fontSize: '14px', \r\n                 fontWeight: '500', \r\n                 color: '#374151' \r\n               }}>\r\n                 Search\r\n               </label>\r\n               <input\r\n                 placeholder=\"Search by description, user, role, or action...\"\r\n                 value={search}\r\n                 onChange={e => setSearch(e.target.value)}\r\n                 style={{ \r\n                   width: '100%',\r\n                   padding: '12px 16px', \r\n                   borderRadius: '8px', \r\n                   border: \"1px solid #d1d5db\",\r\n                   fontSize: '14px',\r\n                   transition: 'all 0.2s ease',\r\n                   outline: 'none'\r\n                 }}\r\n                 onFocus={(e) => {\r\n                   e.target.style.borderColor = '#3b82f6';\r\n                   e.target.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';\r\n                 }}\r\n                 onBlur={(e) => {\r\n                   e.target.style.borderColor = '#d1d5db';\r\n                   e.target.style.boxShadow = 'none';\r\n                 }}\r\n               />\r\n             </div>\r\n             <div style={{ flex: 1, minWidth: 150 }}>\r\n               <label style={{ \r\n                 display: 'block', \r\n                 marginBottom: '6px', \r\n                 fontSize: '14px', \r\n                 fontWeight: '500', \r\n                 color: '#374151' \r\n               }}>\r\n                 Start Date\r\n               </label>\r\n               <input\r\n                 type=\"date\"\r\n                 value={startDate}\r\n                 onChange={e => setStartDate(e.target.value)}\r\n                 style={{ \r\n                   width: '100%',\r\n                   padding: '12px 16px', \r\n                   borderRadius: '8px', \r\n                   border: \"1px solid #d1d5db\",\r\n                   fontSize: '14px',\r\n                   transition: 'all 0.2s ease',\r\n                   outline: 'none',\r\n                   backgroundColor: 'white',\r\n                   cursor: 'pointer'\r\n                 }}\r\n                 onFocus={(e) => {\r\n                   e.target.style.borderColor = '#3b82f6';\r\n                   e.target.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';\r\n                 }}\r\n                 onBlur={(e) => {\r\n                   e.target.style.borderColor = '#d1d5db';\r\n                   e.target.style.boxShadow = 'none';\r\n                 }}\r\n               />\r\n             </div>\r\n             <div style={{ flex: 1, minWidth: 150 }}>\r\n               <label style={{ \r\n                 display: 'block', \r\n                 marginBottom: '6px', \r\n                 fontSize: '14px', \r\n                 fontWeight: '500', \r\n                 color: '#374151' \r\n               }}>\r\n                 End Date\r\n               </label>\r\n               <input\r\n                 type=\"date\"\r\n                 value={endDate}\r\n                 onChange={e => setEndDate(e.target.value)}\r\n                 style={{ \r\n                   width: '100%',\r\n                   padding: '12px 16px', \r\n                   borderRadius: '8px', \r\n                   border: \"1px solid #d1d5db\",\r\n                   fontSize: '14px',\r\n                   transition: 'all 0.2s ease',\r\n                   outline: 'none',\r\n                   backgroundColor: 'white',\r\n                   cursor: 'pointer'\r\n                 }}\r\n                 onFocus={(e) => {\r\n                   e.target.style.borderColor = '#3b82f6';\r\n                   e.target.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';\r\n                 }}\r\n                 onBlur={(e) => {\r\n                   e.target.style.borderColor = '#d1d5db';\r\n                   e.target.style.boxShadow = 'none';\r\n                 }}\r\n               />\r\n             </div>\r\n                         <div style={{ flex: 1, minWidth: 150 }}>\r\n               <label style={{ \r\n                 display: 'block', \r\n                 marginBottom: '6px', \r\n                 fontSize: '14px', \r\n                 fontWeight: '500', \r\n                 color: '#374151' \r\n               }}>\r\n                 Role Filter\r\n               </label>\r\n               <select\r\n                 value={roleFilter}\r\n                 onChange={e => setRoleFilter(e.target.value)}\r\n                 style={{ \r\n                   width: '100%',\r\n                   padding: '12px 16px', \r\n                   borderRadius: '8px', \r\n                   border: \"1px solid #d1d5db\",\r\n                   fontSize: '14px',\r\n                   transition: 'all 0.2s ease',\r\n                   outline: 'none',\r\n                   backgroundColor: 'white',\r\n                   cursor: 'pointer'\r\n                 }}\r\n                 onFocus={(e) => {\r\n                   e.target.style.borderColor = '#3b82f6';\r\n                   e.target.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';\r\n                 }}\r\n                 onBlur={(e) => {\r\n                   e.target.style.borderColor = '#d1d5db';\r\n                   e.target.style.boxShadow = 'none';\r\n                 }}\r\n               >\r\n                 <option value=\"\">All Roles</option>\r\n                 <option value=\"IT\">IT</option>\r\n                 <option value=\"HR\">HR</option>\r\n                 <option value=\"Project Manager\">Project Manager</option>\r\n                 <option value=\"Area Manager\">Area Manager</option>\r\n                 <option value=\"Person in Charge\">Person in Charge</option>\r\n                 <option value=\"CEO\">CEO</option>\r\n                 <option value=\"Admin\">Admin</option>\r\n               </select>\r\n             </div>\r\n             <div style={{ flex: 1, minWidth: 150 }}>\r\n               <label style={{ \r\n                 display: 'block', \r\n                 marginBottom: '6px', \r\n                 fontSize: '14px', \r\n                 fontWeight: '500', \r\n                 color: '#374151' \r\n               }}>\r\n                 Action Filter\r\n               </label>\r\n               <select\r\n                 value={actionFilter}\r\n                 onChange={e => setActionFilter(e.target.value)}\r\n                 style={{ \r\n                   width: '100%',\r\n                   padding: '12px 16px', \r\n                   borderRadius: '8px', \r\n                   border: \"1px solid #d1d5db\",\r\n                   fontSize: '14px',\r\n                   transition: 'all 0.2s ease',\r\n                   outline: 'none',\r\n                   backgroundColor: 'white',\r\n                   cursor: 'pointer'\r\n                 }}\r\n                 onFocus={(e) => {\r\n                   e.target.style.borderColor = '#3b82f6';\r\n                   e.target.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';\r\n                 }}\r\n                 onBlur={(e) => {\r\n                   e.target.style.borderColor = '#d1d5db';\r\n                   e.target.style.boxShadow = 'none';\r\n                 }}\r\n               >\r\n                                  <option value=\"\">All Actions</option>\r\n                 <option value=\"login\">Login</option>\r\n                 <option value=\"login_trusted\">Login (Trusted Device)</option>\r\n                 <option value=\"logout\">Logout</option>\r\n                 <option value=\"CREATE_MATERIAL_REQUEST\">Create Material Request</option>\r\n                 <option value=\"CEO_CREATE_MATERIAL_REQUEST\">CEO Create Material Request</option>\r\n                 <option value=\"UPDATE_MATERIAL_REQUEST\">Update Material Request</option>\r\n                 <option value=\"CEO_UPDATE_MATERIAL_REQUEST\">CEO Update Material Request</option>\r\n                 <option value=\"DELETE_MATERIAL_REQUEST\">Delete Material Request</option>\r\n                 <option value=\"CEO_DELETE_MATERIAL_REQUEST\">CEO Delete Material Request</option>\r\n                 <option value=\"APPROVE_MATERIAL_REQUEST\">Approve Material Request</option>\r\n                 <option value=\"CEO_APPROVE_MATERIAL_REQUEST\">CEO Approve Material Request</option>\r\n                 <option value=\"CREATED_MANPOWER_REQUEST\">Create Manpower Request</option>\r\n                 <option value=\"CEO_CREATED_MANPOWER_REQUEST\">CEO Create Manpower Request</option>\r\n                 <option value=\"UPDATE_MANPOWER_REQUEST\">Update Manpower Request</option>\r\n                 <option value=\"CEO_UPDATED_MANPOWER_REQUEST\">CEO Update Manpower Request</option>\r\n                 <option value=\"DELETE_MANPOWER_REQUEST\">Delete Manpower Request</option>\r\n                 <option value=\"CEO_DELETED_MANPOWER_REQUEST\">CEO Delete Manpower Request</option>\r\n                 <option value=\"APPROVE_MANPOWER_REQUEST\">Approve Manpower Request</option>\r\n                 <option value=\"COMPLETE_MANPOWER_REQUEST\">Complete Manpower Request</option>\r\n                 <option value=\"ADD_PROJECT\">Add Project</option>\r\n                 <option value=\"CEO_ADD_PROJECT\">CEO Add Project</option>\r\n                 <option value=\"UPDATE_PROJECT\">Update Project</option>\r\n                 <option value=\"CEO_UPDATE_PROJECT\">CEO Update Project</option>\r\n                 <option value=\"DELETE_PROJECT\">Delete Project</option>\r\n                 <option value=\"CEO_DELETE_PROJECT\">CEO Delete Project</option>\r\n                 <option value=\"UPDATE_PROJECT_TASKS\">Update Project Tasks</option>\r\n                 <option value=\"ADD_PROJECT_DOCUMENTS\">Add Project Documents</option>\r\n                 <option value=\"DELETE_PROJECT_DOCUMENT\">Delete Project Document</option>\r\n                 <option value=\"CEO_DELETE_PROJECT_DOCUMENT\">CEO Delete Project Document</option>\r\n                 <option value=\"SUBMIT_DAILY_REPORT\">Submit Daily Report</option>\r\n                 <option value=\"GENERATE_ATTENDANCE_REPORT\">Generate Attendance Report</option>\r\n                 <option value=\"SUBMIT_ATTENDANCE_REPORT\">Submit Attendance Report</option>\r\n                 <option value=\"UPLOAD_PROJECT_DISCUSSION\">Upload Project Discussion</option>\r\n                 <option value=\"UPLOAD_PROJECT_FILES\">Upload Project Files</option>\r\n                 <option value=\"GENERATE_DSS_REPORT\">Generate DSS Report</option>\r\n                 <option value=\"UPLOAD_CHAT_FILES\">Upload Chat Files</option>\r\n               </select>\r\n             </div>\r\n             <div style={{ flex: 1, minWidth: 150, display: 'flex', alignItems: 'end' }}>\r\n               <button\r\n                 onClick={clearAllFilters}\r\n                 style={{\r\n                   width: '100%',\r\n                   padding: '12px 16px',\r\n                   backgroundColor: '#f3f4f6',\r\n                   color: '#374151',\r\n                   border: '1px solid #d1d5db',\r\n                   borderRadius: '8px',\r\n                   fontSize: '14px',\r\n                   fontWeight: '500',\r\n                   cursor: 'pointer',\r\n                   transition: 'all 0.2s ease',\r\n                   marginTop: '24px'\r\n                 }}\r\n                 onMouseEnter={(e) => {\r\n                   e.target.style.backgroundColor = '#e5e7eb';\r\n                   e.target.style.borderColor = '#adb5bd';\r\n                 }}\r\n                 onMouseLeave={(e) => {\r\n                   e.target.style.backgroundColor = '#f3f4f6';\r\n                   e.target.style.borderColor = '#d1d5db';\r\n                 }}\r\n               >\r\n                 Clear Filters\r\n               </button>\r\n             </div>\r\n                      </div>\r\n\r\n           {/* Active Filters Summary */}\r\n           {(search || roleFilter || actionFilter || startDate || endDate) && (\r\n             <div style={{\r\n               display: 'flex',\r\n               alignItems: 'center',\r\n               gap: '12px',\r\n               marginBottom: '16px',\r\n               padding: '12px 16px',\r\n               backgroundColor: '#eff6ff',\r\n               border: '1px solid #dbeafe',\r\n               borderRadius: '8px',\r\n               fontSize: '14px',\r\n               color: '#1e40af'\r\n             }}>\r\n               <span style={{ fontWeight: '500' }}>Active Filters:</span>\r\n               {search && (\r\n                 <span style={{\r\n                   backgroundColor: '#dbeafe',\r\n                   padding: '4px 8px',\r\n                   borderRadius: '4px',\r\n                   fontSize: '12px'\r\n                 }}>\r\n                   Search: \"{search}\"\r\n                 </span>\r\n               )}\r\n               {roleFilter && (\r\n                 <span style={{\r\n                   backgroundColor: '#dbeafe',\r\n                   padding: '4px 8px',\r\n                   borderRadius: '4px',\r\n                   fontSize: '12px'\r\n                 }}>\r\n                   Role: {roleFilter}\r\n                 </span>\r\n               )}\r\n               {actionFilter && (\r\n                 <span style={{\r\n                   backgroundColor: '#dbeafe',\r\n                   padding: '4px 8px',\r\n                   borderRadius: '4px',\r\n                   fontSize: '12px'\r\n                 }}>\r\n                   Action: {actionFilter}\r\n                 </span>\r\n               )}\r\n               {startDate && (\r\n                 <span style={{\r\n                   backgroundColor: '#dbeafe',\r\n                   padding: '4px 8px',\r\n                   borderRadius: '4px',\r\n                   fontSize: '12px'\r\n                 }}>\r\n                   From: {new Date(startDate).toLocaleDateString()}\r\n                 </span>\r\n               )}\r\n               {endDate && (\r\n                 <span style={{\r\n                   backgroundColor: '#dbeafe',\r\n                   padding: '4px 8px',\r\n                   borderRadius: '4px',\r\n                   fontSize: '12px'\r\n                 }}>\r\n                   To: {new Date(endDate).toLocaleDateString()}\r\n                 </span>\r\n               )}\r\n               <span style={{ marginLeft: 'auto', fontSize: '12px', opacity: 0.8 }}>\r\n                 {filteredLogs.length} of {logs.length} records\r\n               </span>\r\n             </div>\r\n           )}\r\n\r\n         {loading ? (\r\n          <div style={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '60px 20px',\r\n            color: '#6b7280'\r\n          }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              border: '3px solid #e5e7eb',\r\n              borderTop: '3px solid #3b82f6',\r\n              borderRadius: '50%',\r\n              animation: 'spin 1s linear infinite',\r\n              marginBottom: '16px'\r\n            }}></div>\r\n            <span style={{ fontSize: '16px', fontWeight: '500' }}>Loading audit logs...</span>\r\n          </div>\r\n        ) : (\r\n          <div style={{ \r\n            overflowX: 'auto', // horizontal scroll only if needed\r\n            overflowY: 'visible', // allow content to expand; rely on window scroll\r\n            backgroundColor: 'white',\r\n            borderRadius: '12px',\r\n            border: '1px solid #e5e7eb',\r\n            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\r\n          }}>\r\n            <table style={{ \r\n              width: \"100%\", \r\n              borderCollapse: \"collapse\", \r\n              fontSize: 14,\r\n              fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif'\r\n            }}>\r\n              <thead>\r\n                <tr style={{ \r\n                  background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\r\n                  color: 'white'\r\n                }}>\r\n                  <th style={{\r\n                    ...th,\r\n                    background: 'transparent',\r\n                    color: 'white',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    textTransform: 'uppercase',\r\n                    letterSpacing: '0.5px',\r\n                    padding: '16px 12px'\r\n                  }}>Date/Time</th>\r\n                  <th style={{\r\n                    ...th,\r\n                    background: 'transparent',\r\n                    color: 'white',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    textTransform: 'uppercase',\r\n                    letterSpacing: '0.5px',\r\n                    padding: '16px 12px'\r\n                  }}>Action</th>\r\n                  <th style={{\r\n                    ...th,\r\n                    background: 'transparent',\r\n                    color: 'white',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    textTransform: 'uppercase',\r\n                    letterSpacing: '0.5px',\r\n                    padding: '16px 12px'\r\n                  }}>Performed By</th>\r\n                  <th style={{\r\n                    ...th,\r\n                    background: 'transparent',\r\n                    color: 'white',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    textTransform: 'uppercase',\r\n                    letterSpacing: '0.5px',\r\n                    padding: '16px 12px'\r\n                  }}>Role</th>\r\n                  <th style={{\r\n                    ...th,\r\n                    background: 'transparent',\r\n                    color: 'white',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    textTransform: 'uppercase',\r\n                    letterSpacing: '0.5px',\r\n                    padding: '16px 12px'\r\n                  }}>Description</th>\r\n                  <th style={{\r\n                    ...th,\r\n                    background: 'transparent',\r\n                    color: 'white',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    textTransform: 'uppercase',\r\n                    letterSpacing: '0.5px',\r\n                    padding: '16px 12px'\r\n                  }}>Details</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {totalFiltered === 0 ? (\r\n                  <tr>\r\n                    <td colSpan={6} style={{ \r\n                      textAlign: \"center\", \r\n                      color: \"#9ca3af\", \r\n                      padding: '40px 20px',\r\n                      fontSize: '16px',\r\n                      fontStyle: 'italic'\r\n                    }}>\r\n                      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '8px' }}>\r\n                        <FaClipboardList style={{ fontSize: '24px', opacity: 0.5 }} />\r\n                        No audit logs found matching your criteria\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  paginatedLogs.map((log, i) => {\r\n                    const globalIndex = (currentPage - 1) * pageSize + i; // preserve striping across pages if desired\r\n                    return (\r\n                    <React.Fragment key={log._id || i}>\r\n                      <tr style={{ \r\n                        background: globalIndex % 2 ? \"#fafbfc\" : \"#fff\",\r\n                        transition: 'all 0.2s ease',\r\n                        borderBottom: expandedRow === (log._id || i) ? 'none' : '1px solid #f3f4f6'\r\n                      }}\r\n                      onMouseEnter={(e) => {\r\n                        e.currentTarget.style.backgroundColor = '#f0f9ff';\r\n                        e.currentTarget.style.transform = 'scale(1.01)';\r\n                      }}\r\n                      onMouseLeave={(e) => {\r\n                        e.currentTarget.style.backgroundColor = globalIndex % 2 ? \"#fafbfc\" : \"#fff\";\r\n                        e.currentTarget.style.transform = 'scale(1)';\r\n                      }}\r\n                      >\r\n                        <td style={{\r\n                          ...td,\r\n                          padding: '16px 12px',\r\n                          fontWeight: '500',\r\n                          color: '#374151'\r\n                        }}>\r\n                          {new Date(log.timestamp).toLocaleString()}\r\n                        </td>\r\n                        <td style={{\r\n                          ...td,\r\n                          padding: '16px 12px'\r\n                        }}>\r\n                          <span style={{ \r\n                            background: getActionColor(log.action),\r\n                            color: 'white',\r\n                            borderRadius: '20px', \r\n                            padding: \"6px 12px\",\r\n                            fontSize: '12px',\r\n                            fontWeight: '600',\r\n                            textTransform: 'uppercase',\r\n                            letterSpacing: '0.5px',\r\n                            display: 'inline-block',\r\n                            minWidth: '80px',\r\n                            textAlign: 'center'\r\n                          }}>\r\n                            {log.action}\r\n                          </span>\r\n                        </td>\r\n                        <td style={{\r\n                          ...td,\r\n                          padding: '16px 12px',\r\n                          fontWeight: '500',\r\n                          color: '#1f2937'\r\n                        }}>\r\n                          {log.performedBy?.name || \"Unknown\"}\r\n                        </td>\r\n                        <td style={{\r\n                          ...td,\r\n                          padding: '16px 12px',\r\n                          color: '#6b7280'\r\n                        }}>\r\n                          {log.performedByRole}\r\n                        </td>\r\n                        <td style={{\r\n                          ...td,\r\n                          padding: '16px 12px',\r\n                          color: '#374151',\r\n                          maxWidth: '300px'\r\n                        }}>\r\n                          <div style={{\r\n                            overflow: 'hidden',\r\n                            textOverflow: 'ellipsis',\r\n                            whiteSpace: 'nowrap'\r\n                          }}>\r\n                            {log.description}\r\n                          </div>\r\n                        </td>\r\n                        <td style={{\r\n                          ...td,\r\n                          padding: '16px 12px'\r\n                        }}>\r\n                          <button onClick={() => toggleRow(log._id || i)}\r\n                            style={{\r\n                              cursor: 'pointer',\r\n                              color: '#3b82f6',\r\n                              fontWeight: 500,\r\n                              fontSize: 13,\r\n                              padding: '6px 12px',\r\n                              borderRadius: 6,\r\n                              backgroundColor: expandedRow === (log._id || i) ? '#dbeafe' : '#eff6ff',\r\n                              border: '1px solid #dbeafe',\r\n                              transition: 'all .2s ease'\r\n                            }}\r\n                            onMouseEnter={(e) => {\r\n                              e.currentTarget.style.backgroundColor = '#dbeafe';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                              if (expandedRow !== (log._id || i)) e.currentTarget.style.backgroundColor = '#eff6ff';\r\n                            }}\r\n                          >\r\n                            {expandedRow === (log._id || i) ? 'Hide' : 'View'} Details\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                      {expandedRow === (log._id || i) && (\r\n                        <tr style={{ background: '#f8fafc' }}>\r\n                          <td colSpan={6} style={{ padding: '20px 24px', borderTop: '1px solid #f1f5f9', borderBottom: '1px solid #f3f4f6' }}>\r\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: 16 }}>\r\n                              {renderMeta(log)}\r\n                              <div style={{ fontSize: 11, color: '#64748b' }}>\r\n                                Log ID: {log._id} | Source: {log.source || 'N/A'}\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      )}\r\n                    </React.Fragment>\r\n                  ); })\r\n                )}\r\n              </tbody>\r\n            </table>\r\n            {/* Pagination Controls */}\r\n            {totalFiltered > 0 && (\r\n              <div style={{\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n                gap: 12,\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                padding: '16px 20px',\r\n                borderTop: '1px solid #e5e7eb',\r\n                background: '#fff'\r\n              }}>\r\n                <div style={{ display:'flex', flexDirection:'column', gap:6, fontSize: 13, color: '#475569' }}>\r\n                  <span>Showing {(currentPage - 1) * pageSize + 1}-{Math.min(currentPage * pageSize, totalFiltered)} of {totalFiltered} logs</span>\r\n                  <div style={{ display:'flex', gap:10, flexWrap:'wrap', alignItems:'center' }}>\r\n                    <label style={{ display:'flex', alignItems:'center', gap:6 }}>\r\n                      <span style={{ color:'#64748b' }}>Per page:</span>\r\n                      <select\r\n                        value={pageSize}\r\n                        onChange={e=>{ const v=parseInt(e.target.value,10); setPageSize(v); setPage(1); }}\r\n                        style={{ padding:'4px 8px', border:'1px solid #d1d5db', borderRadius:4, fontSize:12 }}\r\n                      >\r\n                        {[30,50,100].map(sz=> <option key={sz} value={sz}>{sz}</option>)}\r\n                      </select>\r\n                    </label>\r\n                    <form onSubmit={e=>{ e.preventDefault(); const val=parseInt(jumpPage,10); if(isFinite(val) && val>=1 && val<=totalPages) setPage(val); }} style={{ display:'flex', alignItems:'center', gap:6 }}>\r\n                      <label style={{ display:'flex', alignItems:'center', gap:4 }}>\r\n                        <span style={{ color:'#64748b' }}>Jump to:</span>\r\n                        <input\r\n                          value={jumpPage}\r\n                          onChange={e=> setJumpPage(e.target.value.replace(/[^0-9]/g,''))}\r\n                          placeholder=\"#\"\r\n                          style={{ width:60, padding:'4px 6px', border:'1px solid #d1d5db', borderRadius:4, fontSize:12 }}\r\n                        />\r\n                      </label>\r\n                      <button type=\"submit\" style={paginationBtnStyle(false,false)}>Go</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: 6, alignItems:'center', flexWrap:'wrap', justifyContent:'flex-end' }}>\r\n                  <button\r\n                    onClick={() => setPage(p => Math.max(1, p - 1))}\r\n                    disabled={currentPage === 1}\r\n                    style={paginationBtnStyle(currentPage === 1)}\r\n                  >Prev</button>\r\n                  {Array.from({ length: totalPages }).map((_, idx) => {\r\n                    const pageNum = idx + 1;\r\n                    // Only show first, last, current, neighbors\r\n                    const show = pageNum === 1 || pageNum === totalPages || Math.abs(pageNum - currentPage) <= 1;\r\n                    if (!show) {\r\n                      if (pageNum === 2 && currentPage > 3) return <span key=\"start-ellipsis\" style={ellipsisStyle}>…</span>;\r\n                      if (pageNum === totalPages - 1 && currentPage < totalPages - 2) return <span key=\"end-ellipsis\" style={ellipsisStyle}>…</span>;\r\n                      return null;\r\n                    }\r\n                    return (\r\n                      <button\r\n                        key={pageNum}\r\n                        onClick={() => setPage(pageNum)}\r\n                        style={paginationBtnStyle(false, pageNum === currentPage)}\r\n                        aria-current={pageNum === currentPage ? 'page' : undefined}\r\n                      >{pageNum}</button>\r\n                    );\r\n                  })}\r\n                  <button\r\n                    onClick={() => setPage(p => Math.min(totalPages, p + 1))}\r\n                    disabled={currentPage === totalPages}\r\n                    style={paginationBtnStyle(currentPage === totalPages)}\r\n                  >Next</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n          </div>\r\n        </main>\r\n\r\n        {/* Export Modal */}\r\n        {exportModalOpen && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 1000\r\n          }} onClick={() => setExportModalOpen(false)}>\r\n            <div style={{\r\n              backgroundColor: 'white',\r\n              borderRadius: '12px',\r\n              padding: '24px',\r\n              maxWidth: '400px',\r\n              width: '90%',\r\n              boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)'\r\n            }} onClick={(e) => e.stopPropagation()}>\r\n              <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                marginBottom: '20px'\r\n              }}>\r\n                <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '600', color: '#1f2937' }}>\r\n                  Export to PDF\r\n                </h3>\r\n                <button\r\n                  onClick={() => setExportModalOpen(false)}\r\n                  style={{\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    fontSize: '20px',\r\n                    cursor: 'pointer',\r\n                    color: '#9ca3af',\r\n                    padding: '4px'\r\n                  }}\r\n                >\r\n                  ×\r\n                </button>\r\n              </div>\r\n              \r\n              <div style={{ marginBottom: '24px' }}>\r\n                <p style={{ margin: '0 0 16px 0', color: '#6b7280', fontSize: '14px' }}>\r\n                  Export the filtered audit logs to PDF format with company branding.\r\n                </p>\r\n                <div style={{\r\n                  padding: '16px',\r\n                  backgroundColor: '#f8fafc',\r\n                  borderRadius: '8px',\r\n                  border: '1px solid #e2e8f0'\r\n                }}>\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                    <span style={{ fontSize: '14px', color: '#374151' }}>Total Records:</span>\r\n                    <span style={{ fontSize: '14px', fontWeight: '600', color: '#1f2937' }}>\r\n                      {filteredLogs.length}\r\n                    </span>\r\n                  </div>\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                    <span style={{ fontSize: '14px', color: '#374151' }}>Format:</span>\r\n                    <span style={{ fontSize: '14px', fontWeight: '600', color: '#1f2937' }}>PDF</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div style={{\r\n                display: 'flex',\r\n                gap: '12px',\r\n                justifyContent: 'flex-end'\r\n              }}>\r\n                <button\r\n                  onClick={() => setExportModalOpen(false)}\r\n                  style={{\r\n                    padding: '10px 16px',\r\n                    backgroundColor: '#f3f4f6',\r\n                    color: '#374151',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '8px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.2s ease'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.target.style.backgroundColor = '#e5e7eb';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.target.style.backgroundColor = '#f3f4f6';\r\n                  }}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleExport}\r\n                  disabled={exportLoading || filteredLogs.length === 0}\r\n                  style={{\r\n                    padding: '10px 16px',\r\n                    backgroundColor: filteredLogs.length === 0 ? '#9ca3af' : '#3b82f6',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '8px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    cursor: filteredLogs.length === 0 ? 'not-allowed' : 'pointer',\r\n                    transition: 'all 0.2s ease',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '8px'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    if (filteredLogs.length > 0) {\r\n                      e.target.style.backgroundColor = '#2563eb';\r\n                    }\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    if (filteredLogs.length > 0) {\r\n                      e.target.style.backgroundColor = '#3b82f6';\r\n                    }\r\n                  }}\r\n                >\r\n                  {exportLoading ? (\r\n                    <>\r\n                      <div style={{\r\n                        width: '16px',\r\n                        height: '16px',\r\n                        border: '2px solid #ffffff',\r\n                        borderTop: '2px solid transparent',\r\n                        borderRadius: '50%',\r\n                        animation: 'spin 1s linear infinite'\r\n                      }}></div>\r\n                      Exporting...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <FaDownload />\r\n                      Export {filteredLogs.length} Records to PDF\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\nconst th = {\r\n  textAlign: \"left\",\r\n  padding: \"10px 8px\",\r\n  fontWeight: 600,\r\n  borderBottom: \"2px solid #eee\",\r\n};\r\nconst td = {\r\n  padding: \"8px 8px\",\r\n  borderBottom: \"1px solid #eee\",\r\n};\r\nconst metaTh = {\r\n  textAlign: 'left',\r\n  padding: '6px 8px',\r\n  fontWeight: 600,\r\n  fontSize: 12,\r\n  borderBottom: '1px solid #e2e8f0',\r\n  color: '#334155'\r\n};\r\nconst metaTd = {\r\n  padding: '6px 8px',\r\n  borderBottom: '1px solid #f1f5f9',\r\n  fontSize: 12,\r\n  verticalAlign: 'top',\r\n  fontFamily: 'system-ui, sans-serif'\r\n};\r\n\r\nexport default ItAuditLog;\r\n\r\n// Add CSS for loading animation\r\nconst style = document.createElement('style');\r\nstyle.textContent = `\r\n  @keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n  }\r\n`;\r\ndocument.head.appendChild(style);\r\n","import jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\n/* ---------- utility functions ---------- */\r\nfunction loadImageDataURLWithSize(url) {\r\n  return new Promise((resolve) => {\r\n    if (!url) return resolve(null);\r\n    try {\r\n      const img = new Image();\r\n      img.crossOrigin = 'anonymous';\r\n      img.onload = () => {\r\n        const c = document.createElement('canvas');\r\n        c.width = img.naturalWidth;\r\n        c.height = img.naturalHeight;\r\n        c.getContext('2d').drawImage(img, 0, 0);\r\n        resolve({ dataUrl: c.toDataURL('image/png'), w: img.naturalWidth, h: img.naturalHeight });\r\n      };\r\n      img.onerror = () => resolve(null);\r\n      img.src = url;\r\n    } catch {\r\n      resolve(null);\r\n    }\r\n  });\r\n}\r\n\r\nfunction loadFontFromPublic(doc, fontFile, family, style) {\r\n  return new Promise((resolve) => {\r\n    try {\r\n      const fontPath = `${process.env.PUBLIC_URL || ''}/fonts/${fontFile}`;\r\n      fetch(fontPath)\r\n        .then((r) => r.arrayBuffer())\r\n        .then((buf) => {\r\n          try {\r\n            doc.addFileToVFS(fontFile, buf);\r\n            doc.addFont(fontFile, family, style);\r\n            resolve(true);\r\n          } catch {\r\n            resolve(false);\r\n          }\r\n        })\r\n        .catch(() => resolve(false));\r\n    } catch {\r\n      resolve(false);\r\n    }\r\n  });\r\n}\r\n\r\nfunction fontUsable(doc, family, style) {\r\n  try {\r\n    const fonts = doc.getFontList();\r\n    return fonts && fonts[family] && fonts[family][style];\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction fitInside(w, h, maxW, maxH) {\r\n  if (!w || !h) return { w: maxW, h: maxH };\r\n  const r = Math.min(maxW / w, maxH / h, 1);\r\n  return { w: w * r, h: h * r };\r\n}\r\n\r\nfunction formatDateTime(date) {\r\n  if (!date) return 'N/A';\r\n  const dt = new Date(date);\r\n  return Number.isNaN(dt.getTime()) ? 'N/A' : dt.toLocaleString();\r\n}\r\n\r\nfunction buildFileName(prefix = 'Manpower-Requests-Export') {\r\n  const d = new Date();\r\n  const name = `_${pad(d.getHours())}${pad(d.getMinutes())}`;\r\n  return `${prefix}-${name}.pdf`;\r\n}\r\n\r\nfunction pad(n) {\r\n  return String(n).padStart(2, '0');\r\n}\r\n\r\nfunction buildFiltersSummary(filters) {\r\n  const parts = [];\r\n  if (filters.status && filters.status !== 'all') parts.push(`Status: ${filters.status}`);\r\n  if (filters.search) parts.push(`Search: \"${filters.search}\"`);\r\n  if (filters.dateFrom) parts.push(`From: ${filters.dateFrom}`);\r\n  if (filters.dateTo) parts.push(`To: ${filters.dateTo}`);\r\n  return parts.length ? parts.join(', ') : null;\r\n}\r\n\r\nfunction computeStatusLabel(req) {\r\n  if (req.status === 'Approved') return 'Approved';\r\n  if (req.status === 'Pending') return 'Pending';\r\n  if (req.status === 'Rejected') return 'Rejected';\r\n  if (req.status === 'Completed') return 'Completed';\r\n  if (req.status === 'In Progress') return 'In Progress';\r\n  return 'Unknown';\r\n}\r\n\r\nexport async function exportManpowerRequestsPdf(rows = [], options = {}) {\r\n  const {\r\n    companyName = 'FadzTrack',\r\n    logoPath = `${process.env.PUBLIC_URL || ''}/images/Fadz-logo.png`,\r\n    exporterName = 'Unknown',\r\n    exporterRole = '',\r\n    filters = {},\r\n    reportTitle = 'Manpower Requests Export',\r\n  } = options;\r\n\r\n  const doc = new jsPDF({ unit: 'pt', format: 'a4' });\r\n\r\n  // Fonts\r\n  const FAMILY = 'NotoSans';\r\n  const regOk = await loadFontFromPublic(doc, 'NotoSans-Regular.ttf', FAMILY, 'normal');\r\n  const boldOk = await loadFontFromPublic(doc, 'NotoSans-Bold.ttf', FAMILY, 'bold');\r\n  const canUseRegular = regOk && fontUsable(doc, FAMILY, 'normal');\r\n  const canUseBold = boldOk && fontUsable(doc, FAMILY, 'bold');\r\n  const bodyFont = canUseRegular ? FAMILY : 'helvetica';\r\n  const headStyle = canUseBold ? 'bold' : 'normal';\r\n\r\n  const marginX = 40;\r\n  let y = 40;\r\n\r\n  // Header: logo + company name + context\r\n  const logo = await loadImageDataURLWithSize(logoPath);\r\n  let titleX = marginX;\r\n  if (logo?.dataUrl) {\r\n    const { w: drawW, h: drawH } = fitInside(logo.w, logo.h, 180, 60); // increased size\r\n    doc.addImage(logo.dataUrl, 'PNG', marginX, y - 12, drawW, drawH, undefined, 'FAST');\r\n    titleX = marginX + drawW + 16; // more spacing\r\n  }\r\n\r\n  doc.setFont(bodyFont, headStyle);\r\n  doc.setFontSize(20); // increased font size\r\n  doc.setTextColor(20);\r\n  doc.text(String(companyName), titleX, y + 16);\r\n\r\n  doc.setFont(bodyFont, 'normal');\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(90);\r\n  doc.text(reportTitle, titleX, y + 26);\r\n\r\n  // Divider\r\n  doc.setDrawColor(220);\r\n  doc.setLineWidth(1);\r\n  doc.line(marginX, y + 38, 595 - marginX, y + 38);\r\n  y += 54;\r\n\r\n  // Metadata block\r\n  doc.setFont(bodyFont, headStyle);\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(20);\r\n  doc.text('Export Details', marginX, y);\r\n\r\n  doc.setFont(bodyFont, 'normal');\r\n  doc.setTextColor(60);\r\n  const meta = [\r\n    `Exported by: ${exporterName}${exporterRole ? ` (${exporterRole})` : ''}`,\r\n    `Date exported: ${formatDateTime(new Date())}`,\r\n  ];\r\n  const filterSummary = buildFiltersSummary(filters);\r\n  if (filterSummary) meta.push(`Filters: ${filterSummary}`);\r\n\r\n  let metaY = y + 16;\r\n  meta.forEach((line) => {\r\n    doc.text(line, marginX, metaY);\r\n    metaY += 16;\r\n  });\r\n\r\n  // Table\r\n  const tableStartY = metaY + 6;\r\n  const head = [['Date', 'Requester', 'Project', 'Manpower Requested', 'Status', 'Acquisition Date']];\r\n  const body = rows.map((r) => {\r\n    const manpowerList = Array.isArray(r.manpowerRequested)\r\n      ? r.manpowerRequested.map((m) => `${m.name || ''}${m.position ? ` (${m.position})` : ''}`).join(', ')\r\n      : '';\r\n    return [\r\n      r.createdAt ? new Date(r.createdAt).toLocaleDateString() : '',\r\n      String(r.createdBy?.name || ''),\r\n      String(r.project?.projectName || ''),\r\n      manpowerList,\r\n      computeStatusLabel(r),\r\n      r.acquisitionDate ? new Date(r.acquisitionDate).toLocaleDateString() : '',\r\n    ];\r\n  });\r\n\r\n  autoTable(doc, {\r\n    startY: tableStartY,\r\n    head,\r\n    body,\r\n    styles: { font: bodyFont, fontStyle: 'normal', fontSize: 10, cellPadding: 5, halign: 'left', overflow: 'linebreak' },\r\n    headStyles: { font: bodyFont, fontStyle: headStyle, fillColor: [59, 130, 246], textColor: 255 },\r\n    theme: 'grid',\r\n    margin: { left: marginX, right: marginX },\r\n    columnStyles: { 3: { cellWidth: 180 } }, // Manpower Requested column\r\n    didDrawPage: () => {\r\n      const str = `Generated: ${formatDateTime(new Date())}`;\r\n      doc.setFont(bodyFont, 'normal');\r\n      doc.setFontSize(9);\r\n      doc.setTextColor(120);\r\n      doc.text(str, marginX, 842 - 24);\r\n\r\n      const page = doc.getCurrentPageInfo().pageNumber || 1;\r\n      const pages = doc.getNumberOfPages();\r\n      const label = `Page ${page} of ${pages}`;\r\n      const w = doc.getTextWidth(label);\r\n      doc.text(label, 595 - marginX - w, 842 - 24);\r\n    },\r\n  });\r\n\r\n  doc.save(buildFileName());\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, useLocation, Link } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport { FaPlus, FaTrash, FaSave, FaTimes, FaEdit } from 'react-icons/fa';\r\nimport AppHeader from '../layout/AppHeader';\r\n\r\nconst inputStyle = { width:'100%', padding:'10px 12px', border:'1px solid #d1d5db', borderRadius:6, fontSize:14 };\r\nconst pill = (bg, color='#111827') => ({ background:bg, color, padding:'4px 10px', borderRadius:20, fontSize:12, fontWeight:600, display:'inline-flex', alignItems:'center', gap:6 });\r\n\r\nconst ItManpowerRequestDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const user = JSON.parse(localStorage.getItem('user') || 'null');\r\n  const token = localStorage.getItem('token');\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [request, setRequest] = useState(null);\r\n  const [editMode, setEditMode] = useState(() => new URLSearchParams(location.search).get('edit') === '1');\r\n  // Unified header handles profile menu\r\n\r\n  const [formData, setFormData] = useState({\r\n    acquisitionDate:'', duration:'', project:'', projectName:'', manpowers:[{ type:'', quantity:'' }], description:''\r\n  });\r\n\r\n  // Fetch request\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const { data } = await api.get(`/manpower-requests/${id}`, { headers:{ Authorization:`Bearer ${token}` }});\r\n        setRequest(data);\r\n        setFormData({\r\n          acquisitionDate: data.acquisitionDate ? data.acquisitionDate.split('T')[0] : '',\r\n          duration: data.duration || '',\r\n          project: data.project?._id || data.project || '', // keep ID for updates\r\n          projectName: (typeof data.project === 'object' && data.project?.projectName) ? data.project.projectName : data.projectName || '',\r\n          manpowers: data.manpowers?.length ? data.manpowers.map(m => ({ type:m.type || '', quantity:m.quantity || '' })) : [{ type:'', quantity:'' }],\r\n          description: data.description || ''\r\n        });\r\n      } catch (e) {\r\n        console.error(e); setError('Failed to load request');\r\n      } finally { setLoading(false); }\r\n    };\r\n    fetchData();\r\n  }, [id, token]);\r\n\r\n  // Removed legacy profile dropdown listener\r\n\r\n  const handleLogout = () => {\r\n    api.post('/auth/logout', {}, { headers:{ Authorization:`Bearer ${token}` }}).finally(() => {\r\n      localStorage.removeItem('token'); localStorage.removeItem('user'); navigate('/');\r\n    });\r\n  };\r\n\r\n  const setField = (name, value) => setFormData(prev => ({ ...prev, [name]: value }));\r\n  const updateManpowerRow = (i, field, value) => setFormData(prev => ({ ...prev, manpowers: prev.manpowers.map((r,idx)=> idx===i ? { ...r, [field]: value } : r) }));\r\n  const addRow = () => setFormData(prev => ({ ...prev, manpowers:[...prev.manpowers, { type:'', quantity:'' }] }));\r\n  const removeRow = (i) => setFormData(prev => ({ ...prev, manpowers: prev.manpowers.filter((_,idx)=>idx!==i) }));\r\n\r\n  const validate = () => {\r\n    if (!formData.acquisitionDate || !formData.duration || !formData.project || !formData.description) return 'All fields are required';\r\n    if (!formData.manpowers.length) return 'At least one manpower row';\r\n    if (formData.manpowers.some(m => !m.type.trim() || !m.quantity || isNaN(Number(m.quantity)) || Number(m.quantity) <= 0)) return 'Fix manpower rows';\r\n    return '';\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const v = validate(); if (v) { alert(v); return; }\r\n    setSaving(true);\r\n    try {\r\n      const body = {\r\n        acquisitionDate: formData.acquisitionDate,\r\n        duration: Number(formData.duration),\r\n        project: formData.project,\r\n        description: formData.description,\r\n        manpowers: formData.manpowers.map(m => ({ type: m.type.trim(), quantity: Number(m.quantity) }))\r\n      };\r\n      const res = await api.put(`/manpower-requests/${id}`, body, { headers:{ Authorization:`Bearer ${token}` }});\r\n      if (res.status === 200) {\r\n        alert('✅ Updated');\r\n        setRequest(res.data.data || res.data); // controller returns { message, data }\r\n        setEditMode(false);\r\n      } else {\r\n        alert(res.data?.message || 'Update failed');\r\n      }\r\n    } catch (e) {\r\n      console.error(e); alert('Server error');\r\n    } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!window.confirm('Delete this manpower request? This cannot be undone.')) return;\r\n    setDeleting(true);\r\n    try {\r\n      await api.delete(`/manpower-requests/${id}`, { headers:{ Authorization:`Bearer ${token}` }});\r\n      alert('🗑️ Deleted');\r\n      navigate('/it/manpower-list');\r\n    } catch (e) {\r\n      alert('Delete failed');\r\n    } finally { setDeleting(false); }\r\n  };\r\n\r\n  const statusColors = {\r\n    Pending: pill('#fef3c7', '#92400e'),\r\n    Approved: pill('#dcfce7', '#065f46'),\r\n    Overdue: pill('#fee2e2', '#991b1b'),\r\n    Completed: pill('#e0f2fe', '#075985')\r\n  };\r\n\r\n  if (loading) return <div className=\"dashboard-container\"><div className=\"loading-spinner\" />Loading...</div>;\r\n  if (error || !request) return <div style={{ color:'red', padding:24 }}>{error || 'Request not found'}</div>;\r\n\r\n  // IT can edit anything except Rejected (if that status exists)\r\n  const nonEditableStatuses = ['Rejected'];\r\n  const editable = !nonEditableStatuses.includes(request.status);\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <AppHeader roleSegment=\"it\" onLogout={handleLogout} />\r\n\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"form-container\" style={{ maxWidth:900, margin:'40px auto', background:'#fff', borderRadius:16, padding:'32px 40px', boxShadow:'0 4px 16px rgba(0,0,0,0.06)' }}>\r\n          <div style={{ display:'flex', justifyContent:'space-between', alignItems:'flex-start', flexWrap:'wrap', gap:24 }}>\r\n            <div>\r\n              <h2 style={{ margin:0, fontSize:30, fontWeight:700 }}>Manpower Request</h2>\r\n              <div style={{ marginTop:8, fontSize:14, color:'#4b5563' }}>\r\n                Project: <strong>{request.project?.projectName || 'N/A'}</strong> &nbsp;•&nbsp; Requested by {request.createdBy?.name}\r\n              </div>\r\n              <div style={{ marginTop:12 }}>{/* status badge */}\r\n                <span style={statusColors[request.status] || pill('#e5e7eb')}>{request.status}</span>\r\n              </div>\r\n            </div>\r\n            <div style={{ display:'flex', gap:12, flexWrap:'wrap' }}>\r\n              <button onClick={()=>navigate(-1)} style={btn('secondary')}>Back</button>\r\n              {editable && !editMode && (\r\n                <button onClick={()=>setEditMode(true)} style={btn('primary')}><FaEdit/> Edit</button>\r\n              )}\r\n              {editMode && (\r\n                <>\r\n                  <button disabled={saving} onClick={handleSave} style={btn('primary')}><FaSave/>{saving? ' Saving...' : ' Save'}</button>\r\n                  <button disabled={saving} onClick={()=>{ setEditMode(false); /* reset form to original */ setFormData({\r\n                    acquisitionDate: request.acquisitionDate ? request.acquisitionDate.split('T')[0] : '',\r\n                    duration: request.duration || '',\r\n                    project: request.project?._id || request.project || '',\r\n                    projectName: request.project?.projectName || '',\r\n                    manpowers: request.manpowers?.length ? request.manpowers.map(m => ({ type:m.type||'', quantity:m.quantity||'' })) : [{ type:'', quantity:'' }],\r\n                    description: request.description || ''\r\n                  }); }} style={btn('neutral')}><FaTimes/> Cancel</button>\r\n                </>\r\n              )}\r\n              <button disabled={deleting} onClick={handleDelete} style={btn('danger')}>{deleting? 'Deleting...' : 'Delete'}</button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content Sections */}\r\n          <div style={{ marginTop:32, display:'grid', gap:32, gridTemplateColumns:'repeat(auto-fit,minmax(260px,1fr))' }}>\r\n            <div>\r\n              <label style={labelStyle}>Target Acquisition Date</label>\r\n              {editMode && editable ? (\r\n                <input type=\"date\" value={formData.acquisitionDate} onChange={e=>setField('acquisitionDate', e.target.value)} style={inputStyle} />\r\n              ) : (\r\n                <div style={valueBox}>{request.acquisitionDate ? new Date(request.acquisitionDate).toLocaleDateString() : '—'}</div>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <label style={labelStyle}>Duration (days)</label>\r\n              {editMode && editable ? (\r\n                <input type=\"number\" min={1} value={formData.duration} onChange={e=>setField('duration', e.target.value)} style={inputStyle} />\r\n              ) : (\r\n                <div style={valueBox}>{request.duration} days</div>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <label style={labelStyle}>Project</label>\r\n              <div style={{ ...valueBox, background:'#f3f4f6' }}>{formData.projectName || request.project?.projectName || '—'}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginTop:40 }}>\r\n            <label style={labelStyle}>Manpower Needed</label>\r\n            {editMode && editable ? (\r\n              <div style={{ border:'1px solid #e5e7eb', borderRadius:12, padding:16, background:'#f9fafb' }}>\r\n                {formData.manpowers.map((row,i)=>(\r\n                  <div key={i} style={{ display:'flex', gap:12, alignItems:'center', marginBottom:8 }}>\r\n                    <input placeholder=\"Type\" value={row.type} onChange={e=>updateManpowerRow(i,'type', e.target.value)} style={{ ...inputStyle, flex:2 }} />\r\n                    <input type=\"number\" min={1} placeholder=\"Qty\" value={row.quantity} onChange={e=>updateManpowerRow(i,'quantity', e.target.value)} style={{ ...inputStyle, width:120 }} />\r\n                    {formData.manpowers.length > 1 && (\r\n                      <button type=\"button\" onClick={()=>removeRow(i)} style={iconBtn('#dc2626')}><FaTrash/></button>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n                <button type=\"button\" onClick={addRow} style={addRowBtn}><FaPlus/> Add Row</button>\r\n              </div>\r\n            ) : (\r\n              <div style={{ display:'flex', flexWrap:'wrap', gap:12 }}>\r\n                {request.manpowers?.length ? request.manpowers.map((m,i)=>(\r\n                  <span key={i} style={pill('#eef2ff', '#3730a3')}>{m.quantity} {m.type}</span>\r\n                )) : <span style={{ color:'#6b7280' }}>No manpower entries</span>}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n            <div style={{ marginTop:40 }}>\r\n              <label style={labelStyle}>Description / Purpose</label>\r\n              {editMode && editable ? (\r\n                <textarea value={formData.description} onChange={e=>setField('description', e.target.value)} style={{ ...inputStyle, minHeight:140, resize:'vertical' }} />\r\n              ) : (\r\n                <div style={{ ...valueBox, minHeight:80 }}>{request.description}</div>\r\n              )}\r\n            </div>\r\n\r\n          {!editable && (\r\n            <div style={{ marginTop:32, padding:'12px 16px', background:'#fff7ed', border:'1px solid #fed7aa', borderRadius:12, fontSize:14, color:'#92400e' }}>\r\n              This request is <strong>{request.status}</strong> and cannot be edited by IT.\r\n            </div>\r\n          )}\r\n\r\n          <AuditTrail requestId={request._id} />\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst labelStyle = { display:'block', fontWeight:600, marginBottom:6, fontSize:13, letterSpacing:'.25px', color:'#374151' };\r\nconst valueBox = { padding:'12px 14px', border:'1px solid #e5e7eb', borderRadius:8, background:'#fff', fontSize:14, minHeight:44, display:'flex', alignItems:'center' };\r\nconst iconBtn = (bg) => ({ background:bg, color:'#fff', border:'none', padding:'10px 12px', borderRadius:8, cursor:'pointer', display:'flex', alignItems:'center', justifyContent:'center' });\r\nconst addRowBtn = { marginTop:8, display:'inline-flex', alignItems:'center', gap:8, background:'#1d4ed8', color:'#fff', border:'none', borderRadius:8, padding:'10px 16px', cursor:'pointer', fontWeight:600, fontSize:14 };\r\nconst btn = (variant) => {\r\n  const base = { display:'inline-flex', alignItems:'center', gap:8, padding:'10px 18px', fontSize:14, fontWeight:600, borderRadius:8, border:'none', cursor:'pointer' };\r\n  switch(variant){\r\n    case 'primary': return { ...base, background:'#2563eb', color:'#fff' };\r\n    case 'danger': return { ...base, background:'#dc2626', color:'#fff' };\r\n    case 'neutral': return { ...base, background:'#6b7280', color:'#fff' };\r\n    default: return { ...base, background:'#e5e7eb', color:'#111827' };\r\n  }\r\n};\r\n\r\n// Audit trail component (inline fetch)\r\nconst AuditTrail = ({ requestId }) => {\r\n  const [logs, setLogs] = React.useState([]);\r\n  const [open, setOpen] = React.useState(false);\r\n  const token = localStorage.getItem('token');\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const fetchLogs = async () => {\r\n      try {\r\n        const { data } = await api.get('/audit-logs', { headers:{ Authorization:`Bearer ${token}` } });\r\n        // Filter to those referencing this request\r\n        const filtered = data.filter(l => l.meta?.requestId === requestId);\r\n        setLogs(filtered);\r\n      } catch(e){ console.error('Audit fetch failed', e); }\r\n    };\r\n    fetchLogs();\r\n  }, [open, requestId, token]);\r\n\r\n  return (\r\n    <div style={{ marginTop:48 }}>\r\n      <button onClick={()=>setOpen(o=>!o)} style={{ ...btn('neutral'), background:'#f3f4f6', color:'#111827' }}>{open? 'Hide' : 'Show'} Audit Log</button>\r\n      {open && (\r\n        <div style={{ marginTop:16, maxHeight:260, overflowY:'auto', border:'1px solid #e5e7eb', borderRadius:12, padding:16, background:'#fafafa' }}>\r\n          {logs.length === 0 && <div style={{ fontSize:13, color:'#6b7280' }}>No audit entries for this request.</div>}\r\n          {logs.map(l => (\r\n            <div key={l._id || l.timestamp} style={{ padding:'10px 12px', borderBottom:'1px solid #e5e7eb', fontSize:13, lineHeight:1.4 }}>\r\n              <div style={{ fontWeight:600 }}>{l.action}</div>\r\n              <div style={{ color:'#374151' }}>{l.description}</div>\r\n              <div style={{ color:'#6b7280', fontSize:12, marginTop:4 }}>{new Date(l.timestamp).toLocaleString()} • {l.performedBy?.name} ({l.performedByRole})</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItManpowerRequestDetail;\r\n","import ProjectView from '../project/ProjectView';\r\nimport { FaTachometerAlt, FaComments, FaProjectDiagram, FaClipboardList } from 'react-icons/fa';\r\nimport AppHeader from '../layout/AppHeader';\r\n\r\n// IT role wrapper pointing to the reusable ProjectView component\r\nconst ItViewProject = () => {\r\n  const overrides = {\r\n    dashboard: '/it',\r\n    projects: '/it/projects',\r\n    chat: '/it/chat',\r\n    materials: '/it/material-list',\r\n    manpower: '/it/manpower-list',\r\n    audit: '/it/auditlogs'\r\n  };\r\n\r\n  // Use unified header; let ProjectView build default nav with useUnifiedHeader flag\r\n  return <ProjectView role=\"it\" useUnifiedHeader={true} navPathOverrides={overrides} customHeader={<AppHeader roleSegment=\"it\" />} />;\r\n};\r\n\r\nexport default ItViewProject;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport '../style/it_style/ItMaterialRequestDetail.css';\r\n// Nav icons\r\nimport { FaTachometerAlt, FaComments, FaBoxes, FaUsers, FaClipboardList, FaArrowLeft, FaInfoCircle, FaUser, FaBoxes as FaMaterials, FaPaperclip, FaTruck, FaCheck, FaClock, FaDownload, FaCalendarAlt, FaMapMarkerAlt, FaPlus, FaTrash, FaSave } from 'react-icons/fa';\r\n\r\nconst ItMaterialRequestEdit = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [materialRequest, setMaterialRequest] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [profileMenuOpen, setProfileMenuOpen] = useState(false);\r\n  const [isHeaderCollapsed, setIsHeaderCollapsed] = useState(false);\r\n  const profileDropdownRef = useRef(null);\r\n  \r\n  const [user, setUser] = useState(() => {\r\n    const stored = localStorage.getItem('user');\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState({\r\n    description: '',\r\n    materials: [{ id: 1, materialName: '', quantity: '', unit: '' }],\r\n    attachments: []\r\n  });\r\n\r\n  // File handling\r\n  const [uploadedFiles, setUploadedFiles] = useState([]);\r\n  const [previewImages, setPreviewImages] = useState([]);\r\n  const [newFiles, setNewFiles] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Fetch the material request data\r\n    api.get(`/requests/${id}`)\r\n      .then(res => {\r\n        console.log('Material Request Data for Edit:', res.data);\r\n        const data = res.data;\r\n        setMaterialRequest(data);\r\n        \r\n        // Initialize form data\r\n        setFormData({\r\n          description: data.description || '',\r\n          materials: data.materials && data.materials.length > 0 \r\n            ? data.materials.map((mat, idx) => ({\r\n                id: mat.id || Date.now() + idx,\r\n                materialName: mat.materialName || '',\r\n                quantity: mat.quantity || '',\r\n                unit: mat.unit || ''\r\n              }))\r\n            : [{ id: 1, materialName: '', quantity: '', unit: '' }],\r\n          attachments: data.attachments || []\r\n        });\r\n        \r\n        setError('');\r\n      })\r\n      .catch((err) => {\r\n        console.error('Error fetching request:', err);\r\n        setError('Failed to load request details.');\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (profileDropdownRef.current && !profileDropdownRef.current.contains(event.target)) {\r\n        setProfileMenuOpen(false);\r\n      }\r\n    };\r\n    const handleScroll = () => {\r\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n      setIsHeaderCollapsed(scrollTop > 50);\r\n    };\r\n    document.addEventListener('click', handleClickOutside);\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => { \r\n      document.removeEventListener('click', handleClickOutside); \r\n      window.removeEventListener('scroll', handleScroll); \r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    return () => previewImages.forEach(url => URL.revokeObjectURL(url));\r\n  }, [previewImages.length]);\r\n\r\n  const handleLogout = () => {\r\n    const token = localStorage.getItem('token');\r\n    api.post('/auth/logout', {}, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    }).finally(() => {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      navigate('/');\r\n    });\r\n  };\r\n\r\n  const handleBack = () => navigate(`/it/material-request/${id}`);\r\n  const handleCancel = () => navigate(`/it/material-request/${id}`);\r\n\r\n  // Form handlers\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleMaterialChange = (id, field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      materials: prev.materials.map(m => {\r\n        if (m.id === id) {\r\n          if (field === 'quantity') {\r\n            // Allow only numbers for quantity\r\n            let filtered = value.replace(/\\D/g, '').slice(0, 7);\r\n            return { ...m, [field]: filtered };\r\n          }\r\n          return { ...m, [field]: value };\r\n        }\r\n        return m;\r\n      })\r\n    }));\r\n  };\r\n\r\n  const addMaterial = () => {\r\n    const newId = formData.materials.length ? Math.max(...formData.materials.map(m => m.id)) + 1 : 1;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      materials: [...prev.materials, { id: newId, materialName: '', quantity: '', unit: '' }]\r\n    }));\r\n  };\r\n\r\n  const removeMaterial = (id) => {\r\n    if (formData.materials.length > 1) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        materials: prev.materials.filter(m => m.id !== id)\r\n      }));\r\n    }\r\n  };\r\n\r\n  // File handling\r\n  const handleFileUpload = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    setNewFiles(prev => [...prev, ...files]);\r\n    const previews = files.map(file => URL.createObjectURL(file));\r\n    setPreviewImages(prev => [...prev, ...previews]);\r\n  };\r\n\r\n  const removeFile = (index) => {\r\n    setNewFiles(prev => prev.filter((_, i) => i !== index));\r\n    setPreviewImages(prev => {\r\n      URL.revokeObjectURL(prev[index]);\r\n      return prev.filter((_, i) => i !== index);\r\n    });\r\n  };\r\n\r\n  const removeExistingAttachment = (index) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      attachments: prev.attachments.filter((_, i) => i !== index)\r\n    }));\r\n  };\r\n\r\n  // Form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // Validation\r\n    if (!formData.description.trim()) {\r\n      setError('Description is required');\r\n      return;\r\n    }\r\n\r\n    const validMaterials = formData.materials.filter(m => \r\n      m.materialName.trim() && m.quantity.trim() && m.unit.trim()\r\n    );\r\n\r\n    if (validMaterials.length === 0) {\r\n      setError('At least one material is required');\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    setError('');\r\n\r\n    try {\r\n      // Prepare form data\r\n      const submitData = new FormData();\r\n      submitData.append('description', formData.description);\r\n      submitData.append('materials', JSON.stringify(validMaterials));\r\n      submitData.append('attachments', JSON.stringify(formData.attachments));\r\n\r\n      // Add new files\r\n      newFiles.forEach(file => {\r\n        submitData.append('files', file);\r\n      });\r\n\r\n      // Update the request\r\n      const response = await api.put(`/requests/${id}`, submitData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        }\r\n      });\r\n\r\n      console.log('Request updated successfully:', response.data);\r\n      alert('Material request updated successfully!');\r\n      navigate(`/it/material-request/${id}`);\r\n      \r\n    } catch (err) {\r\n      console.error('Error updating request:', err);\r\n      setError(err.response?.data?.message || 'Failed to update request');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"fadztrack-app-IT\">\r\n        <div className=\"loading-container-IT\">\r\n          <div className=\"loading-spinner-IT\"></div>\r\n          <p>Loading request details...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!materialRequest) {\r\n    return (\r\n      <div className=\"fadztrack-app-IT\">\r\n        <div className=\"error-container-IT\">\r\n          <p>{error || 'Request not found.'}</p>\r\n          <button onClick={handleBack} className=\"back-button-IT\">Go Back</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fadztrack-app-IT\">\r\n      <div className=\"head-IT\">\r\n        <header className={`dashboard-header ${isHeaderCollapsed ? 'collapsed' : ''}`}>\r\n          <div className=\"header-top\">\r\n            <div className=\"logo-section\">\r\n              <img\r\n                src={require('../../assets/images/FadzLogo1.png')}\r\n                alt=\"FadzTrack Logo\"\r\n                className=\"header-logo\"\r\n              />\r\n              <h1 className=\"header-brand\">FadzTrack</h1>\r\n            </div>\r\n\r\n            <div className=\"user-profile\" onClick={() => setProfileMenuOpen(!profileMenuOpen)}>\r\n              <div className=\"profile-avatar\">\r\n                {user?.name ? user.name.charAt(0).toUpperCase() : 'I'}\r\n              </div>\r\n              <div className={`profile-info ${isHeaderCollapsed ? 'hidden' : ''}`}>\r\n                <span className=\"profile-name\">{user?.name || 'User'}</span>\r\n                <span className=\"profile-role\">{user?.role || 'IT Administrator'}</span>\r\n              </div>\r\n              {profileMenuOpen && (\r\n                <div className=\"profile-dropdown\">\r\n                  <button onClick={handleLogout} className=\"logout-btn\">\r\n                    <span>Logout</span>\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"header-bottom\">\r\n            <nav className=\"header-nav\">\r\n              <Link to=\"/it\" className=\"nav-item\">\r\n                <FaTachometerAlt />\r\n                <span className={isHeaderCollapsed ? 'hidden' : ''}>Dashboard</span>\r\n              </Link>\r\n              <Link to=\"/it/chat\" className=\"nav-item\">\r\n                <FaComments />\r\n                <span className={isHeaderCollapsed ? 'hidden' : ''}>Chat</span>\r\n              </Link>\r\n              <Link to=\"/it/material-list\" className=\"nav-item active\">\r\n                <FaBoxes />\r\n                <span className={isHeaderCollapsed ? 'hidden' : ''}>Materials</span>\r\n              </Link>\r\n              <Link to=\"/it/manpower-list\" className=\"nav-item\">\r\n                <FaUsers />\r\n                <span className={isHeaderCollapsed ? 'hidden' : ''}>Manpower</span>\r\n              </Link>\r\n              <Link to=\"/it/auditlogs\" className=\"nav-item\">\r\n                <FaClipboardList />\r\n                <span className={isHeaderCollapsed ? 'hidden' : ''}>Audit Logs</span>\r\n              </Link>\r\n            </nav>\r\n          </div>\r\n        </header>\r\n      </div>\r\n\r\n      <div className=\"main-content-IT no-sidebar-IT\">\r\n        <main className=\"dashboard-content-IT\">\r\n          <div className=\"dashboard-card-IT\">\r\n            <div className=\"welcome-header-IT\">\r\n              <div className=\"header-left-IT\">\r\n                <h2>Edit Material Request</h2>\r\n                <p style={{ fontSize: '14px', color: '#666', marginTop: '4px' }}>\r\n                  Request ID: {materialRequest._id}\r\n                </p>\r\n              </div>\r\n              <div className=\"header-right-IT\">\r\n                <div className=\"action-buttons-header-IT\">\r\n                  <button className=\"back-btn-header-IT\" onClick={handleCancel}>\r\n                    <FaArrowLeft style={{ marginRight: 8 }} />\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {error && (\r\n              <div className=\"error-message-IT\">\r\n                <i className=\"fas fa-exclamation-triangle\"></i>\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"detail-grid-IT\">\r\n                <div className=\"detail-column-IT\">\r\n                  <div className=\"detail-card-IT\">\r\n                    <div className=\"card-header-IT\">\r\n                      <h3><FaInfoCircle /> Request Information</h3>\r\n                    </div>\r\n                    <div className=\"card-content-IT\">\r\n                      <div className=\"info-row-IT\">\r\n                        <span className=\"info-label-IT\">Description:</span>\r\n                        <div className=\"info-value-IT\" style={{ textAlign: 'left', marginLeft: 0 }}>\r\n                          <textarea\r\n                            name=\"description\"\r\n                            value={formData.description}\r\n                            onChange={handleChange}\r\n                            className=\"description-input-IT\"\r\n                            placeholder=\"Enter request description...\"\r\n                            rows=\"4\"\r\n                            required\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"info-row-IT\">\r\n                        <span className=\"info-label-IT\">Project:</span>\r\n                        <span className=\"info-value-IT\">\r\n                          {materialRequest.project?.projectName || 'No project specified'}\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      <div className=\"info-row-IT\">\r\n                        <span className=\"info-label-IT\">Status:</span>\r\n                        <span className=\"info-value-IT\">\r\n                          <span className={`priority-badge-IT priority-${(materialRequest.status || 'pending').toLowerCase().replace(/\\s+/g, '-')}`}>\r\n                            {materialRequest.status || 'Pending'}\r\n                          </span>\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"detail-column-IT\">\r\n                  <div className=\"detail-card-IT\">\r\n                    <div className=\"card-header-IT\">\r\n                      <h3><FaMaterials /> Requested Materials</h3>\r\n                    </div>\r\n                    <div className=\"card-content-IT\">\r\n                      {formData.materials.map((material, index) => (\r\n                        <div key={material.id} className=\"material-edit-item-IT\">\r\n                          <div className=\"material-edit-row-IT\">\r\n                            <div className=\"material-edit-field-IT\">\r\n                              <label>Material Name:</label>\r\n                              <input\r\n                                type=\"text\"\r\n                                value={material.materialName}\r\n                                onChange={(e) => handleMaterialChange(material.id, 'materialName', e.target.value)}\r\n                                placeholder=\"Enter material name\"\r\n                                required\r\n                              />\r\n                            </div>\r\n                            <div className=\"material-edit-field-IT\">\r\n                              <label>Quantity:</label>\r\n                              <input\r\n                                type=\"text\"\r\n                                value={material.quantity}\r\n                                onChange={(e) => handleMaterialChange(material.id, 'quantity', e.target.value)}\r\n                                placeholder=\"Enter quantity\"\r\n                                required\r\n                              />\r\n                            </div>\r\n                            <div className=\"material-edit-field-IT\">\r\n                              <label>Unit:</label>\r\n                              <select\r\n                                value={material.unit}\r\n                                onChange={(e) => handleMaterialChange(material.id, 'unit', e.target.value)}\r\n                                required\r\n                              >\r\n                                <option value=\"\">Select unit</option>\r\n                                <option value=\"pcs\">Pieces</option>\r\n                                <option value=\"kg\">Kilograms</option>\r\n                                <option value=\"m\">Meters</option>\r\n                                <option value=\"l\">Liters</option>\r\n                                <option value=\"box\">Boxes</option>\r\n                                <option value=\"roll\">Rolls</option>\r\n                                <option value=\"set\">Sets</option>\r\n                                <option value=\"pair\">Pairs</option>\r\n                                <option value=\"unit\">Units</option>\r\n                                <option value=\"bundle\">Bundles</option>\r\n                              </select>\r\n                            </div>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => removeMaterial(material.id)}\r\n                              className=\"remove-material-btn-IT\"\r\n                              disabled={formData.materials.length === 1}\r\n                            >\r\n                              <FaTrash />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                      \r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={addMaterial}\r\n                        className=\"add-material-btn-IT\"\r\n                      >\r\n                        <FaPlus style={{ marginRight: 8 }} />\r\n                        Add Material\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"detail-card-IT full-width-IT\">\r\n                <div className=\"card-header-IT\">\r\n                  <h3><FaPaperclip /> Attachments</h3>\r\n                </div>\r\n                <div className=\"card-content-IT\">\r\n                  {/* Existing Attachments */}\r\n                  {formData.attachments.length > 0 && (\r\n                    <div className=\"existing-attachments-IT\">\r\n                      <h4>Current Attachments:</h4>\r\n                      <div className=\"attachments-list-IT\">\r\n                        {formData.attachments.map((attachment, index) => (\r\n                          <div key={index} className=\"attachment-item-IT\">\r\n                            <div className=\"attachment-icon-IT\">\r\n                              <FaDownload />\r\n                            </div>\r\n                            <div className=\"attachment-info-IT\">\r\n                              <span className=\"attachment-name-IT\">{attachment}</span>\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => removeExistingAttachment(index)}\r\n                                className=\"remove-attachment-btn-IT\"\r\n                              >\r\n                                <FaTrash />\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* New File Upload */}\r\n                  <div className=\"file-upload-section-IT\">\r\n                    <h4>Add New Files:</h4>\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      onChange={handleFileUpload}\r\n                      className=\"file-input-IT\"\r\n                      accept=\".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt\"\r\n                    />\r\n                    \r\n                    {/* Preview of new files */}\r\n                    {newFiles.length > 0 && (\r\n                      <div className=\"new-files-preview-IT\">\r\n                        <h5>New Files to Upload:</h5>\r\n                        <div className=\"attachments-list-IT\">\r\n                          {newFiles.map((file, index) => (\r\n                            <div key={index} className=\"attachment-item-IT\">\r\n                              <div className=\"attachment-icon-IT\">\r\n                                <FaPaperclip />\r\n                              </div>\r\n                              <div className=\"attachment-info-IT\">\r\n                                <span className=\"attachment-name-IT\">{file.name}</span>\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => removeFile(index)}\r\n                                  className=\"remove-attachment-btn-IT\"\r\n                                >\r\n                                  <FaTrash />\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Submit Buttons */}\r\n              <div className=\"submit-actions-IT\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"save-btn-IT\"\r\n                  disabled={saving}\r\n                >\r\n                  <FaSave style={{ marginRight: 8 }} />\r\n                  {saving ? 'Saving...' : 'Save Changes'}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCancel}\r\n                  className=\"cancel-btn-IT\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItMaterialRequestEdit;\r\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport '../style/ceo_style/Ceo_Dash.css';\r\nimport '../style/ceo_style/Ceo_ManpowerRequest.css';\r\nimport api from '../../api/axiosInstance';\r\nimport { FaSearch, FaDownload } from 'react-icons/fa';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport { exportManpowerRequestsPdf } from '../../utils/manpowerRequestsPdf';\r\n\r\nconst ITEMS_PER_PAGE = 8;\r\n\r\nconst ItManpowerList = () => {\r\n  const navigate = useNavigate();\r\n  const userRef = useRef(null);\r\n  if (userRef.current === null) {\r\n    const stored = localStorage.getItem('user');\r\n    userRef.current = stored ? JSON.parse(stored) : null;\r\n  }\r\n  const user = userRef.current;\r\n\r\n  const [requests, setRequests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [status, setStatus] = useState('All');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [layoutView, setLayoutView] = useState('cards');\r\n  const [exporting, setExporting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!user || user.role !== 'IT') return;\r\n    let active = true;\r\n    const fetchAll = async () => {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        const { data } = await api.get('/manpower-requests');\r\n        if (!active) return;\r\n        setRequests(Array.isArray(data) ? data : []);\r\n      } catch (err) {\r\n        if (!active) return;\r\n        console.error('Failed to load manpower requests:', err);\r\n        if (err.response && (err.response.status === 401 || err.response.status === 403)) {\r\n          setError('Session expired or unauthorized. Please login.');\r\n        } else {\r\n          setError('Failed to load manpower requests');\r\n        }\r\n      } finally {\r\n        if (active) {\r\n        setLoading(false);\r\n          setCurrentPage(1);\r\n        }\r\n      }\r\n    };\r\n    fetchAll();\r\n    return () => { active = false; };\r\n  }, [user]);\r\n\r\n  const filteredRequests = useMemo(() => {\r\n    let items = requests;\r\n    if (status !== 'All') {\r\n      if (status === 'Archived') {\r\n        items = items.filter(r => (r.status || 'Pending').toLowerCase().includes('archived'));\r\n      } else {\r\n        items = items.filter(r => (r.status || 'Pending').toLowerCase().includes(status.toLowerCase()));\r\n      }\r\n      } else {\r\n      // For 'All' filter, exclude archived items by default\r\n      items = items.filter(r => !(r.status || 'Pending').toLowerCase().includes('archived'));\r\n    }\r\n    if (searchTerm) {\r\n      const s = searchTerm.toLowerCase();\r\n      items = items.filter(r => {\r\n        const proj = r.project?.projectName || '';\r\n        const by = r.createdBy?.name || '';\r\n        const summary = (r.manpowers || []).map(m => `${m.quantity} ${m.type}`).join(', ');\r\n        return proj.toLowerCase().includes(s) || by.toLowerCase().includes(s) || summary.toLowerCase().includes(s) || (r.description || '').toLowerCase().includes(s);\r\n      });\r\n    }\r\n    return items;\r\n  }, [requests, status, searchTerm]);\r\n\r\n  const totalPages = Math.max(1, Math.ceil(filteredRequests.length / ITEMS_PER_PAGE));\r\n  const pageRows = useMemo(() => {\r\n    const start = (currentPage - 1) * ITEMS_PER_PAGE;\r\n    return filteredRequests.slice(start, start + ITEMS_PER_PAGE);\r\n  }, [filteredRequests, currentPage]);\r\n\r\n  const handleExportPdf = async () => {\r\n    try {\r\n      setExporting(true);\r\n      await exportManpowerRequestsPdf(filteredRequests, {\r\n        companyName: 'FadzTrack',\r\n        logoPath: `${process.env.PUBLIC_URL || ''}/images/Fadz-logo.png`,\r\n        exporterName: user?.name || 'Unknown',\r\n        exporterRole: user?.role || '',\r\n        filters: { status, searchTerm },\r\n        reportTitle: 'Manpower Requests Export (IT View)',\r\n      });\r\n    } catch (error) {\r\n      console.error('Export failed:', error);\r\n      alert('Failed to export PDF');\r\n    } finally {\r\n      setExporting(false);\r\n    }\r\n  };\r\n\r\n  const getRequestBackgroundColor = (request) => {\r\n    const statusLower = request.status?.toLowerCase() || '';\r\n    if (statusLower.includes('pending') && request.acquisitionDate && new Date(request.acquisitionDate) < new Date()) {\r\n      return '#fef3c7';\r\n    }\r\n    if (statusLower.includes('pending')) return '#ffffff';\r\n    if (statusLower.includes('approved')) return '#fef3c7';\r\n    if (statusLower.includes('rejected') || statusLower.includes('cancel') || statusLower.includes('denied')) return '#fef2f2';\r\n    if (statusLower.includes('completed')) return '#ecfdf5';\r\n    return '#f9fafb';\r\n  };\r\n\r\n  const getStatusBadge = (request) => {\r\n    const s = (request.status || 'Pending').toLowerCase();\r\n    const isOverdue = s === 'pending' && request.acquisitionDate && new Date(request.acquisitionDate) < new Date();\r\n    if (isOverdue) return 'Overdue';\r\n    if (s.includes('archived')) return 'Archived';\r\n    if (s.includes('completed')) return 'Completed';\r\n    if (s.includes('approved')) return 'Approved';\r\n    if (s.includes('pending')) return 'Pending';\r\n    if (s.includes('reject') || s.includes('denied') || s.includes('cancel')) return 'Rejected';\r\n    if (s.includes('overdue')) return 'Overdue';\r\n    return 'Unknown';\r\n  };\r\n\r\n  const getStatusColor = (request) => {\r\n    const s = (request.status || 'Pending').toLowerCase();\r\n    const isOverdue = s === 'pending' && request.acquisitionDate && new Date(request.acquisitionDate) < new Date();\r\n    if (isOverdue) return '#d97706';\r\n    if (s.includes('archived')) return '#8b5cf6';\r\n    if (s.includes('completed')) return '#059669';\r\n    if (s.includes('approved')) return '#10b981';\r\n    if (s.includes('pending')) return '#f59e0b';\r\n    if (s.includes('reject') || s.includes('denied') || s.includes('cancel')) return '#ef4444';\r\n    if (s.includes('overdue')) return '#d97706';\r\n    return '#6b7280';\r\n  };\r\n\r\n  const summaryCounts = useMemo(() => {\r\n    let pending = 0, approved = 0, completed = 0, rejected = 0, overdue = 0, archived = 0;\r\n    requests.forEach(r => {\r\n      const s = (r.status || 'Pending').toLowerCase();\r\n      const isOver = s === 'pending' && r.acquisitionDate && new Date(r.acquisitionDate) < new Date();\r\n      if (s.includes('archived')) archived++; else if (s.includes('completed')) completed++; else if (s.includes('approved')) approved++; else if (s.includes('reject') || s.includes('denied') || s.includes('cancel')) rejected++; else if (isOver || s.includes('overdue')) overdue++; else pending++;\r\n    });\r\n    return { total: requests.length, pending, approved, rejected, overdue, completed, archived };\r\n  }, [requests]);\r\n\r\n  const statusCounts = useMemo(() => ({\r\n    All: summaryCounts.total - summaryCounts.archived, // Exclude archived from All count\r\n    Pending: summaryCounts.pending,\r\n    Overdue: summaryCounts.overdue,\r\n    Approved: summaryCounts.approved,\r\n    Completed: summaryCounts.completed,\r\n    Rejected: summaryCounts.rejected,\r\n    Archived: summaryCounts.archived\r\n  }), [summaryCounts]);\r\n\r\n  if (!user || user.role !== 'IT') {\r\n    return (\r\n      <div style={{ padding: 24 }}>\r\n        <h2>Forbidden</h2>\r\n        <p>You must be an IT user to view this page.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-container ceo-manpower-requests-page\">\r\n      <AppHeader roleSegment=\"it\" />\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"page-container\">\r\n          <div className=\"dashboard-card ceo-mr-header-card\">\r\n            <div className=\"card-header mr-header-row\">\r\n              <div className=\"mr-header-texts\">\r\n                <h1 className=\"card-title\">Manpower Requests</h1>\r\n                <p className=\"card-subtitle\">Monitor and manage manpower requests across all projects</p>\r\n            </div>\r\n              <div className=\"layout-toggle-wrapper\">\r\n                <button onClick={()=>setLayoutView(v=> v==='cards' ? 'table' : 'cards')} className=\"btn-secondary toggle-layout-btn\">\r\n                  {layoutView === 'cards' ? 'Table View' : 'Card View'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n            <div className=\"card-body mr-filters-row\">\r\n              <div className=\"filter-tabs compact\">\r\n                {['All','Pending','Overdue','Approved','Completed','Rejected','Archived'].map(tab => (\r\n                  <button key={tab} className={`filter-tab ${status === tab ? 'active' : ''}`} onClick={() => {setStatus(tab); setCurrentPage(1);}}>\r\n                    <span>{tab}</span>\r\n                    <span className=\"count\">{statusCounts[tab] ?? 0}</span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              <div className=\"search-wrapper stretch\">\r\n                <FaSearch className=\"search-icon\" />\r\n                <input type=\"text\" placeholder=\"Search requests...\" value={searchTerm} onChange={(e)=>{setSearchTerm(e.target.value); setCurrentPage(1);}} className=\"search-input\" />\r\n              </div>\r\n              <button\r\n                onClick={handleExportPdf}\r\n                disabled={exporting || filteredRequests.length === 0}\r\n                className=\"btn-primary export-btn\"\r\n                style={{ display: 'flex', alignItems: 'center', gap: '8px', padding: '8px 16px', minWidth: 'auto' }}\r\n              >\r\n                <FaDownload />\r\n                {exporting ? 'Exporting...' : 'Export PDF'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"dashboard-card ceo-mr-summary-card\">\r\n            <div className=\"card-header\"><h3 className=\"card-title-sm\">Summary</h3></div>\r\n            <div className=\"mr-summary-grid\">\r\n              {[{ label:'Total', value: summaryCounts.total, color:'#334155' },\r\n                { label:'Pending', value: summaryCounts.pending, color:'#f59e0b' },\r\n                { label:'Overdue', value: summaryCounts.overdue, color:'#d97706' },\r\n                { label:'Approved', value: summaryCounts.approved, color:'#10b981' },\r\n                { label:'Completed', value: summaryCounts.completed, color:'#059669' },\r\n                { label:'Rejected', value: summaryCounts.rejected, color:'#ef4444' },\r\n                { label:'Archived', value: summaryCounts.archived, color:'#8b5cf6' }\r\n              ].map(c => (\r\n                <div key={c.label} className=\"mr-summary-item\">\r\n                  <span className=\"mr-summary-label\">{c.label}</span>\r\n                  <span className=\"mr-summary-value\" style={{ color:c.color }}>{c.value}</span>\r\n                  <div className=\"mr-summary-bar\" style={{ background:c.color }} />\r\n            </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"dashboard-card ceo-mr-list-card\">\r\n            <div className=\"card-header list-header\"><h3 className=\"card-title-sm\">Requests <span className=\"muted\">({filteredRequests.length})</span></h3></div>\r\n            <div className={`requests-grid ceo-mr-grid ${layoutView === 'table' ? 'table-view' : ''}`}>            \r\n            {loading ? (\r\n                <div className=\"loading-state\"><div className=\"loading-spinner\"></div><p>Loading manpower requests...</p></div>\r\n            ) : error ? (\r\n                <div className=\"error-state\"><p>{error}</p></div>\r\n              ) : pageRows.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                  <div className=\"empty-icon\">👥</div>\r\n                  <h3>No manpower requests found</h3>\r\n                  <p>No requests match your current filters. Try adjusting your search criteria.</p>\r\n            </div>\r\n          ) : (\r\n                <>\r\n                  {layoutView === 'table' && (\r\n                    <div className=\"mr-table-header\" role=\"row\" aria-label=\"Table Header\">\r\n                      <div>Project</div>\r\n                      <div>Requester</div>\r\n                      <div>Description</div>\r\n                      <div>Manpower</div>\r\n                      <div>Target</div>\r\n                      <div>Dur</div>\r\n                      <div>Created</div>\r\n                      <div>Status</div>\r\n                    </div>\r\n                  )}\r\n                  {pageRows.map(request => {\r\n                    const summary = (request.manpowers || []).map(m=>`${m.quantity} ${m.type}`).join(', ');\r\n                    const badgeLabel = getStatusBadge(request);\r\n                    const badgeColor = getStatusColor(request);\r\n                    if (layoutView === 'table') {\r\n                  return (\r\n                    <div \r\n                          key={request._id}\r\n                          className=\"mr-table-row\"\r\n                          role=\"row\"\r\n                          onClick={() => navigate(`/it/manpower-list/${request._id}`)}\r\n                          style={{ cursor: 'pointer' }}\r\n                          title=\"View details\"\r\n                        >\r\n                          <div className=\"rt-title\" title={request.project?.projectName || '(No Project Name)'}>{request.project?.projectName || '(No Project Name)'}</div>\r\n                          <div className=\"rt-req\" title={request.createdBy?.name || 'Unknown'}>{request.createdBy?.name || 'Unknown'}</div>\r\n                          <div className=\"rt-desc\" title={request.description || 'No description'}>{request.description || 'No description'}</div>\r\n                          <div className=\"rt-man\" title={summary || '—'}>{summary || '—'}</div>\r\n                          <div className=\"rt-date\" title=\"Target Date\">{request.acquisitionDate ? new Date(request.acquisitionDate).toLocaleDateString() : '—'}</div>\r\n                          <div className=\"rt-date\" title=\"Duration\">{request.duration || '—'}d</div>\r\n                          <div className=\"rt-date\" title=\"Created\">{request.createdAt ? new Date(request.createdAt).toLocaleDateString() : '—'}</div>\r\n                          <div className=\"rt-btn\"><span className={`status-chip ${badgeLabel.toLowerCase()}`}>{badgeLabel}</span></div>\r\n                        </div>\r\n                      );\r\n                    }\r\n                    return (\r\n                      <div className={`request-card ceo-mr-card`} key={request._id}>\r\n                        <div className=\"card-body\">\r\n                          <div className=\"mr-card-top-row\">\r\n                            <h3 className=\"request-title\" title={request.project?.projectName || '(No Project Name)'}>{request.project?.projectName || '(No Project Name)'}</h3>\r\n                            <span className={`status-chip ${badgeLabel.toLowerCase()}`}>{badgeLabel}</span>\r\n                        </div>\r\n                          <p className=\"request-description\" title={request.description || 'No description provided'}>{request.description || 'No description provided'}</p>\r\n                          <div className=\"request-meta\">\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Requested by:</span><span className=\"meta-value\" title={request.createdBy?.name || 'Unknown'}>{request.createdBy?.name || 'Unknown'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Manpower:</span><span className=\"meta-value\" title={summary || '—'}>{summary || '—'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Date:</span><span className=\"meta-value\">{request.createdAt ? new Date(request.createdAt).toLocaleDateString() : '—'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Target:</span><span className=\"meta-value\">{request.acquisitionDate ? new Date(request.acquisitionDate).toLocaleDateString() : '—'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Duration:</span><span className=\"meta-value\">{request.duration || '—'} d</span></div>\r\n                        </div>\r\n                      </div>\r\n                        <div className=\"card-footer\">\r\n                          <Link to={`/it/manpower-list/${request._id}`} className=\"view-details-btn\">View Details</Link>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n                </>\r\n              )}\r\n            </div>\r\n            {filteredRequests.length > 0 && (\r\n              <div className=\"pagination-section inside-card\">\r\n                <div className=\"pagination-info\">Showing {((currentPage - 1) * ITEMS_PER_PAGE) + 1} to {Math.min(currentPage * ITEMS_PER_PAGE, filteredRequests.length)} of {filteredRequests.length} entries</div>\r\n                <div className=\"pagination-controls\">\r\n                  <button onClick={()=>setCurrentPage(p=>Math.max(p-1,1))} disabled={currentPage===1} className=\"pagination-btn\">Previous</button>\r\n                  {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => (\r\n                    <button key={page} className={`pagination-btn ${page === currentPage ? 'active' : ''}`} onClick={()=>setCurrentPage(page)}>{page}</button>\r\n                  ))}\r\n                  <button onClick={()=>setCurrentPage(p=>Math.min(p+1,totalPages))} disabled={currentPage===totalPages} className=\"pagination-btn\">Next</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItManpowerList;\r\n","// Unified ItChat wrapper using AreaChat implementation\r\nimport React from 'react';\r\nimport AreaChat from './AreaChat';\r\n\r\nexport default function ItChat(){\r\n  return <AreaChat baseSegment=\"it\" />;\r\n}\r\n","import React, { useEffect, useState, useMemo, useDeferredValue } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport Papa from 'papaparse';\r\nimport '../style/it_style/It_Dash.css';\r\nimport '../style/it_style/It_Projects.css';\r\nimport '../style/am_style/Area_Projects.css';\r\nimport NotificationBell from '../NotificationBell';\r\nimport { generateProjectPDF } from '../../utils/projectPdf';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport { \r\n  FaTachometerAlt, \r\n  FaComments, \r\n  FaBoxes, \r\n  FaUsers, \r\n  FaClipboardList, \r\n  FaPlus, \r\n  FaEdit, \r\n  FaTrash, \r\n  FaSync,\r\n  FaProjectDiagram,\r\n  FaMapMarkerAlt,\r\n  FaUserTie,\r\n  FaBuilding,\r\n  FaCalendarAlt,\r\n  FaUsers as FaUsersIcon,\r\n  FaMoneyBillWave,\r\n  FaCheckCircle,\r\n  FaClock,\r\n  FaFilter,\r\n  FaTh,\r\n  FaList,\r\n  FaSearch,\r\n  FaChevronDown,\r\n  FaChevronUp,\r\n  FaEye,\r\n  FaDownload\r\n} from 'react-icons/fa';\r\n\r\n// Removed legacy PAGE_SIZE (now using dynamic pageSize state)\r\nconst emptyForm = { projectName:'', contractor:'', budget:'', location:'', startDate:'', endDate:'', status:'Ongoing', projectmanager:'', areamanager:'', area:'', pic:[], staff:[], hrsite:[], manpower:[] };\r\n\r\nexport default function ItProjects(){\r\n  const [formData, setFormData] = useState(emptyForm);\r\n  // ...existing code...\r\n  const [budgetDisplay, setBudgetDisplay] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (formData.budget === '') { setBudgetDisplay(''); return; }\r\n    const parts = String(formData.budget).split('.');\r\n    const intPart = parts[0] || '0';\r\n    const withCommas = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n    const dec = parts[1] ? '.'+parts[1] : '';\r\n    const nextFormatted = withCommas + dec;\r\n    if(nextFormatted !== budgetDisplay) setBudgetDisplay(nextFormatted);\r\n  }, [formData.budget]);\r\n\r\n  const handleBudgetChange = (e) => {\r\n    let val = e.target.value.replace(/,/g, '');\r\n    // Allow only numbers and one decimal\r\n    val = val.replace(/[^\\d.]/g, '');\r\n    const parts = val.split('.');\r\n    let intPartLimited = parts[0].replace(/^0+(?!$)/, '');\r\n    let decPart = parts[1] !== undefined ? parts[1].slice(0, 2) : undefined;\r\n    const rawForState = decPart !== undefined && decPart.length>0 ? `${intPartLimited}.${decPart}` : intPartLimited;\r\n    setFormData(prev => ({ ...prev, budget: rawForState }));\r\n  };\r\n  const navigate = useNavigate();\r\n  const user = useMemo(()=> JSON.parse(localStorage.getItem('user')||'{}'), []);\r\n  const [profileMenuOpen,setProfileMenuOpen]=useState(false);\r\n  const [isHeaderCollapsed,setIsHeaderCollapsed]=useState(false);\r\n  const [userName,setUserName]=useState(user?.name||'');\r\n  const [userRole,setUserRole]=useState(user?.role||'');\r\n  const [projects,setProjects]=useState([]);\r\n  const [loading,setLoading]=useState(true);\r\n  const [error,setError]=useState('');\r\n  // Removed legacy search & page state (superseded by unified layout states below)\r\n  const [showForm,setShowForm]=useState(false);\r\n  // ...existing code...\r\n  const [editingId,setEditingId]=useState(null);\r\n  const [saving,setSaving]=useState(false);\r\n  const [allLocations,setAllLocations]=useState([]);\r\n  const [usersByRole,setUsersByRole]=useState({});\r\n  const [userLookup,setUserLookup]=useState({});\r\n  const [showAudit,setShowAudit]=useState(false);\r\n  const [auditLogs,setAuditLogs]=useState([]);\r\n  const [auditLoading,setAuditLoading]=useState(false);\r\n  const [auditProjectId,setAuditProjectId]=useState(null);\r\n  const [allManpower,setAllManpower]=useState([]);\r\n  const [validationErrors,setValidationErrors]=useState([]);\r\n  const [docFiles,setDocFiles]=useState([]);\r\n  const [budgetFiles,setBudgetFiles]=useState([]); // dedicated budget PDF(s)\r\n  const [photoFiles,setPhotoFiles]=useState([]);\r\n  // Preview URLs for selected initial files (create mode)\r\n  const [photoPreviews,setPhotoPreviews]=useState([]); // [{name,url,file}]\r\n  const [docPreviews,setDocPreviews]=useState([]);     // [{name,ext,file}]\r\n  const [areasByManager,setAreasByManager]=useState({}); // retained in case future use, but Area selection removed\r\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [deleteConfirm,setDeleteConfirm]=useState(null); // {id,name}\r\n  // Area-style assignment UI states\r\n  const [assignedPICs,setAssignedPICs]=useState([]);\r\n  const [searchPIC,setSearchPIC]=useState('');\r\n  const [assignedStaff,setAssignedStaff]=useState([]);\r\n  const [searchStaff,setSearchStaff]=useState('');\r\n  const [assignedHR,setAssignedHR]=useState([]);\r\n  const [searchHR,setSearchHR]=useState('');\r\n  const [assignedManpower,setAssignedManpower]=useState([]);\r\n  const [searchManpower,setSearchManpower]=useState('');\r\n  \r\n  // CSV functionality\r\n  const [csvError, setCsvError] = useState('');\r\n  const [csvUploading, setCsvUploading] = useState(false);\r\n  \r\n  // Export functionality\r\n  const [showExportModal, setShowExportModal] = useState(false);\r\n  const [exportFilters, setExportFilters] = useState({\r\n    status: 'all',\r\n    search: '',\r\n    dateFrom: '',\r\n    dateTo: ''\r\n  });\r\n  // Live preview list of projects matching export filters\r\n  const exportPreview = useMemo(()=>{\r\n    return projects.filter(project => {\r\n      if (exportFilters.status !== 'all') {\r\n        const st = (project.status || '').toLowerCase();\r\n        if (exportFilters.status === 'completed' && st !== 'completed') return false;\r\n        if (exportFilters.status === 'ongoing' && !['ongoing','on going'].includes(st)) return false;\r\n        if (exportFilters.status === 'pending' && !['pending','not started'].includes(st)) return false;\r\n      }\r\n      if (exportFilters.search) {\r\n        const q = exportFilters.search.toLowerCase();\r\n        const match = [project.projectName, project.location?.name, project.projectmanager?.name, project.contractor]\r\n          .some(v => (v || '').toLowerCase().includes(q));\r\n        if (!match) return false;\r\n      }\r\n      if (exportFilters.dateFrom) {\r\n        const sd = project.startDate ? new Date(project.startDate) : null;\r\n        if (sd && sd < new Date(exportFilters.dateFrom)) return false;\r\n      }\r\n      if (exportFilters.dateTo) {\r\n        const sd = project.startDate ? new Date(project.startDate) : null;\r\n        if (sd && sd > new Date(exportFilters.dateTo)) return false;\r\n      }\r\n      return true;\r\n    });\r\n  }, [projects, exportFilters]);\r\n  \r\n  // New state for AM-style layout\r\n  const [filter, setFilter] = useState('all');\r\n  const [viewMode, setViewMode] = useState('grid');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const deferredSearch = useDeferredValue(searchTerm);\r\n  const [sortBy, setSortBy] = useState('name');\r\n  const [sortOrder, setSortOrder] = useState('asc');\r\n  const [page,setPage]=useState(1); // pagination current page (unified layout)\r\n  const [pageSize,setPageSize]=useState(12);\r\n  // Compute which users are already assigned in active projects so we can limit selection to unassigned\r\n  const assignedSets = useMemo(()=>{\r\n    const s={ pm:new Set(), am:new Set(), pic:new Set(), staff:new Set(), hr:new Set() };\r\n    projects.forEach(p=>{\r\n      if(p.projectmanager) s.pm.add(String(p.projectmanager._id||p.projectmanager));\r\n      if(p.areamanager) s.am.add(String(p.areamanager._id||p.areamanager));\r\n      (p.pic||[]).forEach(u=> s.pic.add(String(u._id||u)));\r\n      (p.staff||[]).forEach(u=> s.staff.add(String(u._id||u)));\r\n      (p.hrsite||[]).forEach(u=> s.hr.add(String(u._id||u)));\r\n    });\r\n    return s;\r\n  },[projects]);\r\n  const availableRoleUsers = useMemo(()=>{\r\n    const out={};\r\n    Object.entries(usersByRole).forEach(([role,list])=>{\r\n      let setRef=null;\r\n      if(role==='Project Manager') setRef=assignedSets.pm;\r\n      else if(role==='Area Manager') setRef=assignedSets.am;\r\n      else if(role==='Person in Charge') setRef=assignedSets.pic;\r\n      else if(role==='Staff') setRef=assignedSets.staff;\r\n      else if(role==='HR - Site') setRef=assignedSets.hr;\r\n      if(!setRef){ out[role]=list; return; }\r\n      // Keep currently selected items when editing\r\n      const keepIds=new Set();\r\n      if(editingId){\r\n        if(role==='Project Manager' && formData.projectmanager) keepIds.add(formData.projectmanager);\r\n        if(role==='Area Manager' && formData.areamanager) keepIds.add(formData.areamanager);\r\n        if(role==='Person in Charge') formData.pic.forEach(id=>keepIds.add(id));\r\n        if(role==='Staff') formData.staff.forEach(id=>keepIds.add(id));\r\n        if(role==='HR - Site') formData.hrsite.forEach(id=>keepIds.add(id));\r\n      }\r\n      out[role]= (list||[]).filter(u=> !setRef.has(String(u._id)) || keepIds.has(String(u._id)) );\r\n    });\r\n    return out;\r\n  },[usersByRole,assignedSets,editingId,formData.projectmanager,formData.areamanager,formData.pic,formData.staff,formData.hrsite]);\r\n\r\n  useEffect(()=>{\r\n    if(user?.role!== 'IT'){ setError('Forbidden'); setLoading(false); return; }\r\n    load(); fetchLookups(); fetchManpower();\r\n  },[]); // eslint-disable-line\r\n\r\n  useEffect(()=>{ const onScroll=()=> setIsHeaderCollapsed((window.pageYOffset||document.documentElement.scrollTop)>50); window.addEventListener('scroll',onScroll); return ()=>window.removeEventListener('scroll',onScroll);},[]);\r\n  useEffect(()=>{ const handler=e=>{ if(!e.target.closest('.user-profile')) setProfileMenuOpen(false); }; document.addEventListener('click',handler); return ()=>document.removeEventListener('click',handler);},[]);\r\n  useEffect(()=>{ setUserName(user?.name||''); setUserRole(user?.role||'');},[user]);\r\n\r\n  const handleLogout=()=>{ const token=localStorage.getItem('token'); api.post('/auth/logout',{}, {headers:{Authorization:`Bearer ${token}`}}).finally(()=>{localStorage.removeItem('token');localStorage.removeItem('user');navigate('/');});};\r\n\r\n  async function load(){ setLoading(true); setError(''); try{ const {data}=await api.get('/projects'); setProjects(Array.isArray(data)?data:[]);}catch{ setError('Failed to load projects'); }finally{ setLoading(false);} }\r\n  async function fetchLookups(){ \r\n    try{ \r\n      const [locRes, usersRes, areasRes]= await Promise.all([\r\n        api.get('/locations'), \r\n        // Correct users endpoint (was /auth/Users which doesn't exist)\r\n        api.get('/users'),\r\n        api.get('/areas')\r\n      ]); \r\n      setAllLocations(locRes.data||[]); \r\n      const byRole={}; \r\n      const lookup={}; \r\n      const normRole=r=>{ if(!r) return r; return r.toLowerCase()==='pic'?'Person in Charge':r;}; \r\n      (usersRes.data||[]).forEach(u=>{ \r\n        const id=u._id||u.id; \r\n        if(!id) return; \r\n        const roleN=normRole(u.role||''); \r\n        if(!byRole[roleN]) byRole[roleN]=[]; \r\n        const rec={_id:String(id), name:u.name, role:roleN}; \r\n        byRole[roleN].push(rec); \r\n        lookup[String(id)]=u.name;\r\n      }); \r\n      setUsersByRole(byRole); \r\n      setUserLookup(lookup);\r\n      \r\n      // Group areas by area manager\r\n  const areasByAM = {};\r\n      (areasRes.data || []).forEach(area => {\r\n        if(!area || !area._id) return;\r\n        if (area.areaManager) {\r\n          const amIdRaw = area.areaManager._id || area.areaManager;\r\n          const amId = String(amIdRaw);\r\n          if (!areasByAM[amId]) areasByAM[amId] = [];\r\n          areasByAM[amId].push(area);\r\n        }\r\n      });\r\n      setAreasByManager(areasByAM);\r\n    }catch(e){console.error(e);} \r\n  }\r\n  async function fetchManpower(){\r\n    try{\r\n      const {data}=await api.get('/manpower/unassigned');\r\n      setAllManpower(Array.isArray(data)?data:[]);\r\n    }catch(e){console.error('Failed to load manpower',e);}\r\n  }\r\n\r\n  // Build/revoke object URLs for photo previews\r\n  useEffect(()=>{\r\n    const urls = photoFiles.map(f=>({ name:f.name, url:URL.createObjectURL(f), file:f }));\r\n    setPhotoPreviews(urls);\r\n    return ()=>{ urls.forEach(p=> URL.revokeObjectURL(p.url)); };\r\n  },[photoFiles]);\r\n  // Build doc preview metadata (no heavy rendering, just extension box)\r\n  useEffect(()=>{\r\n    const docs = docFiles.map(f=>({ name:f.name, ext:(f.name.split('.').pop()||'').toUpperCase(), file:f }));\r\n    setDocPreviews(docs);\r\n  },[docFiles]);\r\n\r\n  // CSV upload for manpower\r\n  const handleCSVUpload = (e) => {\r\n    setCsvError('');\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    \r\n    Papa.parse(file, {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      complete: async (results) => {\r\n        const csvData = results.data;\r\n        const errors = results.errors;\r\n\r\n        if (errors.length > 0) {\r\n          setCsvError(`CSV Upload Error: ${errors[0].message}`);\r\n          return;\r\n        }\r\n\r\n        if (csvData.length === 0) {\r\n          setCsvError('No data found in CSV file.');\r\n          return;\r\n        }\r\n\r\n        const newManpowers = [];\r\n        const invalidRows = [];\r\n        const validationErrors = [];\r\n        const duplicateNames = [];\r\n\r\n        csvData.forEach((row, index) => {\r\n          const name = row['Name'] || row['name'] || '';\r\n          const position = row['Position'] || row['position'] || '';\r\n          const status = row['Status'] || row['status'] || '';\r\n          const project = row['Project'] || row['project'] || '';\r\n\r\n          // Validate required fields\r\n          if (!name || !position) {\r\n            invalidRows.push(`Row ${index + 1}: Missing name or position`);\r\n            return;\r\n          }\r\n\r\n          // Check for duplicates in CSV file itself\r\n          const duplicateInCSV = csvData.slice(0, index).some((prevRow, prevIndex) => {\r\n            const prevName = (prevRow['Name'] || prevRow['name'] || '').trim().toLowerCase();\r\n            const prevPosition = (prevRow['Position'] || prevRow['position'] || '').trim().toLowerCase();\r\n            return prevName === name.trim().toLowerCase() && prevPosition === position.trim().toLowerCase();\r\n          });\r\n          \r\n          if (duplicateInCSV) {\r\n            duplicateNames.push(`Row ${index + 1}: Duplicate entry (${name} - ${position})`);\r\n            return;\r\n          }\r\n\r\n          // Check for duplicates in existing manpower\r\n          const existingManpower = allManpower.find(mp => \r\n            mp.name.trim().toLowerCase() === name.trim().toLowerCase() &&\r\n            mp.position.trim().toLowerCase() === position.trim().toLowerCase()\r\n          );\r\n          \r\n          if (existingManpower) {\r\n            duplicateNames.push(`Row ${index + 1}: Already exists in system (${name} - ${position})`);\r\n            return;\r\n          }\r\n\r\n          // For Create mode: validate no project assignment and status must be unassigned\r\n          if (!editingId) {\r\n            if (project && project.trim() !== '') {\r\n              validationErrors.push(`Row ${index + 1}: Project should be empty (${name})`);\r\n              return;\r\n            }\r\n            if (status && status.trim().toLowerCase() !== 'unassigned') {\r\n              validationErrors.push(`Row ${index + 1}: Status should be 'unassigned' (${name})`);\r\n              return;\r\n            }\r\n          }\r\n\r\n          newManpowers.push({\r\n            name: name.trim(),\r\n            position: position.trim(),\r\n            status: editingId ? (status || 'Active') : 'unassigned',\r\n            project: '',\r\n            isNew: true\r\n          });\r\n        });\r\n\r\n        if (invalidRows.length > 0) {\r\n          setCsvError(`Invalid rows: ${invalidRows.join(', ')}`);\r\n          return;\r\n        }\r\n\r\n        if (duplicateNames.length > 0) {\r\n          setCsvError(`Duplicate entries: ${duplicateNames.join(', ')}`);\r\n          return;\r\n        }\r\n\r\n        if (validationErrors.length > 0) {\r\n          setCsvError(`Validation errors: ${validationErrors.join(', ')}`);\r\n          return;\r\n        }\r\n\r\n        if (newManpowers.length > 0) {\r\n          setCsvUploading(true);\r\n          try {\r\n            // Create manpower entries individually\r\n            const createdManpowers = [];\r\n            for (const mp of newManpowers) {\r\n              const { data } = await api.post('/manpower', {\r\n                name: mp.name,\r\n                position: mp.position,\r\n                status: mp.status,\r\n                assignedProject: null\r\n              }, {\r\n                headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n              });\r\n              createdManpowers.push(data);\r\n            }\r\n\r\n            // Add created manpower to the form data\r\n            const newManpowerIds = createdManpowers.map(mp => mp._id);\r\n            setFormData(prev => ({\r\n              ...prev,\r\n              manpower: [...prev.manpower, ...newManpowerIds]\r\n            }));\r\n\r\n            // Update the allManpower list to include new entries\r\n            setAllManpower(prev => [...prev, ...createdManpowers]);\r\n            \r\n            // Clear any previous errors\r\n            setCsvError('');\r\n            \r\n            // Show success message\r\n            const mode = editingId ? 'added to project' : 'created and assigned to project';\r\n            alert(`Successfully imported ${createdManpowers.length} manpower entries. They have been ${mode}.`);\r\n          } catch (err) {\r\n            console.error('Error importing manpower:', err);\r\n            setCsvError('Failed to import manpower. Please try again.');\r\n          } finally {\r\n            setCsvUploading(false);\r\n          }\r\n        } else {\r\n          setCsvError('No valid manpower data found in CSV file.');\r\n        }\r\n      },\r\n      error: (err) => {\r\n        console.error('CSV Parsing Error:', err);\r\n        setCsvError('Error parsing CSV file. Please ensure it is a valid CSV and try again.');\r\n      }\r\n    });\r\n  };\r\n\r\n  function openCreate(){ setEditingId(null); setFormData(emptyForm); setShowForm(true); }\r\n  function openEdit(p){ \r\n    setEditingId(p._id); \r\n    const newForm={ \r\n      projectName:p.projectName||'', \r\n      contractor:p.contractor||'', \r\n      budget:p.budget??'', \r\n      location:p.location?._id? String(p.location._id):'', \r\n      startDate:p.startDate? new Date(p.startDate).toISOString().slice(0,10):'', \r\n      endDate:p.endDate? new Date(p.endDate).toISOString().slice(0,10):'', \r\n      status:p.status||'Ongoing', \r\n      projectmanager:p.projectmanager?._id? String(p.projectmanager._id):'', \r\n  areamanager:p.areamanager?._id? String(p.areamanager._id):'', \r\n  area:p.area?._id? String(p.area._id):'', // kept in data model but no longer shown/required\r\n      pic:(p.pic||[]).map(x=>String(x._id||x)), \r\n      staff:(p.staff||[]).map(x=>String(x._id||x)), \r\n      hrsite:(p.hrsite||[]).map(x=>String(x._id||x)), \r\n      manpower:(p.manpower||[]).map(x=>String(x._id||x)) \r\n    };\r\n    setFormData(newForm); \r\n    // hydrate assignment lists with user objects (fallback to id/name via lookup)\r\n    const idToObj=(id)=>{ \r\n      for(const role in usersByRole){ const arr=usersByRole[role]||[]; const found=arr.find(u=>String(u._id)===String(id)); if(found) return found; }\r\n      return {_id:id, name:userLookup[id]||id};\r\n    };\r\n    setAssignedPICs(newForm.pic.map(idToObj));\r\n    setAssignedStaff(newForm.staff.map(idToObj));\r\n    setAssignedHR(newForm.hrsite.map(idToObj));\r\n    // manpower objects\r\n    setAssignedManpower((p.manpower||[]).map(m=> ({ _id:String(m._id||m), name:m.name||m._id||m, position:m.position||'' })));\r\n    // Merge current project's manpower into allManpower so MultiBox can resolve names\r\n    try {\r\n      const projectManpower = (p.manpower||[]).map(m=> ({ _id:String(m._id||m), name:m.name||m._id||m, position:m.position||'' }));\r\n      setAllManpower(prev => {\r\n        const map = new Map(prev.map(x=> [String(x._id), x]));\r\n        projectManpower.forEach(x=> { if(!map.has(x._id)) map.set(x._id, x); });\r\n        return Array.from(map.values());\r\n      });\r\n    } catch(_) {}\r\n    setShowForm(true); \r\n  }\r\n  function handleChange(e){ \r\n    const {name,value,multiple,options}=e.target; \r\n    if(multiple){ \r\n      const vals=Array.from(options).filter(o=>o.selected).map(o=>o.value); \r\n      setFormData(f=>({...f,[name]:vals})); \r\n    } else { \r\n      setFormData(f=>({...f,[name]:value})); \r\n      // Clear area when area manager changes\r\n    // When area manager changes we previously cleared area; Area field now hidden so ignore.\r\n    } \r\n  }\r\n  // Removed auto-select area logic (Area field hidden for IT create/edit)\r\n  function validate(form){ \r\n    const errs=[]; \r\n    if(!form.projectName.trim()) errs.push('Project name is required'); \r\n    if(!form.contractor.trim()) errs.push('Contractor is required');\r\n    if(!form.location) errs.push('Location is required'); \r\n    if(!form.startDate) errs.push('Start date is required'); \r\n    if(!form.endDate) errs.push('End date is required'); \r\n    if(form.startDate && form.endDate && new Date(form.startDate) > new Date(form.endDate)) errs.push('Start date must be before end date'); \r\n    if(!form.projectmanager) errs.push('Project Manager is required');\r\n  if(!form.areamanager) errs.push('Area Manager is required');\r\n  // Area no longer required/visible for IT\r\n    if(!form.pic || form.pic.length === 0) errs.push('At least one PIC is required');\r\n    if(!form.staff || form.staff.length === 0) errs.push('At least one Staff member is required');\r\n    if(!form.hrsite || form.hrsite.length === 0) errs.push('At least one HR-Site member is required');\r\n    if(!form.manpower || form.manpower.length === 0) errs.push('At least one Manpower is required');\r\n    return errs; \r\n  }\r\n  async function submitForm(e){ \r\n    e.preventDefault(); \r\n    setSaving(true); \r\n    const errs=validate(formData); \r\n    setValidationErrors(errs); \r\n    if(errs.length){ \r\n      setSaving(false); \r\n      return; \r\n    } \r\n    try{ \r\n  const payload={...formData}; \r\n  // Always use current formData arrays; assigned* state not source of truth\r\n  payload.pic = [...formData.pic];\r\n  payload.staff = [...formData.staff];\r\n  payload.hrsite = [...formData.hrsite];\r\n  payload.manpower = [...formData.manpower];\r\n  if(editingId){ try { console.log('[IT Edit] Update payload', payload); } catch(_) {} }\r\n      if(payload.budget==='') delete payload.budget; \r\n      else payload.budget=Number(payload.budget); \r\n  ['projectmanager','areamanager','area'].forEach(k=>{ if(!payload[k]) delete payload[k]; }); // area will drop if blank\r\n      \r\n      let createdProject;\r\n      if(!editingId && (docFiles.length||photoFiles.length||budgetFiles.length)){ \r\n        const fd=new FormData(); \r\n        Object.entries(payload).forEach(([k,v])=>{ \r\n          if(Array.isArray(v)) v.forEach(val=>fd.append(k,val)); \r\n          else fd.append(k,v); \r\n        }); \r\n        photoFiles.forEach(f=>fd.append('photos',f)); \r\n        docFiles.forEach(f=>fd.append('documents',f)); \r\n        budgetFiles.forEach(f=>fd.append('budgetPdf',f));\r\n        const response = await api.post('/projects', fd, {headers:{'Content-Type':'multipart/form-data'}});\r\n        createdProject = response.data;\r\n      } else if(editingId){ \r\n        await api.patch(`/projects/${editingId}`, payload); \r\n      } else { \r\n        const response = await api.post('/projects', payload);\r\n        createdProject = response.data;\r\n      } \r\n      \r\n      // Create group chat for new projects\r\n      if (!editingId && createdProject) {\r\n        try {\r\n          // Collect all assigned user IDs\r\n          const allUserIds = [];\r\n          if (payload.projectmanager) allUserIds.push(payload.projectmanager);\r\n          if (payload.areamanager) allUserIds.push(payload.areamanager);\r\n          if (payload.pic && payload.pic.length > 0) allUserIds.push(...payload.pic);\r\n          if (payload.staff && payload.staff.length > 0) allUserIds.push(...payload.staff);\r\n          if (payload.hrsite && payload.hrsite.length > 0) allUserIds.push(...payload.hrsite);\r\n          \r\n          // Remove duplicates\r\n          const uniqueUserIds = [...new Set(allUserIds)];\r\n          \r\n          // Create group chat if there are users to add\r\n          if (uniqueUserIds.length > 0) {\r\n            await api.post('/chats', {\r\n              name: payload.projectName,\r\n              users: uniqueUserIds,\r\n              isGroup: true\r\n            });\r\n            setSuccessMessage(`Project \"${payload.projectName}\" created successfully! A group chat has been created with all assigned team members.`);\r\n          } else {\r\n            setSuccessMessage(`Project \"${payload.projectName}\" created successfully!`);\r\n          }\r\n          setShowSuccessMessage(true);\r\n          setTimeout(() => setShowSuccessMessage(false), 5000); // Hide after 5 seconds\r\n        } catch (chatError) {\r\n          console.error('Failed to create group chat:', chatError);\r\n          setSuccessMessage(`Project \"${payload.projectName}\" created successfully! (Note: Group chat creation failed)`);\r\n          setShowSuccessMessage(true);\r\n          setTimeout(() => setShowSuccessMessage(false), 5000);\r\n        }\r\n              const response = await api.post('/projects', {headers:{'Content-Type':'multipart/form-data'}});\r\n        setSuccessMessage(`Project updated successfully!`);\r\n                // If photoFiles are selected, upload as FormData\r\n                if (photoFiles.length > 0) {\r\n                  const fd = new FormData();\r\n                  Object.entries(payload).forEach(([k,v])=>{\r\n                    if(Array.isArray(v)) v.forEach(val=>fd.append(k,val));\r\n                    else fd.append(k,v);\r\n                  });\r\n                  photoFiles.forEach(f=>fd.append('photos',f));\r\n                  await api.patch(`/projects/${editingId}`, fd, {headers:{'Content-Type':'multipart/form-data'}});\r\n                } else {\r\n                  await api.patch(`/projects/${editingId}`, payload);\r\n                }\r\n        setTimeout(() => setShowSuccessMessage(false), 3000);\r\n      }\r\n      \r\n      setShowForm(false); \r\n      await load();\r\n    }catch{ \r\n      alert('Save failed'); \r\n    } finally{ \r\n      setSaving(false);\r\n    } \r\n  }\r\n  function requestDelete(p){\r\n    setDeleteConfirm({ id:p._id, name:p.projectName });\r\n  }\r\n  async function confirmDelete(){\r\n    if(!deleteConfirm) return;\r\n    const {id} = deleteConfirm;\r\n    try{\r\n      await api.delete(`/projects/${id}`);\r\n      setProjects(prev=>prev.filter(p=>p._id!==id));\r\n    }catch{ alert('Delete failed'); }\r\n    finally{ setDeleteConfirm(null); }\r\n  }\r\n  function cancelDelete(){ setDeleteConfirm(null); }\r\n  async function loadAudit(projectId){ setAuditLoading(true); setAuditProjectId(projectId); try{ const {data}=await api.get('/audit-logs',{params:{projectId}}); setAuditLogs(data||[]);}catch{ setAuditLogs([]);} finally{ setAuditLoading(false); setShowAudit(true);} }\r\n\r\n  // Export function\r\n  const exportProjects = async () => {\r\n    const now = new Date();\r\n    const exportDateTime = now.toLocaleString('en-US', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit',\r\n      hour12: true\r\n    });\r\n    \r\n    const pdfContent = {\r\n      companyName: 'Fadz Construction Inc.',\r\n      companyLogo: '/images/Fadz-logo.png', // Use the correct path to the logo\r\n      exportedBy: userName || 'Unknown User',\r\n      exportDate: exportDateTime,\r\n      filters: exportFilters,\r\n      projects: exportPreview.map(project => ({\r\n        name: project.projectName,\r\n        area: project.location?.name || 'N/A',\r\n        pm: project.projectmanager?.name || 'N/A',\r\n        contractor: project.contractor || 'N/A',\r\n        timeline: `${project.startDate ? new Date(project.startDate).toLocaleDateString() : 'N/A'} - ${project.endDate ? new Date(project.endDate).toLocaleDateString() : 'N/A'}`,\r\n        pics: Array.isArray(project.pic) ? project.pic.map(p => p.name).join(', ') : 'N/A',\r\n        budget: project.budget ? new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(project.budget) : 'N/A'\r\n      }))\r\n    };\r\n\r\n    try {\r\n      await generateProjectPDF(pdfContent);\r\n    } catch (e) {\r\n      console.error('PDF generation failed', e);\r\n      alert('PDF generation failed. See console for details.');\r\n    }\r\n    setShowExportModal(false);\r\n  };\r\n\r\n  // Filtering + sorting (new unified style)\r\n  const filteredSorted = useMemo(()=>{\r\n    const q = deferredSearch.trim().toLowerCase();\r\n    return projects\r\n      .filter(p=>{\r\n        const st=(p.status||'').toLowerCase();\r\n        if(filter==='completed') return st==='completed';\r\n        if(filter==='ongoing') return ['ongoing','on going'].includes(st);\r\n        if(filter==='pending') return ['pending','not started'].includes(st);\r\n        return true;\r\n      })\r\n      .filter(p=>{\r\n        if(!q) return true; \r\n        return [p.projectName, p.location?.name, p.projectmanager?.name, p.contractor]\r\n          .some(v=> (v||'').toLowerCase().includes(q));\r\n      })\r\n      .sort((a,b)=>{\r\n        const pick=o=>{\r\n          switch(sortBy){\r\n            case 'location': return o.location?.name||'';\r\n            case 'manager': return o.projectmanager?.name||'';\r\n            case 'status': return o.status||'';\r\n            case 'startDate': return o.startDate? new Date(o.startDate).getTime():0;\r\n            default: return o.projectName||'';\r\n          }\r\n        };\r\n        const av=pick(a), bv=pick(b);\r\n        if(av===bv) return 0;\r\n        return (av>bv?1:-1)*(sortOrder==='asc'?1:-1);\r\n      });\r\n  },[projects,filter,deferredSearch,sortBy,sortOrder]);\r\n\r\n  // Reset page when criteria change\r\n  useEffect(()=>{ setPage(1); },[filter,deferredSearch,sortBy,sortOrder]);\r\n\r\n  const totalItems = filteredSorted.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const currentPage = Math.min(page, totalPages);\r\n  const paginatedProjects = useMemo(()=> filteredSorted.slice((currentPage-1)*pageSize, currentPage*pageSize), [filteredSorted,currentPage,pageSize]);\r\n  const counts = useMemo(()=>({\r\n    total: projects.length,\r\n    ongoing: projects.filter(p=> ['ongoing','on going'].includes((p.status||'').toLowerCase())).length,\r\n    completed: projects.filter(p=> (p.status||'').toLowerCase()==='completed').length,\r\n    pending: projects.filter(p=> ['pending','not started'].includes((p.status||'').toLowerCase())).length\r\n  }),[projects]);\r\n\r\n  const statusMeta = (statusRaw='')=>{ const s=statusRaw.toLowerCase(); if(s==='completed') return {color:'#10B981', Icon:FaCheckCircle, label:'Completed'}; if(['ongoing','on going'].includes(s)) return {color:'#3B82F6', Icon:FaClock, label:'Ongoing'}; if(['pending','not started'].includes(s)) return {color:'#F59E0B', Icon:FaClock, label:'Pending'}; return {color:'#6B7280', Icon:FaClock, label: statusRaw || 'Unknown'}; };\r\n\r\n  const Skeleton = ({n=8}) => (<div className={`projects-display ${viewMode}`}>\r\n    {Array.from({length:n}).map((_,i)=>(\r\n      <div key={i} className=\"project-card skeleton\">\r\n        <div className=\"project-image-wrapper shimmer\" />\r\n        <div className=\"project-content\">\r\n          <div className=\"skeleton-line w60\" />\r\n          <div className=\"skeleton-line w40\" />\r\n          <div className=\"skeleton-line w80\" />\r\n          <div className=\"skeleton-line w50\" />\r\n        </div>\r\n      </div>\r\n    ))}\r\n  </div>);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading projects...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-container no-inner-scroll it-projects-page\">\r\n      <AppHeader roleSegment=\"it\" />\r\n      <main className=\"dashboard-main auto-height\">\r\n         {/* Success Message */}\r\n         {showSuccessMessage && (\r\n           <div className=\"success-message\" style={{\r\n             position: 'fixed',\r\n             top: '20px',\r\n             right: '20px',\r\n             background: 'linear-gradient(135deg, #10B981, #059669)',\r\n             color: 'white',\r\n             padding: '15px 20px',\r\n             borderRadius: '8px',\r\n             boxShadow: '0 4px 12px rgba(16, 185, 129, 0.3)',\r\n             zIndex: 1000,\r\n             maxWidth: '400px',\r\n             fontSize: '14px',\r\n             lineHeight: '1.4'\r\n           }}>\r\n             <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n               <FaCheckCircle style={{ fontSize: '18px' }} />\r\n               <span>{successMessage}</span>\r\n             </div>\r\n           </div>\r\n         )}\r\n         \r\n         <div className=\"projects-container projects-light\">\r\n          <div className=\"page-header enhanced\">\r\n            <div className=\"page-title-section\">\r\n              <h1 className=\"page-title\">Projects</h1>\r\n              <p className=\"page-subtitle\">System-wide project management</p>\r\n            </div>\r\n            <div className=\"page-actions\">\r\n              <button className=\"add-project-btn\" onClick={openCreate} aria-label=\"Create Project\"><FaPlus/><span>New Project</span></button>\r\n              <button className=\"export-btn\" onClick={()=>setShowExportModal(true)} aria-label=\"Export Projects\"><FaDownload/><span>Export</span></button>\r\n              <div className=\"search-container\">\r\n                <FaSearch className=\"search-icon\" />\r\n                <input value={searchTerm} onChange={e=>setSearchTerm(e.target.value)} placeholder=\"Search by name, location, manager...\" className=\"search-input\" />\r\n              </div>\r\n              <div className=\"view-mode-container\">\r\n                <button aria-label=\"Grid view\" className={`view-mode-btn ${viewMode==='grid'?'active':''}`} onClick={()=>setViewMode('grid')}><FaTh/></button>\r\n                <button aria-label=\"List view\" className={`view-mode-btn ${viewMode==='list'?'active':''}`} onClick={()=>setViewMode('list')}><FaList/></button>\r\n              </div>\r\n              <div className=\"sort-container\">\r\n                <select value={sortBy} onChange={e=>setSortBy(e.target.value)} className=\"sort-select\">\r\n                  <option value=\"name\">Name</option>\r\n                  <option value=\"location\">Location</option>\r\n                  <option value=\"manager\">Manager</option>\r\n                  <option value=\"status\">Status</option>\r\n                  <option value=\"startDate\">Start Date</option>\r\n                </select>\r\n                <button aria-label=\"Toggle sort order\" className=\"sort-order-btn\" onClick={()=>setSortOrder(o=>o==='asc'?'desc':'asc')}>{sortOrder==='asc'? <FaChevronUp/> : <FaChevronDown/>}</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"filter-bar below-header\">\r\n            <button className={`filter-chip ${filter==='all'?'active':''}`} onClick={()=>setFilter('all')}>All <span className=\"badge\">{counts.total}</span></button>\r\n            <button className={`filter-chip ${filter==='ongoing'?'active':''}`} onClick={()=>setFilter('ongoing')}>Ongoing <span className=\"badge\">{counts.ongoing}</span></button>\r\n            <button className={`filter-chip ${filter==='completed'?'active':''}`} onClick={()=>setFilter('completed')}>Completed <span className=\"badge\">{counts.completed}</span></button>\r\n            <button className={`filter-chip ${filter==='pending'?'active':''}`} onClick={()=>setFilter('pending')}>Pending <span className=\"badge\">{counts.pending}</span></button>\r\n          </div>\r\n\r\n          {/* Error State */}\r\n          {error && (\r\n            <div className=\"error-state\">\r\n              <FaClock />\r\n              <span>{error}</span>\r\n              <button onClick={() => window.location.reload()} className=\"retry-btn\">\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {!error && loading && <Skeleton n={8} />}\r\n          {!error && !loading && (\r\n            <div className={`projects-display ${viewMode}`}>\r\n              {paginatedProjects.length===0 && (\r\n                <div className=\"empty-state full\">\r\n                  <FaProjectDiagram size={42}/>\r\n                  <h3>No projects found</h3>\r\n                  <p>{searchTerm||filter!=='all' ? 'Adjust search or filters.' : 'No projects available.'}</p>\r\n                </div>\r\n              )}\r\n              {paginatedProjects.map(project=>{ const meta=statusMeta(project.status); return (\r\n                <div key={project._id} className={`project-card ${viewMode}`} role=\"button\" tabIndex={0} onKeyDown={e=>{ if(e.key==='Enter') navigate(`/it/projects/${project._id}`); }}>\r\n                  <div className=\"project-image-wrapper\">\r\n                    <img loading=\"lazy\" src={project.photos?.[0] || 'https://placehold.co/640x360?text=No+Photo'} alt={project.projectName} className=\"project-image\" />\r\n                    <div className=\"status-badge\" style={{backgroundColor:meta.color}}><meta.Icon size={12}/><span>{meta.label}</span></div>\r\n                    <div className=\"project-actions\">\r\n                      <button className=\"action-btn view-btn\" onClick={(e)=>{e.stopPropagation();navigate(`/it/projects/${project._id}`);}} title=\"View\"><FaEye/></button>\r\n                      <button className=\"action-btn edit-btn\" onClick={(e)=>{e.stopPropagation();openEdit(project);}} title=\"Edit\"><FaEdit/></button>\r\n                      <button className=\"action-btn audit-btn\" onClick={(e)=>{e.stopPropagation();loadAudit(project._id);}} title=\"Audit\">🕑</button>\r\n                      <button className=\"action-btn delete-btn\" onClick={(e)=>{e.stopPropagation();requestDelete(project);}} title=\"Delete\"><FaTrash/></button>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"project-content\">\r\n                    <h3 className=\"project-name clamp\">{project.projectName||'Untitled'}</h3>\r\n                    <div className=\"project-location\"><FaMapMarkerAlt/><span>{project.location?.name || 'No Location'}</span></div>\r\n                    <ul className=\"meta-list\">\r\n                      <li><FaUserTie/><span>{project.projectmanager?.name||'Unassigned'}</span></li>\r\n                      <li><FaBuilding/><span>{project.contractor||'No Contractor'}</span></li>\r\n                      <li><FaCalendarAlt/><span>{project.startDate && project.endDate ? `${new Date(project.startDate).toLocaleDateString()} - ${new Date(project.endDate).toLocaleDateString()}` : (project.startDate? new Date(project.startDate).toLocaleDateString(): 'No timeline')}</span></li>\r\n                      <li><FaUsersIcon/><span>{Array.isArray(project.manpower)&&project.manpower.length>0? `${project.manpower.length} manpower`:'No manpower'}</span></li>\r\n                      {project.budget && <li><FaMoneyBillWave/><span>{new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(project.budget)}</span></li>}\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              ); })}\r\n            </div>\r\n          )}\r\n          {paginatedProjects.length>0 && !loading && (\r\n            <div className=\"pagination-bar\">\r\n              <div className=\"pagination-left\">\r\n                <span className=\"pagination-info\">Showing {(currentPage-1)*pageSize + 1}-{Math.min(currentPage*pageSize,totalItems)} of {totalItems}</span>\r\n                <label className=\"page-size-select-label\"><span>Per page:</span>\r\n                  <select value={pageSize} onChange={e=>{ setPageSize(parseInt(e.target.value)||12); setPage(1); }} className=\"page-size-select\">{[6,12,18,24,36].map(sz=> <option key={sz} value={sz}>{sz}</option>)}</select>\r\n                </label>\r\n              </div>\r\n              <div className=\"pagination-pages\">\r\n                <button disabled={currentPage===1} onClick={()=>setPage(p=>Math.max(1,p-1))} className=\"page-btn\" aria-label=\"Previous page\">‹</button>\r\n                {Array.from({length: totalPages}).map((_,i)=>{ const pageNumber=i+1; const show= pageNumber===1 || pageNumber===totalPages || Math.abs(pageNumber-currentPage)<=1; if(!show){ if(pageNumber===2 && currentPage>3) return <span key=\"start-ellipsis\" className=\"ellipsis\">…</span>; if(pageNumber===totalPages-1 && currentPage<totalPages-2) return <span key=\"end-ellipsis\" className=\"ellipsis\">…</span>; return null;} return (<button key={pageNumber} className={`page-btn ${pageNumber===currentPage?'active':''}`} onClick={()=>setPage(pageNumber)} aria-current={pageNumber===currentPage? 'page': undefined}>{pageNumber}</button>); })}\r\n                <button disabled={currentPage===totalPages} onClick={()=>setPage(p=>Math.min(totalPages,p+1))} className=\"page-btn\" aria-label=\"Next page\">›</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      {/* Modals */}\r\n      {showForm && (\r\n        <div className=\"modal-overlay\" onClick={e=>{ if(e.target.classList.contains('modal-overlay')) setShowForm(false);}}>\r\n          <div className=\"modal-card large\" style={{maxWidth:900}}>\r\n            <h2 style={{marginTop:0}}>{editingId?'Edit Project':'Create Project'}</h2>\r\n            {validationErrors.length>0 && <div className=\"alert error\" style={{marginBottom:'0.5rem'}}>{validationErrors.map((er,i)=><div key={i}>{er}</div>)}</div>}\r\n            <form onSubmit={submitForm} className=\"grid-2col gap-md\" style={{maxHeight:'70vh',overflow:'auto',paddingRight:8,gridTemplateColumns: editingId? '1fr 1fr' : '1fr 1fr 1fr'}}>\r\n              {/* Left: Core (row 1, col 1) */}\r\n              <fieldset className=\"section\" style={{gridColumn:'1 / 2'}}>\r\n                <legend>Core</legend>\r\n                <label>Project Name<input name=\"projectName\" value={formData.projectName} onChange={handleChange} required/></label>\r\n                <label>Contractor<input name=\"contractor\" value={formData.contractor} onChange={handleChange}/></label>\r\n                <label>Budget\r\n                  <input\r\n                    name=\"budget\"\r\n                    type=\"text\"\r\n                    inputMode=\"decimal\"\r\n                    min=\"0\"\r\n                    value={budgetDisplay}\r\n                    onChange={handleBudgetChange}\r\n                    placeholder=\"0.00\"\r\n                    autoComplete=\"off\"\r\n                  />\r\n                </label>\r\n                <label>Status<select name=\"status\" value={formData.status} onChange={handleChange}><option value=\"Ongoing\">Ongoing</option><option value=\"Completed\">Completed</option></select></label>\r\n                <label>Location<select name=\"location\" value={formData.location} onChange={handleChange} required><option value=\"\">-- select --</option>{allLocations.map(l=> <option key={l._id} value={l._id}>{l.name} {l.region?`(${l.region})`:''}</option>)}</select></label>\r\n                <label>Start Date<input name=\"startDate\" type=\"date\" value={formData.startDate} onChange={handleChange} required/></label>\r\n                <label>End Date<input name=\"endDate\" type=\"date\" value={formData.endDate} onChange={handleChange} required/></label>\r\n              </fieldset>\r\n              {/* Right: Assignments (row 1, col 2) */}\r\n              <fieldset className=\"section\" style={{gridColumn:'2 / 3'}}>\r\n                <legend>Assignments</legend>\r\n                <label>Project Manager<select name=\"projectmanager\" value={formData.projectmanager} onChange={handleChange}><option value=\"\">-- none --</option>{(availableRoleUsers['Project Manager']||[]).map(u=> <option key={u._id} value={u._id}>{u.name}</option>)}</select></label>\r\n                <label>Area Manager<select name=\"areamanager\" value={formData.areamanager} onChange={handleChange}><option value=\"\">-- none --</option>{(availableRoleUsers['Area Manager']||[]).map(u=> <option key={u._id} value={u._id}>{u.name}</option>)}</select></label>\r\n                {/* Area selection removed per request */}\r\n                <label>PIC(s)<MultiBox name=\"pic\" values={formData.pic} options={availableRoleUsers['Person in Charge']||[]} userLookup={userLookup} onChange={vals=>setFormData(f=>({...f,pic:vals}))}/></label>\r\n                <label>Staff<MultiBox name=\"staff\" values={formData.staff} options={availableRoleUsers['Staff']||[]} userLookup={userLookup} onChange={vals=>setFormData(f=>({...f,staff:vals}))}/></label>\r\n                <label>HR - Site<MultiBox name=\"hrsite\" values={formData.hrsite} options={availableRoleUsers['HR - Site']||[]} userLookup={userLookup} onChange={vals=>setFormData(f=>({...f,hrsite:vals}))}/></label>\r\n                <div style={{marginBottom:12}}>\r\n                  <label htmlFor=\"manpower-multibox\" style={{display:'block',fontWeight:500,marginBottom:4}}>Manpower</label>\r\n                  <div style={{ display: 'flex', gap: '8px', marginBottom: '8px' }}>\r\n                    <input\r\n                      id=\"csvUpload\"\r\n                      type=\"file\"\r\n                      accept=\".csv\"\r\n                      style={{ display: 'none' }}\r\n                      onChange={handleCSVUpload}\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => document.getElementById('csvUpload').click()}\r\n                      disabled={csvUploading}\r\n                      style={{\r\n                        padding: '4px 8px',\r\n                        fontSize: '12px',\r\n                        backgroundColor: '#3b82f6',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '4px',\r\n                        cursor: csvUploading ? 'not-allowed' : 'pointer',\r\n                        opacity: csvUploading ? 0.6 : 1\r\n                      }}\r\n                    >\r\n                      {csvUploading ? 'Uploading...' : 'Import CSV'}\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        const mode = editingId ? 'Edit' : 'Create';\r\n                        alert(`CSV Format for ${mode} Project:\\n\\nRequired columns:\\n- Name (required)\\n- Position (required)\\n\\nOptional columns:\\n- Status (defaults to \"Active\" for Edit, must be \"unassigned\" for Create)\\n- Project (must be empty for Create mode)\\n\\nRules:\\n• ${editingId ? 'New manpower will be added to existing project roster' : 'All persons must have status \"unassigned\" and no project assignments'}\\n• Duplicate names/positions are not allowed\\n• New manpower will be created and assigned to this project\\n\\nExample:\\nName,Position,Status,Project\\nJohn Doe,Engineer,${editingId ? 'Active' : 'unassigned'},\\nJane Smith,Manager,${editingId ? 'Active' : 'unassigned'},\\nMike Johnson,Technician,${editingId ? 'Active' : 'unassigned'},`);\r\n                      }}\r\n                      style={{\r\n                        padding: '4px 8px',\r\n                        fontSize: '12px',\r\n                        backgroundColor: '#17a2b8',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '4px',\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    >\r\n                      ?\r\n                    </button>\r\n                  </div>\r\n                  {csvError && (\r\n                    <div style={{\r\n                      color: '#dc2626',\r\n                      fontSize: '12px',\r\n                      marginBottom: '8px',\r\n                      padding: '4px 8px',\r\n                      backgroundColor: '#fef2f2',\r\n                      border: '1px solid #fecaca',\r\n                      borderRadius: '4px'\r\n                    }}>\r\n                      {csvError}\r\n                    </div>\r\n                  )}\r\n                  <div id=\"manpower-multibox\">\r\n                    <MultiBox\r\n                      name=\"manpower\"\r\n                      values={formData.manpower}\r\n                      options={allManpower}\r\n                      labelKey=\"name\"\r\n                      idKey=\"_id\"\r\n                      userLookup={userLookup}\r\n                      onChange={vals=>setFormData(f=>({...f,manpower:vals}))}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </fieldset>\r\n              {/* Initial Files (column 3 when creating) */}\r\n              <fieldset className=\"section\" style={{gridColumn:'3 / 4', alignSelf:'start'}}>\r\n                <legend>Initial Files (optional)</legend>\r\n                <div className=\"flex-column gap-sm\">\r\n                  <label className=\"uploader\" style={{display:'flex',flexDirection:'column',gap:4}}>Photos\r\n                    <input type=\"file\" multiple accept=\"image/*\" onChange={e=> setPhotoFiles(Array.from(e.target.files||[]))}/>\r\n                  </label>\r\n                  {photoPreviews.length>0 && <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fill,minmax(70px,1fr))',gap:6,marginTop:6}}>\r\n                    {photoPreviews.map(p=> (\r\n                      <div key={p.url} style={{position:'relative',border:'1px solid #e5e7eb',borderRadius:6,overflow:'hidden',background:'#fafafa'}}>\r\n                        <img src={p.url} alt={p.name} style={{width:'100%',height:60,objectFit:'cover',display:'block'}} />\r\n                        <button type=\"button\" title=\"Remove\" onClick={()=> setPhotoFiles(files=> files.filter(f=>f!==p.file))} style={{position:'absolute',top:2,right:2,background:'rgba(0,0,0,0.55)',color:'#fff',border:'none',borderRadius:4,fontSize:10,padding:'2px 4px',cursor:'pointer'}}>×</button>\r\n                      </div>\r\n                    ))}\r\n                  </div>}\r\n                  <label className=\"uploader\" style={{display:'flex',flexDirection:'column',gap:4,marginTop:10}}>Documents\r\n                    <input type=\"file\" multiple onChange={e=> setDocFiles(Array.from(e.target.files||[]))}/>\r\n                  </label>\r\n                  <label className=\"uploader\" style={{display:'flex',flexDirection:'column',gap:4,marginTop:10}}>Budget PDF(s)\r\n                    <input type=\"file\" multiple accept=\"application/pdf\" onChange={e=> setBudgetFiles(Array.from(e.target.files||[]))}/>\r\n                  </label>\r\n                  {docPreviews.length>0 && <div style={{display:'flex',flexWrap:'wrap',gap:6,marginTop:6}}>\r\n                    {docPreviews.map(d=> (\r\n                      <div key={d.name+Math.random()} style={{display:'flex',alignItems:'center',gap:6,border:'1px solid #e5e7eb',padding:'4px 6px',borderRadius:4,background:'#f8fafc',fontSize:11}}>\r\n                        <span style={{display:'inline-block',minWidth:28,textAlign:'center',background:'#3b82f6',color:'#fff',borderRadius:4,padding:'2px 4px'}}>{d.ext||'DOC'}</span>\r\n                        <span style={{maxWidth:120,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}} title={d.name}>{d.name}</span>\r\n                        <button type=\"button\" onClick={()=> setDocFiles(files=> files.filter(f=>f!==d.file))} style={{background:'transparent',border:'none',color:'#dc2626',cursor:'pointer',fontSize:14,lineHeight:1}}>×</button>\r\n                      </div>\r\n                    ))}\r\n                  </div>}\r\n                  {budgetFiles.length>0 && <div style={{display:'flex',flexWrap:'wrap',gap:6,marginTop:6}}>\r\n                    {budgetFiles.map(f=> (\r\n                      <div key={f.name+Math.random()} style={{display:'flex',alignItems:'center',gap:6,border:'1px solid #e5e7eb',padding:'4px 6px',borderRadius:4,background:'#fffbeb',fontSize:11}}>\r\n                        <span style={{display:'inline-block',minWidth:28,textAlign:'center',background:'#f59e0b',color:'#fff',borderRadius:4,padding:'2px 4px'}}>PDF</span>\r\n                        <span style={{maxWidth:140,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}} title={f.name}>{f.name}</span>\r\n                        <button type=\"button\" onClick={()=> setBudgetFiles(files=> files.filter(x=>x!==f))} style={{background:'transparent',border:'none',color:'#dc2626',cursor:'pointer',fontSize:14,lineHeight:1}}>×</button>\r\n                      </div>\r\n                    ))}\r\n                  </div>}\r\n                </div>\r\n                <small style={{display:'block',marginTop:6}}>{photoFiles.length} photo(s), {docFiles.length} document(s), {budgetFiles.length} budget PDF(s) selected</small>\r\n              </fieldset>\r\n              <div style={{gridColumn:'1 / -1',display:'flex',justifyContent:'flex-end',gap:'0.5rem',marginTop:'0.5rem'}}>\r\n                <button type=\"button\" onClick={()=>setShowForm(false)} disabled={saving}>Cancel</button>\r\n                <button type=\"submit\" disabled={saving}>{saving?'Saving...':'Save Project'}</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Delete Confirmation Modal */}\r\n      {deleteConfirm && (\r\n        <div className=\"modal-overlay\" onClick={e=>{ if(e.target.classList.contains('modal-overlay')) cancelDelete();}}>\r\n          <div className=\"modal-card\" style={{maxWidth:420,textAlign:'center'}}>\r\n            <h2 style={{marginTop:0}}>Delete Project</h2>\r\n            <p style={{fontSize:14,lineHeight:1.4}}>Are you sure you want to permanently delete <strong>{deleteConfirm.name||'this project'}</strong>? This action cannot be undone.</p>\r\n            <div style={{display:'flex',justifyContent:'center',gap:'0.75rem',marginTop:'1rem'}}>\r\n              <button onClick={cancelDelete}>No, Keep</button>\r\n              <button onClick={confirmDelete} style={{background:'#dc2626',color:'#fff'}}>Yes, Delete</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {showAudit && (\r\n        <div className=\"modal-overlay\" onClick={e=>{ if(e.target.classList.contains('modal-overlay')) setShowAudit(false);}}>\r\n          <div className=\"modal-card\" style={{maxWidth:900}}>\r\n            <h2 style={{marginTop:0}}>Audit Trail {auditProjectId && `for ${auditProjectId}`}</h2>\r\n            <button style={{position:'absolute',top:8,right:8}} onClick={()=>setShowAudit(false)}>Close</button>\r\n            {auditLoading && <p>Loading audit logs...</p>}\r\n            {!auditLoading && <div style={{maxHeight:400,overflow:'auto'}}>\r\n              <table className=\"pm-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Time</th>\r\n                    <th>Action</th>\r\n                    <th>User</th>\r\n                    <th>Role</th>\r\n                    <th>Description</th>\r\n                    <th>Changed Fields</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {auditLogs.map(l=> <tr key={l._id}>\r\n                    <td>{new Date(l.timestamp).toLocaleString()}</td>\r\n                    <td>{l.action}</td>\r\n                    <td>{l.performedBy?.name || '—'}</td>\r\n                    <td>{l.performedByRole}</td>\r\n                    <td style={{minWidth:180}}>{l.description}</td>\r\n                    <td style={{minWidth:220}}>\r\n                      {(l.meta?.changedFields||[]).length===0 && '—'}\r\n                      {(l.meta?.changedFields||[]).map((c,i)=><div key={i} style={{marginBottom:2}}><strong>{c.field}:</strong> <span style={{color:'#888'}}>{JSON.stringify(c.before)}</span> → <span>{JSON.stringify(c.after)}</span></div>)}\r\n                    </td>\r\n                  </tr>)}\r\n                  {auditLogs.length===0 && !auditLoading && <tr><td colSpan={6} style={{textAlign:'center'}}>No logs</td></tr>}\r\n                </tbody>\r\n              </table>\r\n            </div>}\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Export Modal */}\r\n      {showExportModal && (\r\n        <div className=\"modal-overlay\" onClick={e => { if(e.target.classList.contains('modal-overlay')) setShowExportModal(false); }}>\r\n          <div className=\"modal-card\" style={{maxWidth: 600}}>\r\n            <h2 style={{marginTop: 0}}>Export Projects</h2>\r\n            <button style={{position: 'absolute', top: 8, right: 8}} onClick={() => setShowExportModal(false)}>Close</button>\r\n            \r\n            <div className=\"export-filters\">\r\n              <h3>Filter Options</h3>\r\n              \r\n              <div className=\"filter-row\">\r\n                <label>Status Filter:</label>\r\n                <select \r\n                  value={exportFilters.status} \r\n                  onChange={e => setExportFilters(prev => ({...prev, status: e.target.value}))}\r\n                >\r\n                  <option value=\"all\">All Projects</option>\r\n                  <option value=\"ongoing\">Ongoing Only</option>\r\n                  <option value=\"completed\">Completed Only</option>\r\n                  <option value=\"pending\">Pending Only</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"filter-row\">\r\n                <label>Search:</label>\r\n                <input \r\n                  type=\"text\" \r\n                  placeholder=\"Search by name, location, PM, or contractor...\"\r\n                  value={exportFilters.search}\r\n                  onChange={e => setExportFilters(prev => ({...prev, search: e.target.value}))}\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"filter-row\">\r\n                <label>Date Range:</label>\r\n                <div className=\"date-inputs\">\r\n                  <input \r\n                    type=\"date\" \r\n                    placeholder=\"From Date\"\r\n                    value={exportFilters.dateFrom}\r\n                    onChange={e => setExportFilters(prev => ({...prev, dateFrom: e.target.value}))}\r\n                  />\r\n                  <span>to</span>\r\n                  <input \r\n                    type=\"date\" \r\n                    placeholder=\"To Date\"\r\n                    value={exportFilters.dateTo}\r\n                    onChange={e => setExportFilters(prev => ({...prev, dateTo: e.target.value}))}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"filter-summary\">\r\n                <h4>Export Summary:</h4>\r\n                <p>Status: {exportFilters.status === 'all' ? 'All Projects' : exportFilters.status.charAt(0).toUpperCase() + exportFilters.status.slice(1)}</p>\r\n                {exportFilters.search && <p>Search: \"{exportFilters.search}\"</p>}\r\n                {exportFilters.dateFrom && <p>From Date: {exportFilters.dateFrom}</p>}\r\n                {exportFilters.dateTo && <p>To Date: {exportFilters.dateTo}</p>}\r\n                <p>Matching Projects: {exportPreview.length}</p>\r\n                {exportPreview.length>0 && (\r\n                  <div style={{ maxHeight:120, overflowY:'auto', border:'1px solid #e5e7eb', borderRadius:4, padding:6, background:'#f9fafb', fontSize:12 }}>\r\n                    {exportPreview.slice(0,8).map(p => (\r\n                      <div key={p._id} style={{ display:'flex', justifyContent:'space-between', gap:8 }}>\r\n                        <span style={{ flex:1, whiteSpace:'nowrap', overflow:'hidden', textOverflow:'ellipsis' }}>{p.projectName}</span>\r\n                        <span style={{ opacity:.7 }}>{p.status}</span>\r\n                      </div>\r\n                    ))}\r\n                    {exportPreview.length>8 && <div style={{ textAlign:'center', fontStyle:'italic', marginTop:4 }}>+ {exportPreview.length-8} more…</div>}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            \r\n            <div style={{display: 'flex', justifyContent: 'flex-end', gap: '0.5rem', marginTop: '1rem'}}>\r\n              <button onClick={() => setShowExportModal(false)}>Cancel</button>\r\n              <button onClick={exportProjects} disabled={exportPreview.length===0} style={{background: exportPreview.length? '#3b82f6':'#94a3b8', color: 'white'}}>\r\n                Export to PDF\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nfunction MultiBox({ name, values, options, onChange, labelKey='name', idKey='_id', userLookup }) {\r\n  const [input,setInput] = React.useState('');\r\n  const filtered = (options||[]).filter(o=> (o[labelKey]||'').toLowerCase().includes(input.toLowerCase()));\r\n  function toggle(id){ onChange(values.includes(id)? values.filter(v=>v!==id) : [...values,id]); }\r\n  return <div className=\"multibox\">\r\n    <input placeholder=\"Filter...\" value={input} onChange={e=>setInput(e.target.value)} />\r\n    <div className=\"box-list\">\r\n      {filtered.map(o=> <div key={o[idKey]} className={values.includes(o[idKey])? 'box-item selected':'box-item'} onClick={()=>toggle(o[idKey])}>{o[labelKey]||o[idKey]}</div>)}\r\n      {filtered.length===0 && (options||[]).length>0 && <div className=\"empty\">No matches</div>}\r\n      {(options||[]).length===0 && <div className=\"empty\">Loading...</div>}\r\n    </div>\r\n    <div className=\"chips\">\r\n      {values.map(v=> {\r\n        const obj = options.find(o=>o[idKey]===v);\r\n  let display = obj ? (obj[labelKey]) : (userLookup ? userLookup[v] : null);\r\n  if(!display && obj && obj.position) display = obj.position;\r\n  return <span key={v} className=\"chip\" onClick={()=>toggle(v)}>{display || v} ×</span>;\r\n      })}\r\n    </div>\r\n  </div>;\r\n}\r\n","import jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\n// -------- helpers (duplicated minimal set from projectPdf.js) --------\r\nasync function loadImageDataURLWithSize(url) {\r\n  return new Promise((resolve) => {\r\n    if (!url) return resolve(null);\r\n    try {\r\n      const img = new Image();\r\n      img.crossOrigin = 'anonymous';\r\n      img.onload = () => {\r\n        const c = document.createElement('canvas');\r\n        c.width = img.naturalWidth;\r\n        c.height = img.naturalHeight;\r\n        c.getContext('2d').drawImage(img, 0, 0);\r\n        resolve({ dataUrl: c.toDataURL('image/png'), w: img.naturalWidth, h: img.naturalHeight });\r\n      };\r\n      img.onerror = () => resolve(null);\r\n      img.src = url;\r\n    } catch {\r\n      resolve(null);\r\n    }\r\n  });\r\n}\r\n\r\nfunction fitInside(w, h, maxW, maxH) {\r\n  if (!w || !h) return { w: maxW, h: maxH };\r\n  const r = Math.min(maxW / w, maxH / h);\r\n  return { w: Math.round(w * r), h: Math.round(h * r) };\r\n}\r\n\r\nasync function loadFontFromPublic(doc, fileName, family, style) {\r\n  try {\r\n    const base = process.env.PUBLIC_URL || '';\r\n    const url = `${base}/fonts/${fileName}`;\r\n    const res = await fetch(url, { cache: 'no-store' });\r\n    if (!res.ok) return false;\r\n    const buf = await res.arrayBuffer();\r\n    const b64 = btoa(String.fromCharCode(...new Uint8Array(buf)));\r\n    doc.addFileToVFS(fileName, b64);\r\n    doc.addFont(fileName, family, style);\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction fontUsable(doc, family, style = 'normal') {\r\n  try {\r\n    doc.setFont(family, style);\r\n    doc.getTextWidth('test');\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction formatDateTime(dt = new Date()) {\r\n  try {\r\n    return new Date(dt).toLocaleString();\r\n  } catch {\r\n    return String(dt);\r\n  }\r\n}\r\n\r\nfunction buildFiltersSummary(filters = {}) {\r\n  const parts = [];\r\n  if (filters.searchTerm) parts.push(`Search: \"${filters.searchTerm}\"`);\r\n  if (filters.sortOption) parts.push(`Sort: ${filters.sortOption}`);\r\n  return parts.join(' | ');\r\n}\r\n\r\nfunction buildFileName(prefix = 'Accounts-Export') {\r\n  const d = new Date();\r\n  const pad = (n) => String(n).padStart(2, '0');\r\n  const name = `${d.getFullYear()}${pad(d.getMonth() + 1)}${pad(d.getDate())}_${pad(d.getHours())}${pad(d.getMinutes())}`;\r\n  return `${prefix}-${name}.pdf`;\r\n}\r\n\r\nexport async function exportAccountsPdf(rows = [], options = {}) {\r\n  const {\r\n    companyName = 'FadzTrack',\r\n    logoPath = `${process.env.PUBLIC_URL || ''}/images/Fadz-logo.png`,\r\n    exporterName = 'Unknown',\r\n    exporterRole = '',\r\n    filters = {},\r\n  } = options;\r\n\r\n  const doc = new jsPDF({ unit: 'pt', format: 'a4' });\r\n\r\n  // Fonts\r\n  const FAMILY = 'NotoSans';\r\n  const regOk = await loadFontFromPublic(doc, 'NotoSans-Regular.ttf', FAMILY, 'normal');\r\n  const boldOk = await loadFontFromPublic(doc, 'NotoSans-Bold.ttf', FAMILY, 'bold');\r\n  const canUseRegular = regOk && fontUsable(doc, FAMILY, 'normal');\r\n  const canUseBold = boldOk && fontUsable(doc, FAMILY, 'bold');\r\n  const bodyFont = canUseRegular ? FAMILY : 'helvetica';\r\n  const headStyle = canUseBold ? 'bold' : 'normal';\r\n\r\n  const marginX = 40;\r\n  let y = 40;\r\n\r\n  // Header: logo + company name + context\r\n  const logo = await loadImageDataURLWithSize(logoPath);\r\n  let titleX = marginX;\r\n  if (logo?.dataUrl) {\r\n    const { w: drawW, h: drawH } = fitInside(logo.w, logo.h, 180, 60); // increased size\r\n    doc.addImage(logo.dataUrl, 'PNG', marginX, y - 12, drawW, drawH, undefined, 'FAST');\r\n    titleX = marginX + drawW + 16; // more spacing\r\n  }\r\n\r\n  doc.setFont(bodyFont, headStyle);\r\n  doc.setFontSize(20); // increased font size\r\n  doc.setTextColor(20);\r\n  doc.text(String(companyName), titleX, y + 16);\r\n\r\n  doc.setFont(bodyFont, 'normal');\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(90);\r\n  doc.text('Accounts Export', titleX, y + 26);\r\n\r\n  // Divider\r\n  doc.setDrawColor(220);\r\n  doc.setLineWidth(1);\r\n  doc.line(marginX, y + 38, 595 - marginX, y + 38);\r\n  y += 54;\r\n\r\n  // Metadata block\r\n  doc.setFont(bodyFont, headStyle);\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(20);\r\n  doc.text('Export Details', marginX, y);\r\n\r\n  doc.setFont(bodyFont, 'normal');\r\n  doc.setTextColor(60);\r\n  const meta = [\r\n    `Exported by: ${exporterName}${exporterRole ? ` (${exporterRole})` : ''}`,\r\n    `Date exported: ${formatDateTime(new Date())}`,\r\n  ];\r\n  const filterSummary = buildFiltersSummary(filters);\r\n  if (filterSummary) meta.push(`Filters: ${filterSummary}`);\r\n\r\n  let metaY = y + 16;\r\n  meta.forEach((line) => {\r\n    doc.text(line, marginX, metaY);\r\n    metaY += 16;\r\n  });\r\n\r\n  // Table\r\n  const tableStartY = metaY + 6;\r\n  const head = [['Name', 'Position', 'Phone', 'Email', 'Status']];\r\n  const body = rows.map((r) => [\r\n    String(r.name || ''),\r\n    String(r.position || ''),\r\n    String(r.phone || ''),\r\n    String(r.email || ''),\r\n    String(r.status || ''),\r\n  ]);\r\n\r\n  autoTable(doc, {\r\n    startY: tableStartY,\r\n    head,\r\n    body,\r\n    styles: { font: bodyFont, fontStyle: 'normal', fontSize: 11, cellPadding: 6, halign: 'left' },\r\n    headStyles: { font: bodyFont, fontStyle: headStyle, fillColor: [59, 130, 246], textColor: 255 },\r\n    theme: 'grid',\r\n    margin: { left: marginX, right: marginX },\r\n    didDrawPage: (data) => {\r\n      // Footer per page\r\n      const str = `Generated: ${formatDateTime(new Date())}`;\r\n      doc.setFont(bodyFont, 'normal');\r\n      doc.setFontSize(9);\r\n      doc.setTextColor(120);\r\n      doc.text(str, marginX, 842 - 24);\r\n\r\n      const page = doc.getCurrentPageInfo().pageNumber || 1;\r\n      const pages = doc.getNumberOfPages();\r\n      const label = `Page ${page} of ${pages}`;\r\n      const w = doc.getTextWidth(label);\r\n      doc.text(label, 595 - marginX - w, 842 - 24);\r\n    },\r\n  });\r\n\r\n  doc.save(buildFileName());\r\n}\r\n\r\n\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport { io } from 'socket.io-client';\r\nimport { SOCKET_URL, SOCKET_PATH } from '../../utils/socketConfig';\r\nimport { exportAccountsPdf } from '../../utils/accountsPdf';\r\nimport '../style/it_style/It_Dash.css';\r\nimport { FaFilePdf } from 'react-icons/fa';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst ItDash = () => {\r\n  const [user, setUser] = useState(() => {\r\n      const stored = localStorage.getItem('user');\r\n      return stored ? JSON.parse(stored) : null;\r\n    });\r\n  const [token, setToken] = useState(() => localStorage.getItem('token') || \"\");\r\n  const [userId, setUserId] = useState(() => user?._id);\r\n\r\n  const [accounts, setAccounts] = useState([]);\r\n  const socketRef = useRef(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [sortOption, setSortOption] = useState('Newest');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [showCreateAccount, setShowCreateAccount] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [editingAccount, setEditingAccount] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [resendLoading, setResendLoading] = useState(false);\r\n  const [resendError, setResendError] = useState('');\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [pendingStatusChange, setPendingStatusChange] = useState(null); // { account, newStatus }\r\n  const navigate = useNavigate();\r\n  // Unified header removes need for local profile menu / collapse state\r\n\r\n  const itemsPerPage = 10;\r\n\r\n  const [newAccount, setNewAccount] = useState({\r\n    name: '',\r\n    position: '',\r\n    phone: '',\r\n    email: ''\r\n  });\r\n  // Bulk upload state\r\n  const [bulkUploading, setBulkUploading] = useState(false);\r\n  const [bulkResults, setBulkResults] = useState(null); // { summary, results }\r\n  const [bulkFileName, setBulkFileName] = useState('');\r\n  const [bulkDryRun, setBulkDryRun] = useState(true);\r\n  const [bulkProgress, setBulkProgress] = useState({ processed:0, total:0, percent:0, id:null });\r\n\r\n  // Listen for bulk progress socket events\r\n  useEffect(()=> {\r\n    if (!socketRef.current) return; // socket already initialized earlier\r\n    const handler = (payload) => {\r\n      if (payload.progressId && payload.progressId === bulkProgress.id) {\r\n        setBulkProgress(prev=> ({ ...prev, processed: payload.processed, total: payload.total, percent: payload.percent }));\r\n      }\r\n    };\r\n    socketRef.current.on('bulkRegisterProgress', handler);\r\n    return ()=> { socketRef.current && socketRef.current.off('bulkRegisterProgress', handler); };\r\n  }, [bulkProgress.id]);\r\n\r\n  const [userName, setUserName] = useState(user?.name || '');\r\n  const [userRole, setUserRole] = useState(user?.role || '');\r\n  \r\n    useEffect(() => {\r\n      setUserName(user?.name || 'ALECK');\r\n      setUserRole(user?.role || '');\r\n    }, [user]);\r\n\r\n  const validateField = (name, value) => {\r\n    let errorMsg = '';\r\n\r\n    switch (name) {\r\n      case 'name':\r\n        if (!value.trim()) errorMsg = 'Name is required';\r\n        break;\r\n      case 'position':\r\n        if (!value.trim()) errorMsg = 'Position is required';\r\n        break;\r\n      case 'phone':\r\n        // Be lenient while typing: only enforce full rule at 11 digits; always require starting with 09\r\n        if (!value) {\r\n          errorMsg = '';\r\n        } else if (!value.startsWith('09')) {\r\n          errorMsg = 'Phone must start with 09 and be 11 digits';\r\n        } else if (value.length < 11) {\r\n          errorMsg = '';\r\n        } else if (!/^09\\d{9}$/.test(value)) {\r\n          errorMsg = 'Phone must start with 09 and be 11 digits';\r\n        }\r\n        break;\r\n      case 'email':\r\n        if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) errorMsg = 'Invalid email';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    setErrors((prev) => ({ ...prev, [name]: errorMsg }));\r\n  };\r\n\r\n  // Removed legacy header scroll/click handlers (handled by AppHeader styling if needed)\r\n\r\nconst handleLogout = () => {\r\n  const token = localStorage.getItem('token');\r\n  api.post('/auth/logout', {}, {\r\n    headers: { Authorization: `Bearer ${token}` }\r\n  }).finally(() => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/');\r\n  });\r\n};\r\n\r\n  useEffect(() => {\r\n    const fetchAccounts = async () => {\r\n      try {\r\n        const response = await api.get('/auth/Users');\r\n        const data = response.data;\r\n        const formattedAccounts = data.map(user => ({\r\n          id: user._id,\r\n          name: user.name,\r\n          position: user.role,\r\n          phone: user.phone,\r\n          email: user.email,\r\n          // Use split fields when available; fall back to legacy status\r\n          accountStatus: user.accountStatus || (user.status === 'Active' ? 'Active' : 'Inactive'),\r\n          presence: user.presenceStatus || 'offline'\r\n        }));\r\n        setAccounts(formattedAccounts);\r\n        if (!selectedUser && formattedAccounts.length > 0) {\r\n          setSelectedUser(formattedAccounts[0]);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching accounts:', error);\r\n      }\r\n    };\r\n    fetchAccounts();\r\n  }, [selectedUser]);\r\n\r\n  // Realtime presence + lifecycle updates via socket.io\r\n  useEffect(() => {\r\n    // Only connect once\r\n    if (socketRef.current) return;\r\n    try {\r\n  // Use centralized socket config\r\n  const s = io(SOCKET_URL, { path: SOCKET_PATH, transports: ['websocket','polling'], auth: { userId: userId || (user && user._id) } });\r\n      socketRef.current = s;\r\n      // Lifecycle status changed (Active/Inactive)\r\n      s.on('userStatusChanged', ({ userId, status }) => {\r\n        const normalized = status === 'Active' ? 'Active' : 'Inactive';\r\n        setAccounts(prev => prev.map(a => a.id === userId ? { ...a, accountStatus: normalized } : a));\r\n        setSelectedUser(prev => prev && prev.id === userId ? { ...prev, accountStatus: normalized } : prev);\r\n      });\r\n      // Presence snapshot and live updates\r\n      s.on('presenceSnapshot', (ids = []) => {\r\n        const set = new Set((ids || []).map(String));\r\n        setAccounts(prev => prev.map(a => ({ ...a, presence: set.has(String(a.id)) ? 'online' : 'offline' })));\r\n        setSelectedUser(prev => prev ? { ...prev, presence: set.has(String(prev.id)) ? 'online' : 'offline' } : prev);\r\n      });\r\n      s.on('userOnline', (userId) => {\r\n        const uid = String(userId);\r\n        setAccounts(prev => prev.map(a => String(a.id) === uid ? { ...a, presence: 'online' } : a));\r\n        setSelectedUser(prev => prev && String(prev.id) === uid ? { ...prev, presence: 'online' } : prev);\r\n      });\r\n      s.on('userOffline', (userId) => {\r\n        const uid = String(userId);\r\n        setAccounts(prev => prev.map(a => String(a.id) === uid ? { ...a, presence: 'offline' } : a));\r\n        setSelectedUser(prev => prev && String(prev.id) === uid ? { ...prev, presence: 'offline' } : prev);\r\n      });\r\n      s.on('disconnect', () => {/* silent */});\r\n    } catch (e) {\r\n      console.error('Socket init failed (IT dashboard):', e);\r\n    }\r\n    return () => {\r\n      try { socketRef.current && socketRef.current.disconnect(); } catch {}\r\n      socketRef.current = null;\r\n    };\r\n  }, []);\r\n\r\n  // Reset to first page whenever search or sort changes to avoid empty pages\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [searchTerm, sortOption]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    let fieldValue = value;\r\n\r\n    if (name === 'phone') {\r\n      // Keep only digits, preserve leading zeros, enforce max length 11\r\n      fieldValue = (value || '').replace(/\\D/g, '').slice(0, 11);\r\n      // If user started typing and it doesn't start with 09, guide them\r\n      // but don't auto-prepend; validation will handle error\r\n    }\r\n    setNewAccount(prev => ({ ...prev, [name]: fieldValue }));\r\n    validateField(name, fieldValue);\r\n  };\r\n\r\n  const isFormValid = () => {\r\n    const fieldNames = ['name', 'position', 'phone', 'email'];\r\n    const nextErrors = { ...errors };\r\n    let valid = true;\r\n    for (const field of fieldNames) {\r\n      const value = newAccount[field] ?? '';\r\n      let msg = '';\r\n      if (field === 'name' && !value.trim()) msg = 'Name is required';\r\n      if (field === 'position' && !value.trim()) msg = 'Position is required';\r\n      if (field === 'phone' && !/^09\\d{9}$/.test(value)) msg = 'Phone must start with 09 and be 11 digits';\r\n      if (field === 'email' && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) msg = 'Invalid email';\r\n      nextErrors[field] = msg;\r\n      if (msg) valid = false;\r\n    }\r\n    setErrors(nextErrors);\r\n    return valid;\r\n  };\r\n\r\n  const handleSaveAccount = async () => {\r\n    if (!isFormValid()) {\r\n      toast.error('Please correct the errors before submitting');\r\n      return;\r\n    }\r\n    try {\r\n      let response, data;\r\n  if (isEditing) {\r\n        // Update user info WITHOUT password\r\n        response = await api.put(`/auth/users/${editingAccount.id}`, {\r\n          name: newAccount.name,\r\n          role: newAccount.position,\r\n          phone: newAccount.phone,\r\n          email: newAccount.email,\r\n        });\r\n        data = response.data;\r\n        setAccounts(accounts.map(account =>\r\n          account.id === editingAccount.id\r\n            ? {\r\n                ...account,\r\n                name: data.user?.name ?? newAccount.name,\r\n                position: data.user?.role ?? newAccount.position,\r\n                phone: data.user?.phone ?? newAccount.phone,\r\n                email: data.user?.email ?? newAccount.email,\r\n        accountStatus: data.user?.accountStatus || (data.user?.status === 'Active' ? 'Active' : 'Inactive') || account.accountStatus\r\n              }\r\n            : account\r\n        ));\r\n        toast.success('Account updated successfully');\r\n      } else {\r\n        // Create user and send activation link automatically\r\n        response = await api.post('/auth/register', {\r\n          name: newAccount.name,\r\n          role: newAccount.position,\r\n          phone: newAccount.phone,\r\n          email: newAccount.email\r\n        });\r\n        data = response.data;\r\n        setAccounts([...accounts, {\r\n          id: data.user._id,\r\n          name: data.user.name,\r\n          position: data.user.role,\r\n          phone: data.user.phone,\r\n          email: data.user.email,\r\n      accountStatus: data.user.accountStatus || (data.user.status === 'Active' ? 'Active' : 'Inactive'),\r\n      presence: data.user.presenceStatus || 'offline'\r\n        }]);\r\n        toast.success('Account created & activation email sent');\r\n      }\r\n\r\n      setNewAccount({\r\n        name: '',\r\n        position: '',\r\n        phone: '',\r\n        email: ''\r\n      });\r\n      setShowCreateAccount(false);\r\n      setIsEditing(false);\r\n      setEditingAccount(null);\r\n      setResendError('');\r\n    } catch (error) {\r\n      console.error('Error saving account:', error);\r\n      toast.error('Failed to save account');\r\n    }\r\n  };\r\n\r\n  const handleResendResetLink = async () => {\r\n    if (!newAccount.email) {\r\n      setResendError('Email is required to resend reset link.');\r\n      return;\r\n    }\r\n    setResendError('');\r\n    setResendLoading(true);\r\n    try {\r\n      await api.post('/auth/reset-password-request', { email: newAccount.email });\r\n      toast.success('Password reset link sent');\r\n    } catch (error) {\r\n      console.error('Error resending reset link:', error);\r\n      setResendError('Failed to resend password reset link.');\r\n    } finally {\r\n      setResendLoading(false);\r\n    }\r\n  };\r\n  const openStatusChangeConfirm = (account) => {\r\n    const newStatus = account.accountStatus === 'Active' ? 'Inactive' : 'Active';\r\n    setPendingStatusChange({ account, newStatus });\r\n  };\r\n\r\n  const confirmStatusChange = async () => {\r\n    if (!pendingStatusChange) return;\r\n    const { account, newStatus } = pendingStatusChange;\r\n    try {\r\n  const response = await api.put(`/auth/users/${account.id}/status`, { accountStatus: newStatus, status: newStatus });\r\n      if (response.data) {\r\n        const normalized = newStatus === 'Active' ? 'Active' : 'Inactive';\r\n        setAccounts(prev => prev.map(a => a.id === account.id ? { ...a, accountStatus: normalized } : a));\r\n        setSelectedUser(prev => prev && prev.id === account.id ? { ...prev, accountStatus: normalized } : prev);\r\n        toast.success(`Account ${newStatus === 'Inactive' ? 'disabled' : 'enabled'}`);\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to toggle account status:', e);\r\n      toast.error('Failed to update status');\r\n    } finally {\r\n      setPendingStatusChange(null);\r\n    }\r\n  };\r\n\r\n  const cancelStatusChange = () => setPendingStatusChange(null);\r\n\r\n  const lowerSearch = searchTerm.toLowerCase();\r\n  const filteredAccounts = accounts.filter(account => {\r\n    const phoneStr = String(account.phone ?? '');\r\n    return (\r\n      (account.name ?? '').toLowerCase().includes(lowerSearch) ||\r\n      (account.position ?? '').toLowerCase().includes(lowerSearch) ||\r\n      phoneStr.toLowerCase().includes(lowerSearch) ||\r\n      (account.email ?? '').toLowerCase().includes(lowerSearch)\r\n    );\r\n  });\r\n\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const sortedAccounts = [...filteredAccounts].sort((a, b) => {\r\n    switch (sortOption) {\r\n      case 'Newest':\r\n        return b.id.localeCompare(a.id);\r\n      case 'Oldest':\r\n        return a.id.localeCompare(b.id);\r\n      case 'A-Z':\r\n        return a.name.localeCompare(b.name);\r\n      case 'Z-A':\r\n        return b.name.localeCompare(a.name);\r\n      case 'Active': {\r\n        const aActive = a.accountStatus === 'Active';\r\n        const bActive = b.accountStatus === 'Active';\r\n        if (aActive !== bActive) return aActive ? -1 : 1; // Active first\r\n        return a.name.localeCompare(b.name);\r\n      }\r\n      case 'Inactive': {\r\n        const aInactive = a.accountStatus === 'Inactive';\r\n        const bInactive = b.accountStatus === 'Inactive';\r\n        if (aInactive !== bInactive) return aInactive ? -1 : 1; // Inactive first\r\n        return a.name.localeCompare(b.name);\r\n      }\r\n      default:\r\n        return 0;\r\n    }\r\n  });\r\n  const currentAccounts = sortedAccounts.slice(indexOfFirstItem, indexOfLastItem);\r\n  const totalPages = Math.ceil(filteredAccounts.length / itemsPerPage);\r\n  const startIndex = filteredAccounts.length === 0 ? 0 : indexOfFirstItem + 1;\r\n  const endIndex = indexOfFirstItem + currentAccounts.length;\r\n\r\n  const goToPage = (pageNumber) => {\r\n    if (pageNumber > 0 && pageNumber <= totalPages) {\r\n      setCurrentPage(pageNumber);\r\n    }\r\n  };\r\n\r\n  const [exporting, setExporting] = useState(false);\r\n  const handleExportPdf = async () => {\r\n    try {\r\n      setExporting(true);\r\n      await exportAccountsPdf(sortedAccounts, {\r\n        companyName: 'FadzTrack',\r\n        logoPath: `${process.env.PUBLIC_URL || ''}/images/Fadz-logo.png`,\r\n        exporterName: userName || 'Unknown',\r\n        exporterRole: userRole || '',\r\n        filters: { searchTerm, sortOption },\r\n      });\r\n    } catch (e) {\r\n      console.error('Export failed', e);\r\n  toast.error('Failed to export PDF');\r\n    } finally {\r\n      setExporting(false);\r\n    }\r\n  };\r\n\r\n  const renderSidebar = () => {\r\n    if (!showCreateAccount) {\r\n      return (\r\n        <>\r\n          <h2>Dashboard</h2>\r\n          <div className=\"bulk-upload-box-IT\">\r\n            <h3 style={{marginTop:0}}>Bulk Accounts Import</h3>\r\n            <p style={{fontSize:'12px',color:'#555',lineHeight:1.4}}>Upload a CSV with columns: <code>name,email,role,phone</code>. An activation email will be sent automatically to new accounts. Existing emails are skipped.</p>\r\n            <label style={{display:'flex',alignItems:'center',gap:6,fontSize:'12px',marginBottom:4}}>\r\n              <input type=\"checkbox\" checked={bulkDryRun} onChange={e=> setBulkDryRun(e.target.checked)} /> Dry run (no accounts created / emails sent)\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              accept=\".csv,text/csv\"\r\n              onChange={(e)=>{\r\n                const file = e.target.files && e.target.files[0];\r\n                if (!file) return;\r\n                setBulkFileName(file.name);\r\n                const formData = new FormData();\r\n                formData.append('file', file);\r\n                const progressId = 'prg_' + Date.now();\r\n                formData.append('progressId', progressId);\r\n                formData.append('dryRun', String(bulkDryRun));\r\n                setBulkProgress({ processed:0, total:0, percent:0, id: progressId });\r\n                setBulkUploading(true);\r\n                setBulkResults(null);\r\n                api.post('/auth/bulk-register', formData, { headers: { 'Content-Type':'multipart/form-data' } })\r\n                  .then(res=> {\r\n                    setBulkResults(res.data);\r\n                    // Refresh accounts list implicitly by refetching\r\n                    if (!res.data.dryRun) {\r\n                      return api.get('/auth/Users').then(resp => {\r\n                        const data = resp.data;\r\n                        const formattedAccounts = data.map(user => ({\r\n                          id: user._id,\r\n                          name: user.name,\r\n                          position: user.role,\r\n                          phone: user.phone,\r\n                          email: user.email,\r\n                          accountStatus: user.accountStatus || (user.status === 'Active' ? 'Active' : 'Inactive'),\r\n                          presence: user.presenceStatus || 'offline'\r\n                        }));\r\n                        setAccounts(formattedAccounts);\r\n                      });\r\n                    }\r\n                  })\r\n                  .catch(err=> { console.error('Bulk upload failed', err); toast.error('Bulk upload failed'); })\r\n                  .finally(()=> setBulkUploading(false));\r\n              }}\r\n              disabled={bulkUploading}\r\n            />\r\n            {bulkUploading && (\r\n              <div className=\"bulk-progress-IT\">\r\n                <div className=\"bulk-progress-bar-outer-IT\">\r\n                  <div className=\"bulk-progress-bar-inner-IT\" style={{width: `${bulkProgress.percent}%`}} />\r\n                </div>\r\n                <div className=\"bulk-progress-label-IT\">{bulkProgress.percent}% ({bulkProgress.processed}/{bulkProgress.total || '?'})</div>\r\n              </div>\r\n            )}\r\n            <div style={{marginTop:6,fontSize:'12px'}}>\r\n              {bulkUploading && <span>Uploading & processing…</span>}\r\n              {!bulkUploading && bulkFileName && !bulkResults && <span>Processing {bulkFileName}…</span>}\r\n              {bulkResults && (\r\n                <div className=\"bulk-summary-IT\">\r\n                  <div><strong>Imported:</strong> {bulkResults.summary.created}</div>\r\n                  <div><strong>Existing:</strong> {bulkResults.summary.existing}</div>\r\n                  <div><strong>Failed:</strong> {bulkResults.summary.failed}</div>\r\n                  <button className=\"new-account-btn-IT\" style={{marginTop:6}} onClick={()=> setBulkResults(null)}>Clear</button>\r\n                  <details style={{marginTop:4}}>\r\n                    <summary style={{cursor:'pointer'}}>Details</summary>\r\n                    <div style={{maxHeight:150,overflowY:'auto',fontSize:'11px',marginTop:4}}>\r\n                      {bulkResults.results.map(r=> (\r\n                        <div key={r.line} style={{padding:'2px 0',borderBottom:'1px solid #eee'}}>\r\n                          Line {r.line}: {r.email || '(no email)'} → {r.status}{r.reason? ` (${r.reason})`:''}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </details>\r\n                  <p style={{marginTop:6}}><a href=\"/sample_accounts_import.csv\" download>Download sample CSV</a></p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <button\r\n            className=\"new-account-btn-IT\"\r\n            onClick={() => {\r\n              setShowCreateAccount(true);\r\n              setIsEditing(false);\r\n              setEditingAccount(null);\r\n              setNewAccount({ name: '', position: '', phone: '', email: '' });\r\n              setErrors({});\r\n              setResendError('');\r\n            }}\r\n          >\r\n            Create New Account\r\n          </button>\r\n          <div className=\"user-profile-large-IT\">\r\n          <div className=\"profile-avatar-IT\">\r\n            {(selectedUser?.name?.[0] || 'U').toUpperCase()}\r\n          </div>\r\n          <h3>{selectedUser?.name || 'No User Selected'}</h3>\r\n          <p className=\"user-email-IT\">{selectedUser?.email || '-'}</p>\r\n          <p className=\"user-position-IT\">{selectedUser?.position || '-'}</p>\r\n          <div className=\"status-indicator-IT\">\r\n            <span className={`status-IT ${(selectedUser?.accountStatus || 'active').toLowerCase()}-IT`}>\r\n              {selectedUser?.accountStatus || 'Active'}\r\n            </span>\r\n          </div>\r\n          <div className=\"status-indicator-IT\" style={{ marginTop: 8 }}>\r\n            <span className={`status-IT ${(selectedUser?.presence || 'offline')}-IT`}>\r\n              {(selectedUser?.presence || 'offline').replace(/^./, c=>c.toUpperCase())}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        </>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"create-account-sidebar-IT\">\r\n          <h2>{isEditing ? 'Update Account' : 'Create New Account'}</h2>\r\n\r\n          <div className=\"form-group-IT\">\r\n            <label className=\"form-label-IT\">Name</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              placeholder=\"Enter Name\"\r\n              value={newAccount.name}\r\n              onChange={handleInputChange}\r\n              className=\"form-control-IT\"\r\n            />\r\n            {errors.name && <div className=\"error-msg-IT\">{errors.name}</div>}\r\n          </div>\r\n\r\n          <div className=\"form-group-IT\">\r\n            <label className=\"form-label-IT\">Position</label>\r\n            <select\r\n              name=\"position\"\r\n              value={newAccount.position}\r\n              onChange={handleInputChange}\r\n              className=\"form-control-IT\"\r\n            >\r\n              <option value=\"\">Select Position</option>\r\n              <option value=\"Project Manager\">Project Manager</option>\r\n              <option value=\"Area Manager\">Area Manager</option>\r\n              <option value=\"HR\">HR</option>\r\n              <option value=\"Person in Charge\">Person in Charge</option>\r\n              <option value=\"Staff\">Staff</option>\r\n              <option value=\"HR - Site\">HR - Site</option>\r\n            </select>\r\n            {errors.position && <div className=\"error-msg-IT\">{errors.position}</div>}\r\n          </div>\r\n\r\n          <div className=\"form-group-IT\">\r\n            <label className=\"form-label-IT\">Phone Number</label>\r\n            <input\r\n              type=\"tel\"\r\n              name=\"phone\"\r\n              placeholder=\"09xxxxxxxxx\"\r\n              value={newAccount.phone}\r\n              onChange={handleInputChange}\r\n              className=\"form-control-IT\"\r\n              maxLength=\"11\"\r\n            />\r\n            {errors.phone && <div className=\"error-msg-IT\">{errors.phone}</div>}\r\n          </div>\r\n\r\n          <div className=\"form-group-IT\">\r\n            <label className=\"form-label-IT\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Enter Email\"\r\n              value={newAccount.email}\r\n              onChange={handleInputChange}\r\n              className=\"form-control-IT\"\r\n            />\r\n            {errors.email && <div className=\"error-msg-IT\">{errors.email}</div>}\r\n          </div>\r\n\r\n          <div className=\"form-group-IT button-group-IT\">\r\n            <button className=\"create-account-btn-IT\" onClick={handleSaveAccount}>\r\n              {isEditing ? 'Update Account' : 'Create New Account'}\r\n            </button>\r\n\r\n            {isEditing && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"create-account-btn-IT\"\r\n                onClick={handleResendResetLink}\r\n                disabled={resendLoading}\r\n              >\r\n                {resendLoading ? 'Resending...' : 'Resend Password Reset Link'}\r\n              </button>\r\n            )}\r\n\r\n            <button\r\n              className=\"back-btn-IT\"\r\n              onClick={() => {\r\n                setShowCreateAccount(false);\r\n                setIsEditing(false);\r\n                setEditingAccount(null);\r\n                setNewAccount({\r\n                  name: '',\r\n                  position: '',\r\n                  phone: '',\r\n                  email: ''\r\n                });\r\n                setResendError('');\r\n              }}\r\n            >\r\n              <span className=\"back-arrow-IT\">←</span> Back\r\n            </button>\r\n          </div>\r\n\r\n          {resendError && <p style={{ color: 'red', marginTop: '5px' }}>{resendError}</p>}\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fadztrack-app-IT\">\r\n      <AppHeader roleSegment=\"it\" onLogout={handleLogout} />\r\n      <div className=\"main-content-IT\">\r\n        <aside className=\"sidebar-IT\">\r\n          {renderSidebar()}\r\n        </aside>\r\n        <main className=\"dashboard-content-IT\">\r\n          <div className=\"dashboard-card-IT\">\r\n            <div className=\"welcome-header-IT\">\r\n              <h2>Hello, {userName}</h2>              \r\n              <p style={{ fontSize: '14px', color: '#666' }}>\r\n                Currently logged in as <strong>{userRole}</strong>\r\n              </p>\r\n              <div className=\"stats-container-IT\">\r\n                <div className=\"stat-card-IT\">\r\n                  <div className=\"stat-icon-IT users-IT\">👥</div>\r\n                  <div className=\"stat-info-IT\">\r\n                    <div className=\"stat-label-IT\">Total Accounts</div>\r\n                    <div className=\"stat-number-IT\">{accounts.length}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"stat-card-IT\">\r\n                  <div className=\"stat-icon-IT devices-IT\">💻</div>\r\n                  <div className=\"stat-info-IT\">\r\n                    <div className=\"stat-label-IT\">Total Active</div>\r\n                    <div className=\"stat-number-IT\">{accounts.filter(a => a.accountStatus === 'Active').length}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"accounts-section-IT\">\r\n              <div className=\"accounts-header-IT\">\r\n                <h3>Accounts:</h3>\r\n                <div className=\"accounts-tools-IT\">\r\n                  <div className=\"search-box-IT\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Search\"\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                      className=\"search-input-IT\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"sort-dropdown-IT\">\r\n                    <span>Sort by: </span>\r\n                    <select\r\n                      value={sortOption}\r\n                      onChange={(e) => setSortOption(e.target.value)}\r\n                    >\r\n                      <option value=\"Newest\">Newest</option>\r\n                      <option value=\"Oldest\">Oldest</option>\r\n                      <option value=\"A-Z\">A-Z</option>\r\n                      <option value=\"Z-A\">Z-A</option>\r\n                      <option value=\"Active\">Active</option>\r\n                      <option value=\"Inactive\">Inactive</option>\r\n                    </select>\r\n                  </div>\r\n                  <button\r\n                    className=\"export-btn-IT\"\r\n                    onClick={handleExportPdf}\r\n                    disabled={exporting}\r\n                    title=\"Export accounts to PDF\"\r\n                  >\r\n                    <FaFilePdf style={{ marginRight: 8 }} /> {exporting ? 'Exporting…' : 'Export PDF'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"accounts-table-IT\">\r\n                <table>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Name</th>\r\n                      <th>Position</th>\r\n                      <th>Phone Number</th>\r\n                      <th>Email</th>\r\n                      <th>Presence</th>\r\n                      <th>Account Status</th>\r\n                      <th></th>\r\n                      <th></th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {currentAccounts.map(account => (\r\n                      <tr\r\n                          key={account.id}\r\n                          onClick={() => setSelectedUser(account)}\r\n                          style={{ cursor: 'pointer' }}\r\n                        >\r\n                        <td>{account.name}</td>\r\n                        <td>{account.position}</td>\r\n                        <td>{account.phone}</td>\r\n                        <td>{account.email}</td>\r\n                        <td>\r\n                          <span className={`status-badge-IT ${(account.presence || 'offline')}-IT`}>\r\n                            {(account.presence || 'offline').replace(/^./, c=>c.toUpperCase())}\r\n                          </span>\r\n                        </td>\r\n                        <td>\r\n                          <span className={`status-badge-IT ${(account.accountStatus || 'active').toLowerCase()}-IT`}>\r\n                            {account.accountStatus || 'Unknown'}\r\n                          </span>\r\n                        </td>\r\n                        <td>\r\n                          <button\r\n                          className=\"edit-button-IT\"\r\n                          onClick={() => {\r\n                            setEditingAccount(account);\r\n                            setIsEditing(true);\r\n                            setShowCreateAccount(true);\r\n                            setNewAccount({\r\n                              name: account.name,\r\n                              position: account.position,\r\n                              phone: account.phone,\r\n                              email: account.email\r\n                            });\r\n                            setResendError('');\r\n                            setErrors({});\r\n                            setSelectedUser(account); \r\n                          }}\r\n                        >\r\n                          ✏️\r\n                        </button>\r\n                        </td>\r\n                        <td>\r\n                          <button\r\n                            className={`status-toggle-button-IT ${account.accountStatus === 'Active' ? 'deactivate-IT' : 'activate-IT'}`}\r\n                            onClick={() => openStatusChangeConfirm(account)}\r\n                          >\r\n                            {account.accountStatus === 'Active' ? 'Disable' : 'Enable'}\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <div className=\"pagination-IT\">\r\n                <span className=\"pagination-info-IT\">\r\n                  Showing data {startIndex} to {endIndex} of {filteredAccounts.length} entries.\r\n                </span>\r\n                <div className=\"pagination-controls-IT\">\r\n                  <button\r\n                    className=\"pagination-btn-IT prev-IT\"\r\n                    onClick={() => goToPage(currentPage - 1)}\r\n                    disabled={currentPage === 1}\r\n                  >\r\n                    &lt;\r\n                  </button>\r\n                  {Array.from({ length: Math.min(5, totalPages) }, (_, index) => {\r\n                    let pageNum = index + 1;\r\n                    if (currentPage > 3 && totalPages > 5) {\r\n                      pageNum = (currentPage + index) - 2;\r\n                      if (pageNum > totalPages) pageNum = totalPages - 4 + index;\r\n                    }\r\n                    return (\r\n                      <button\r\n                        key={index}\r\n                        className={`pagination-btn-IT ${pageNum === currentPage ? 'active-IT' : ''}`}\r\n                        onClick={() => goToPage(pageNum)}\r\n                      >\r\n                        {pageNum}\r\n                      </button>\r\n                    );\r\n                  })}\r\n                  <button\r\n                    className=\"pagination-btn-IT next-IT\"\r\n                    onClick={() => goToPage(currentPage + 1)}\r\n                    disabled={currentPage === totalPages}\r\n                  >\r\n                    &gt;\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n  {/* ToastContainer removed here; a single global container is rendered in App.js to avoid duplicate instances causing runtime errors */}\r\n      {pendingStatusChange && (\r\n        <div className=\"status-modal-overlay-IT\">\r\n          <div className=\"status-modal-IT\">\r\n            <h3>{pendingStatusChange.newStatus === 'Inactive' ? 'Deactivate Account' : 'Activate Account'}</h3>\r\n            <p>\r\n              {pendingStatusChange.newStatus === 'Inactive'\r\n                ? `Are you sure you want to deactivate ${pendingStatusChange.account.name}'s account? They will be prevented from logging in.`\r\n                : `Activate ${pendingStatusChange.account.name}'s account? They will regain access.`}\r\n            </p>\r\n            <div className=\"status-modal-actions-IT\">\r\n              <button className=\"confirm-btn-IT\" onClick={confirmStatusChange}>Yes</button>\r\n              <button className=\"cancel-btn-IT\" onClick={cancelStatusChange}>No</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItDash;\r\n"],"names":["ItMatRequestListWrapper","_jsx","MaterialRequestListView","role","fetchUrl","detailLinkBase","rootClass","headerTitle","headerSubtitle","enableExport","exportTitle","ItMatRequestDetailWrapper","MaterialRequestDetailView","customHeader","AppHeader","roleSegment","th","textAlign","padding","fontWeight","borderBottom","td","metaTh","fontSize","color","metaTd","verticalAlign","fontFamily","ItAuditLog","useNavigate","profileMenuOpen","setProfileMenuOpen","useState","isHeaderCollapsed","setIsHeaderCollapsed","logs","setLogs","loading","setLoading","search","setSearch","roleFilter","setRoleFilter","actionFilter","setActionFilter","startDate","setStartDate","endDate","setEndDate","exportModalOpen","setExportModalOpen","exportLoading","setExportLoading","expandedRow","setExpandedRow","initialParams","sp","URLSearchParams","window","location","p","parseInt","get","ps","isFinite","includes","_unused","page","setPage","pageSize","setPageSize","jumpPage","setJumpPage","paginationBtnStyle","disabled","active","arguments","length","undefined","borderRadius","border","backgroundColor","cursor","lineHeight","transition","minWidth","ellipsisStyle","userSelect","user","setUser","stored","localStorage","getItem","JSON","parse","token","setToken","userId","setUserId","_id","userName","setUserName","name","userRole","setUserRole","useEffect","handleUserChange","addEventListener","removeEventListener","handleScroll","scrollTop","pageYOffset","document","documentElement","api","then","res","data","catch","handleClickOutside","event","target","closest","renderMeta","log","meta","Array","isArray","changedFields","_jsxs","style","display","flexDirection","gap","children","overflowX","width","borderCollapse","background","map","f","i","changed","before","after","field","_objectSpread","formatValue","fileNames","filesCount","margin","n","fileTypes","join","totalSize","whiteSpace","stringify","v","String","filteredLogs","filter","_log$performedByRole","_log$action","_log$description","_log$performedBy","_log$performedBy$name","_log$performedByRole2","_log$action2","logDate","Date","timestamp","start","end","performedByRole","toLowerCase","action","description","performedBy","set","newUrl","concat","pathname","toString","history","replaceState","totalFiltered","totalPages","Math","max","ceil","currentPage","min","paginatedLogs","slice","getActionColor","exportToPDF","async","doc","jsPDF","logoImg","Image","src","Promise","resolve","reject","onload","addImage","error","console","warn","onerror","setFontSize","setFont","text","toLocaleString","filterY","tableY","headers","rows","_log$performedBy2","autoTable","head","body","startY","top","right","bottom","left","styles","cellPadding","overflow","headStyles","fillColor","textColor","fontStyle","alternateRowStyles","columnStyles","cellWidth","fileName","toISOString","split","save","Error","className","marginTop","maxHeight","maxWidth","boxShadow","justifyContent","alignItems","marginBottom","paddingBottom","FaClipboardList","onClick","onMouseEnter","e","transform","onMouseLeave","FaFileExport","flexWrap","flex","placeholder","value","onChange","outline","onFocus","borderColor","onBlur","type","clearAllFilters","toLocaleDateString","marginLeft","opacity","height","borderTop","animation","overflowY","textTransform","letterSpacing","colSpan","_log$performedBy3","globalIndex","React","currentTarget","textOverflow","toggleRow","id","prev","source","sz","onSubmit","preventDefault","val","replace","from","_","idx","pageNum","abs","position","zIndex","stopPropagation","alert","_Fragment","FaDownload","createElement","textContent","appendChild","loadFontFromPublic","fontFile","family","fontPath","fetch","r","arrayBuffer","buf","addFileToVFS","addFont","_unused2","_unused3","fontUsable","fonts","getFontList","_unused4","formatDateTime","date","dt","Number","isNaN","getTime","pad","padStart","exportManpowerRequestsPdf","options","companyName","logoPath","exporterName","exporterRole","filters","reportTitle","unit","format","FAMILY","regOk","boldOk","canUseRegular","canUseBold","bodyFont","headStyle","marginX","y","logo","url","img","crossOrigin","c","naturalWidth","naturalHeight","getContext","drawImage","dataUrl","toDataURL","w","h","titleX","drawW","drawH","maxW","maxH","fitInside","setTextColor","setDrawColor","setLineWidth","line","filterSummary","parts","status","push","dateFrom","dateTo","buildFiltersSummary","metaY","forEach","tableStartY","_r$createdBy","_r$project","manpowerList","manpowerRequested","m","createdAt","createdBy","project","projectName","req","acquisitionDate","font","halign","theme","didDrawPage","str","getCurrentPageInfo","pageNumber","pages","getNumberOfPages","label","getTextWidth","prefix","d","getHours","getMinutes","buildFileName","inputStyle","pill","bg","labelStyle","valueBox","minHeight","iconBtn","addRowBtn","btn","variant","base","AuditTrail","_ref","requestId","open","setOpen","Authorization","filtered","l","_l$meta","fetchLogs","o","_l$performedBy","ItManpowerRequestDetail","_request$project","_request$createdBy","_request$project4","_request$manpowers2","useParams","navigate","useLocation","saving","setSaving","deleting","setDeleting","setError","request","setRequest","editMode","setEditMode","formData","setFormData","duration","manpowers","quantity","_data$project","_data$project2","_data$manpowers","fetchData","setField","updateManpowerRow","statusColors","Pending","Approved","Overdue","Completed","editable","onLogout","handleLogout","post","finally","removeItem","FaEdit","some","trim","put","_res$data","message","FaSave","_request$project2","_request$project3","_request$manpowers","FaTimes","confirm","delete","gridTemplateColumns","row","removeRow","FaTrash","addRow","FaPlus","resize","ItViewProject","ProjectView","useUnifiedHeader","navPathOverrides","dashboard","projects","chat","materials","manpower","audit","ItMaterialRequestEdit","_materialRequest$proj","materialRequest","setMaterialRequest","profileDropdownRef","useRef","materialName","attachments","uploadedFiles","setUploadedFiles","previewImages","setPreviewImages","newFiles","setNewFiles","mat","now","err","current","contains","URL","revokeObjectURL","handleBack","handleCancel","handleMaterialChange","require","alt","charAt","toUpperCase","Link","to","FaTachometerAlt","FaComments","FaBoxes","FaUsers","FaArrowLeft","marginRight","validMaterials","submitData","FormData","append","file","response","_err$response","_err$response$data","FaInfoCircle","required","FaMaterials","material","index","removeMaterial","addMaterial","newId","FaPaperclip","attachment","removeExistingAttachment","multiple","files","previews","createObjectURL","accept","removeFile","ItManpowerList","userRef","requests","setRequests","setStatus","searchTerm","setSearchTerm","setCurrentPage","layoutView","setLayoutView","exporting","setExporting","fetchAll","filteredRequests","useMemo","items","s","proj","by","summary","pageRows","summaryCounts","pending","approved","completed","rejected","overdue","archived","isOver","total","statusCounts","All","Rejected","Archived","tab","_statusCounts$tab","FaSearch","_request$createdBy3","_request$createdBy4","badgeLabel","getStatusBadge","getStatusColor","_request$createdBy2","title","ItChat","AreaChat","baseSegment","emptyForm","contractor","budget","projectmanager","areamanager","area","pic","staff","hrsite","ItProjects","budgetDisplay","setBudgetDisplay","nextFormatted","setProjects","showForm","setShowForm","editingId","setEditingId","allLocations","setAllLocations","usersByRole","setUsersByRole","userLookup","setUserLookup","showAudit","setShowAudit","auditLogs","setAuditLogs","auditLoading","setAuditLoading","auditProjectId","setAuditProjectId","allManpower","setAllManpower","validationErrors","setValidationErrors","docFiles","setDocFiles","budgetFiles","setBudgetFiles","photoFiles","setPhotoFiles","photoPreviews","setPhotoPreviews","docPreviews","setDocPreviews","areasByManager","setAreasByManager","showSuccessMessage","setShowSuccessMessage","successMessage","setSuccessMessage","deleteConfirm","setDeleteConfirm","assignedPICs","setAssignedPICs","searchPIC","setSearchPIC","assignedStaff","setAssignedStaff","searchStaff","setSearchStaff","assignedHR","setAssignedHR","searchHR","setSearchHR","assignedManpower","setAssignedManpower","searchManpower","setSearchManpower","csvError","setCsvError","csvUploading","setCsvUploading","showExportModal","setShowExportModal","exportFilters","setExportFilters","exportPreview","st","_project$location","_project$projectmanag","q","sd","setFilter","viewMode","setViewMode","deferredSearch","useDeferredValue","sortBy","setSortBy","sortOrder","setSortOrder","assignedSets","pm","Set","am","hr","add","u","availableRoleUsers","out","Object","entries","list","setRef","keepIds","has","load","locRes","usersRes","areasRes","all","byRole","lookup","normRole","roleN","rec","areasByAM","areaManager","amIdRaw","amId","fetchLookups","fetchManpower","onScroll","handler","urls","docs","ext","pop","handleChange","vals","selected","cancelDelete","filteredSorted","_p$location2","_p$projectmanager2","sort","a","b","pick","_o$location","_o$projectmanager","av","bv","totalItems","paginatedProjects","counts","ongoing","Skeleton","_ref4","FaCheckCircle","FaTh","FaList","FaChevronUp","FaChevronDown","FaClock","reload","FaProjectDiagram","size","_project$photos","_project$location3","_project$projectmanag3","statusRaw","Icon","statusMeta","tabIndex","onKeyDown","key","photos","FaEye","_p$budget","_p$location","_p$projectmanager","_p$areamanager","_p$area","newForm","x","idToObj","found","find","projectManpower","Map","values","openEdit","projectId","params","loadAudit","FaMapMarkerAlt","FaUserTie","FaBuilding","FaCalendarAlt","FaUsersIcon","FaMoneyBillWave","Intl","NumberFormat","currency","classList","er","errs","form","validate","payload","createdProject","k","fd","_ref2","patch","allUserIds","uniqueUserIds","users","isGroup","setTimeout","chatError","_ref3","paddingRight","gridColumn","inputMode","intPartLimited","decPart","rawForState","autoComplete","region","MultiBox","htmlFor","Papa","header","skipEmptyLines","complete","csvData","results","errors","newManpowers","invalidRows","duplicateNames","prevRow","prevIndex","prevName","prevPosition","mp","isNew","createdManpowers","assignedProject","newManpowerIds","mode","getElementById","click","labelKey","idKey","alignSelf","objectFit","random","_l$meta2","exportDateTime","year","month","day","hour","minute","second","hour12","pdfContent","companyLogo","exportedBy","exportDate","_project$location2","_project$projectmanag2","timeline","pics","generateProjectPDF","_ref5","input","setInput","toggle","obj","cache","ok","b64","btoa","fromCharCode","Uint8Array","exportAccountsPdf","loadImageDataURLWithSize","round","sortOption","phone","email","getFullYear","getMonth","getDate","ItDash","accounts","setAccounts","socketRef","setSortOption","showCreateAccount","setShowCreateAccount","setErrors","editingAccount","setEditingAccount","isEditing","setIsEditing","resendLoading","setResendLoading","resendError","setResendError","selectedUser","setSelectedUser","pendingStatusChange","setPendingStatusChange","newAccount","setNewAccount","bulkUploading","setBulkUploading","bulkResults","setBulkResults","bulkFileName","setBulkFileName","bulkDryRun","setBulkDryRun","bulkProgress","setBulkProgress","processed","percent","progressId","on","off","formattedAccounts","accountStatus","presence","presenceStatus","fetchAccounts","io","SOCKET_URL","path","SOCKET_PATH","transports","auth","normalized","uid","disconnect","handleInputChange","fieldValue","validateField","errorMsg","startsWith","test","handleSaveAccount","isFormValid","fieldNames","nextErrors","valid","_newAccount$field","msg","account","_data$user$name","_data$user","_data$user$role","_data$user2","_data$user$phone","_data$user3","_data$user$email","_data$user4","_data$user5","_data$user6","toast","success","handleResendResetLink","lowerSearch","filteredAccounts","_account$phone","_account$name","_account$position","_account$email","phoneStr","indexOfLastItem","indexOfFirstItem","sortedAccounts","localeCompare","aActive","aInactive","currentAccounts","startIndex","endIndex","goToPage","renderSidebar","maxLength","checked","dryRun","resp","created","existing","failed","reason","href","download","_selectedUser$name","FaFilePdf","newStatus","openStatusChangeConfirm","cancelStatusChange"],"sourceRoot":""}