{"version":3,"file":"static/js/pic.2aae9599.chunk.js","mappings":"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","sources":["components/pic/PicDash.js","components/pic/PicRequestList.js","components/pic/PicProject.js","components/ProgressTracker.js","components/pic/PicMatReq.js","components/pic/PicReq.js","components/pic/PicAllProjects.js","components/pic/PicMaterialRequestEdit.js","components/chats/PicChat.js","components/pic/PicMatRequestDetailWrapper.js","components/pic/PicMatRequestListWrapper.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../style/pic_style/Pic_Dash.css';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LineChart, Line } from 'recharts';\r\nimport ProgressTracker from '../ProgressTracker';\r\nimport NotificationBell from '../NotificationBell';\r\nimport AppHeader from '../layout/AppHeader';\r\n// Nav icons\r\nimport { FaTachometerAlt, FaComments, FaClipboardList, FaEye, FaProjectDiagram, FaBoxes, FaArrowRight, FaCheckCircle, FaClock, FaExclamationTriangle, FaUserTie, FaBuilding, FaChartBar } from 'react-icons/fa';\r\nconst formatRemaining = (ts) => {\r\n  if(!ts) return null;\r\n  const diff = ts - Date.now();\r\n  if(diff <= 0) return null;\r\n  const m = Math.floor(diff/60000);\r\n  if(m >= 60){ const h=Math.floor(m/60); const rm=m%60; return `${h}h ${rm}m`; }\r\n  const s = Math.floor((diff%60000)/1000);\r\n  return m>0? `${m}m ${s.toString().padStart(2,'0')}s` : `${s}s`;\r\n};\r\n\r\nconst PicDash = () => {\r\n  const navigate = useNavigate();\r\n  const token = localStorage.getItem('token');\r\n  const stored = localStorage.getItem('user'); \r\n  const user = stored ? JSON.parse(stored) : null;\r\n  const userId = user?._id;\r\n\r\n  const [requests, setRequests] = useState([]);\r\n  const [userName, setUserName] = useState(user?.name || '');\r\n  const [userRole, setUserRole] = useState(user?.role || '');\r\n  const [project, setProject] = useState(null);\r\n  const [profileMenuOpen, setProfileMenuOpen] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 5;\r\n  const [nudgeCooldowns, setNudgeCooldowns] = useState({});\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [reports, setReports] = useState([]);\r\n  const [pendingNudges, setPendingNudges] = useState({});\r\n\r\n  useEffect(() => {\r\n  const saved = localStorage.getItem('nudgeCooldowns');\r\n  if (saved) {\r\n    const parsed = JSON.parse(saved);\r\n    const now = Date.now();\r\n    const filtered = Object.fromEntries(\r\n      Object.entries(parsed).filter(([_, ts]) => ts > now)\r\n    );\r\n    setNudgeCooldowns(filtered);\r\n  }\r\n}, []);\r\n\r\nuseEffect(() => {\r\n  localStorage.setItem('nudgeCooldowns', JSON.stringify(nudgeCooldowns));\r\n}, [nudgeCooldowns]);\r\n\r\n  // Pagination helpers\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const currentRequests = requests.slice(indexOfFirstItem, indexOfLastItem);\r\n  const totalPages = Math.ceil(requests.length / itemsPerPage);\r\n\r\n  const goToPage = (pageNumber) => {\r\n    if (pageNumber > 0 && pageNumber <= totalPages) setCurrentPage(pageNumber);\r\n  };\r\n\r\n  // Helper function for status icons (from PMDash)\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'Completed':\r\n        return <FaCheckCircle className=\"status-icon completed\" />;\r\n      case 'Pending Project Manager':\r\n      case 'Pending Area Manager':\r\n        return <FaClock className=\"status-icon pending\" />;\r\n      case 'Rejected':\r\n        return <FaExclamationTriangle className=\"status-icon rejected\" />;\r\n      default:\r\n        return <FaClock className=\"status-icon pending\" />;\r\n    }\r\n  };\r\n\r\n  // Helper function for timeline status (from PMDash)\r\n  const getTimelineStatus = (status, stage) => {\r\n    switch (stage) {\r\n      case 'placed':\r\n        return 'completed';\r\n      case 'pm':\r\n        if (['Pending AM', 'Approved', 'Received', 'PENDING AREA MANAGER'].includes(status)) {\r\n          return 'completed';\r\n        }\r\n        return 'pending';\r\n      case 'am':\r\n        if (['Approved', 'Received'].includes(status)) {\r\n          return 'completed';\r\n        }\r\n        return 'pending';\r\n      case 'done':\r\n        if (['Received'].includes(status)) {\r\n          return 'completed';\r\n        }\r\n        return 'pending';\r\n      default:\r\n        return 'pending';\r\n    }\r\n  };\r\n\r\n  // Auth guard\r\n  useEffect(() => {\r\n    if (!token || !user) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n    setUserName(user.name);\r\n  }, [navigate, token, user]);\r\n\r\n  const handleNudge = async (request, pendingRole) => {\r\n  const untilTs = nudgeCooldowns[request._id];\r\n  if (untilTs && untilTs > Date.now()) return; // Already on cooldown\r\n  if (pendingNudges[request._id]) return; // already sending\r\n  setPendingNudges(p=>({...p,[request._id]:true}));\r\n\r\n  try {\r\n    const { data } = await api.post(`/requests/${request._id}/nudge`);\r\n    alert(`Reminder sent to ${pendingRole}.`);\r\n    const until = data?.nextAllowedAt || (Date.now()+60*60*1000);\r\n  setNudgeCooldowns(prev => ({ ...prev, [request._id]: until }));\r\n  } catch (err) {\r\n    if (err.response && err.response.data && err.response.data.message) {\r\n      alert(err.response.data.message);\r\n      const untilServer = err.response.data.nextAllowedAt;\r\n      if (untilServer) {\r\n        setNudgeCooldowns(prev => ({ ...prev, [request._id]: untilServer }));\r\n      } else {\r\n        const match = /(\\d+) minute/.exec(err.response.data.message);\r\n        if (match) {\r\n          const minutes = parseInt(match[1], 10);\r\n            setNudgeCooldowns(prev => ({ ...prev, [request._id]: Date.now() + minutes * 60 * 1000 }));\r\n        }\r\n      }\r\n    } else {\r\n      alert('Failed to send nudge.');\r\n    }\r\n  } finally {\r\n    setPendingNudges(p=>{ const { [request._id]:_, ...rest}=p; return rest; });\r\n  }\r\n};\r\n\r\n  // Only fetch user's active/ongoing project\r\n  useEffect(() => {\r\n    if (!token || !userId) return;\r\n    const fetchActiveProject = async () => {\r\n      try {\r\n        const { data } = await api.get(`/projects/by-user-status?userId=${userId}&role=pic&status=Ongoing`);\r\n        setProject(data[0] || null);\r\n      } catch (err) {\r\n        setProject(null);\r\n      }\r\n    };\r\n    fetchActiveProject();\r\n  }, [token, userId]);\r\n\r\n     // Fetch requests for this PIC's current project **only**\r\n   useEffect(() => {\r\n     if (!token || !project) return;\r\n\r\n     api.get('/requests/mine', {\r\n       headers: { Authorization: `Bearer ${token}` }\r\n     })\r\n       .then(({ data }) => {\r\n         console.log('Fetched requests:', data); // Debug log\r\n         const projectRequests = Array.isArray(data)\r\n           ? data.filter(r => r.project && r.project._id === project._id)\r\n           : [];\r\n         console.log('Filtered project requests:', projectRequests); // Debug log\r\n         setRequests(projectRequests);\r\n       })\r\n       .catch((error) => {\r\n         console.error('Error fetching requests:', error);\r\n         setRequests([]);\r\n       });\r\n   }, [token, project]);\r\n\r\n  // Fetch reports for this PIC's current project\r\n  useEffect(() => {\r\n    if (!token || !project) return;\r\n\r\n    api.get(`/projects/${project._id}/reports`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n      .then(({ data }) => {\r\n        setReports(data?.reports || []);\r\n      })\r\n      .catch(() => setReports([]));\r\n  }, [token, project]);\r\n\r\n  // Auto-refresh reports when socket-driven global event fired\r\n  useEffect(()=>{\r\n    const handler = (e)=>{ if(String(e?.detail?.projectId)===String(project?._id) && token){\r\n      api.get(`/projects/${project._id}/reports`, { headers:{ Authorization:`Bearer ${token}` } })\r\n        .then(({data})=> setReports(data?.reports||[]))\r\n        .catch(()=>{});\r\n    }};\r\n    window.addEventListener('projectReportsUpdated', handler);\r\n    return ()=> window.removeEventListener('projectReportsUpdated', handler);\r\n  },[project?._id, token]);\r\n\r\n\r\n\r\nconst handleLogout = () => {\r\n  const token = localStorage.getItem('token');\r\n  api.post('/auth/logout', {}, {\r\n    headers: { Authorization: `Bearer ${token}` }\r\n  }).finally(() => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/');\r\n  });\r\n};\r\n\r\n  // Profile menu close on outside click\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (!event.target.closest(\".profile-menu-container\")) {\r\n        setProfileMenuOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n    return () => document.removeEventListener(\"click\", handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n  <div className=\"pic-dashboard dashboard-container\">\r\n  <AppHeader roleSegment=\"pic\" />\r\n\r\n  {/* Main Dashboard Content */}\r\n  <main className=\"dashboard-main\">\r\n    <div className=\"dashboard-grid\">\r\n      {/* Welcome & Project Overview Card */}\r\n      <div className=\"dashboard-card pic-welcome-card\">\r\n        {/* Hero Art */}\r\n        <div \r\n          className=\"hero-art\"\r\n          aria-hidden=\"true\"\r\n          style={{\r\n            backgroundImage: `radial-gradient(ellipse at 65% 35%, rgba(255,255,255,0.18), transparent 55%), url(${process.env.PUBLIC_URL || ''}/images/illustration-construction-site.png)`\r\n          }}\r\n        />\r\n        \r\n        <div className=\"welcome-content\">\r\n          <h2 className=\"welcome-title\">Welcome back, {userName}! 👋</h2>\r\n          <p className=\"welcome-subtitle\">Here's what's happening with your project today</p>\r\n        </div>\r\n\r\n        {/* Welcome Stats */}\r\n        <div className=\"welcome-stats\">\r\n          <Link to=\"/pic/projects\" className=\"stat-link\">\r\n            <div className=\"stat-item\">\r\n              <div className=\"stat-icon\">\r\n                <FaProjectDiagram />\r\n              </div>\r\n              <div className=\"stat-content\">\r\n                <span className=\"stat-value\">{project ? 1 : 0}</span>\r\n                <span className=\"stat-label\">Active Project</span>\r\n              </div>\r\n            </div>\r\n          </Link>\r\n          \r\n          <Link to=\"/pic/requests\" className=\"stat-link\">\r\n            <div className=\"stat-item\">\r\n              <div className=\"stat-icon\">\r\n                <FaBoxes />\r\n              </div>\r\n              <div className=\"stat-content\">\r\n                <span className=\"stat-value\">{requests.length}</span>\r\n                <span className=\"stat-label\">Material Requests</span>\r\n              </div>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n\r\n        {/* KPI Strip */}\r\n        <div className=\"kpi-strip\">\r\n          <Link to=\"/pic/requests\" className=\"kpi\">\r\n            <div className=\"kpi-ico\">\r\n              <FaBoxes />\r\n            </div>\r\n            <div className=\"kpi-body\">\r\n              <div className=\"kpi-title\">Pending Requests</div>\r\n              <div className=\"kpi-value\">{requests.length}</div>\r\n            </div>\r\n          </Link>\r\n          \r\n          <Link to=\"/pic/projects\" className=\"kpi\">\r\n            <div className=\"kpi-ico\">\r\n              <FaProjectDiagram />\r\n            </div>\r\n            <div className=\"kpi-body\">\r\n              <div className=\"kpi-title\">Active Project</div>\r\n              <div className=\"kpi-value\">{project ? 1 : 0}</div>\r\n            </div>\r\n          </Link>\r\n          \r\n          <Link to=\"/pic/projects\" className=\"kpi\">\r\n            <div className=\"kpi-ico\">\r\n              <FaChartBar />\r\n            </div>\r\n            <div className=\"kpi-body\">\r\n              <div className=\"kpi-title\">Avg. Progress</div>\r\n              <div className=\"kpi-value\">{reports.length > 0 ? `${Math.round(reports.reduce((acc, r) => acc + (r.ai?.pic_contribution_percent || 0), 0) / reports.length)}%` : '0%'}</div>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Work Progress Chart */}\r\n      {project && (\r\n        <div className=\"dashboard-card chart-card\">\r\n          <div className=\"card-header\">\r\n            <h3 className=\"card-title\">Work Progress Trend</h3>\r\n            <div className=\"card-subtitle\">\r\n              Based on {reports.length} report{reports.length !== 1 ? 's' : ''}\r\n            </div>\r\n          </div>\r\n          <div className=\"chart-container\">\r\n            {reports.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={200}>\r\n                <LineChart data={reports.slice(0, 6).reverse().map(report => ({\r\n                  name: new Date(report.uploadedAt).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\r\n                  completedTasks: report.ai?.completed_tasks?.length || 0,\r\n                  workItems: report.ai?.summary_of_work_done?.length || 0,\r\n                  contribution: report.ai?.pic_contribution_percent || 0\r\n                }))}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" />\r\n                  <XAxis dataKey=\"name\" tick={{ fontSize: 12 }} />\r\n                  <YAxis tick={{ fontSize: 12 }} />\r\n                  <Tooltip contentStyle={{ fontSize: 12 }} />\r\n                  <Line type=\"monotone\" dataKey=\"completedTasks\" stroke=\"#10b981\" strokeWidth={2} name=\"Completed\" dot={{ r:3 }} />\r\n                  <Line type=\"monotone\" dataKey=\"workItems\" stroke=\"#3b82f6\" strokeWidth={2} name=\"Work Items\" dot={{ r:3 }} />\r\n                  <Line type=\"monotone\" dataKey=\"contribution\" stroke=\"#f59e0b\" strokeWidth={2} name=\"Contribution %\" dot={{ r:3 }} />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <div className=\"empty-state\">\r\n                <FaChartBar />\r\n                <span>No report data yet</span>\r\n                <p>Submit your first report to see progress trends</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* No Project State */}\r\n      {!project && (\r\n        <div className=\"dashboard-card no-project-card\">\r\n          <div className=\"no-project-content\">\r\n            <div className=\"no-project-icon\">📊</div>\r\n            <h3 className=\"no-project-title\">No Active Project</h3>\r\n            <p className=\"no-project-description\">\r\n              You don't have any active projects assigned at the moment. \r\n              Check back later or contact your project manager for updates.\r\n            </p>\r\n            <div className=\"no-project-actions\">\r\n              <Link to=\"/pic/projects\" className=\"no-project-link\">\r\n                View All Projects <FaArrowRight />\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Material Requests */}\r\n      {project && (\r\n        <div className=\"dashboard-card requests-card\">\r\n          <div className=\"card-header\">\r\n            <h3 className=\"card-title\">Material Requests</h3>\r\n            <Link to=\"/pic/requests\" className=\"view-all-link\">\r\n              View All <FaArrowRight />\r\n            </Link>\r\n          </div>\r\n          <div className=\"requests-content\">\r\n            {requests.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                <FaBoxes />\r\n                <span>No material requests found</span>\r\n                <p>Create a new request to get started</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"requests-list\">\r\n                {requests.slice(0, 3).map(request => (\r\n                  <Link to={`/pic/material-request/${request._id}`} key={request._id} className=\"request-item-new-layout\" style={{textDecoration:'none'}}>\r\n                    {/* Left Section - Item Details */}\r\n                    <div className=\"request-left-section\">\r\n                      <div className=\"request-icon-new\">\r\n                        <FaBoxes />\r\n                      </div>\r\n                      <div className=\"request-details-new\">\r\n                        <h4 className=\"request-title-new\">\r\n                          {request.materials?.map(m => `${m.materialName} (${m.quantity})`).join(', ')}\r\n                        </h4>\r\n                        <div className=\"request-meta-new\">\r\n                          <span className=\"request-project-new\">{request.project?.projectName}</span>\r\n                          <span className=\"request-date-new\">\r\n                            {new Date(request.createdAt).toLocaleDateString()}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Center Section - Progress Tracking */}\r\n                    <div className=\"request-center-section\">\r\n                      <div className=\"tracking-timeline-new\">\r\n                        {/* Placed Stage */}\r\n                        <div className={`timeline-step-new ${getTimelineStatus(request.status, 'placed')}`}>\r\n                          <div className=\"timeline-icon-new\">\r\n                            <FaCheckCircle />\r\n                          </div>\r\n                          <span className=\"timeline-label-new\">Placed</span>\r\n                        </div>\r\n                        <div className={`timeline-connector-new ${['Pending PM', 'Pending AM', 'Approved', 'Received', 'PENDING PROJECT MANAGER'].includes(request.status) ? 'completed' : ''}`}></div>\r\n                        {/* PM Stage */}\r\n                        <div className={`timeline-step-new ${getTimelineStatus(request.status, 'pm')}`}>\r\n                          <div className=\"timeline-icon-new\">\r\n                            <FaUserTie />\r\n                          </div>\r\n                          <span className=\"timeline-label-new\">PM</span>\r\n                        </div>\r\n                        <div className={`timeline-connector-new ${['Pending AM', 'Approved', 'Received', 'PENDING AREA MANAGER'].includes(request.status) ? 'completed' : ''}`}></div>\r\n                        {/* AM Stage */}\r\n                        <div className={`timeline-step-new ${getTimelineStatus(request.status, 'am')}`}>\r\n                          <div className=\"timeline-icon-new\">\r\n                            <FaBuilding />\r\n                          </div>\r\n                          <span className=\"timeline-label-new\">AM</span>\r\n                        </div>\r\n                        <div className={`timeline-connector-new ${['Approved', 'Received'].includes(request.status) ? 'completed' : ''}`}></div>\r\n                        {/* Done Stage */}\r\n                        <div className={`timeline-step-new ${getTimelineStatus(request.status, 'done')}`}>\r\n                          <div className=\"timeline-icon-new\">\r\n                            <FaCheckCircle />\r\n                          </div>\r\n                          <span className=\"timeline-label-new\">Done</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Right Section - Status */}\r\n                    <div className=\"request-right-section\">\r\n                      <div className=\"request-status-new\">\r\n                        <span className={`status-text-new ${request.status?.replace(/\\s/g, '').toLowerCase()}`}>\r\n                          {request.status}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </Link>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  </main>\r\n</div>\r\n  );\r\n}\r\n\r\nexport default PicDash;","import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport NotificationBell from '../NotificationBell';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport '../style/pm_style/PmMatRequest.css';\r\nimport '../style/pm_style/Pm_Dash.css';\r\nimport { FaTachometerAlt, FaComments, FaClipboardList, FaEye, FaProjectDiagram } from 'react-icons/fa';\r\n\r\nconst ITEMS_PER_PAGE = 8;\r\n\r\nexport default function PicRequestList() {\r\n  const navigate = useNavigate();\r\n  const token = localStorage.getItem('token');\r\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n  const userId = user?._id;\r\n\r\n  const [profileMenuOpen, setProfileMenuOpen] = useState(false);\r\n  const [isHeaderCollapsed, setIsHeaderCollapsed] = useState(false);\r\n  const [requests, setRequests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [filter, setFilter] = useState('All');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [activeProject, setActiveProject] = useState(null);\r\n  const [userRole] = useState(user?.role || 'Person in Charge');\r\n\r\n  useEffect(() => {\r\n    if (!token) {\r\n      setError('Session expired. Please log in.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    api.get('/requests/mine', { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(({ data }) => {\r\n        const mine = Array.isArray(data) ? data.filter(r => String(r.createdBy?._id || r.createdBy) === String(userId)) : [];\r\n        setRequests(mine);\r\n        setError('');\r\n      })\r\n      .catch(() => { setRequests([]); setError('Failed to load requests'); })\r\n      .finally(() => setLoading(false));\r\n  }, [token, userId]);\r\n\r\n  useEffect(() => {\r\n    if (!token || !userId) return;\r\n    api.get(`/projects/by-user-status?userId=${userId}&role=pic&status=Ongoing`)\r\n      .then(({ data }) => setActiveProject(data?.[0] || null))\r\n      .catch(() => setActiveProject(null));\r\n  }, [token, userId]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (!event.target.closest('.user-profile')) setProfileMenuOpen(false);\r\n    };\r\n    const handleScroll = () => {\r\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n      setIsHeaderCollapsed(scrollTop > 50);\r\n    };\r\n    document.addEventListener('click', handleClickOutside);\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n      window.removeEventListener('scroll', handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/');\r\n  };\r\n\r\n  const truncateWords = (text = '', maxWords = 10) => {\r\n    if (!text || typeof text !== 'string') return '';\r\n    const words = text.trim().split(/\\s+/);\r\n    if (words.length <= maxWords) return text;\r\n    return words.slice(0, maxWords).join(' ') + '...';\r\n  };\r\n\r\n  const getStatusColor = (status, receivedByPIC) => {\r\n    const s = (status || '').toLowerCase();\r\n    if (receivedByPIC) return '#0ea5e9';\r\n    if (s.includes('approved')) return '#10b981';\r\n    if (s.includes('pending')) return '#f59e0b';\r\n    if (s.includes('denied') || s.includes('cancel')) return '#ef4444';\r\n    return '#6b7280';\r\n  };\r\n  const getStatusBadge = (status, receivedByPIC) => {\r\n    if (receivedByPIC) return 'Completed';\r\n    const s = (status || '').toLowerCase();\r\n    if (s.includes('approved')) return 'Approved';\r\n    if (s.includes('pending')) return 'Pending';\r\n    if (s.includes('denied') || s.includes('cancel')) return 'Rejected';\r\n    return 'Unknown';\r\n  };\r\n\r\n  const filtered = requests.filter(r => {\r\n    const s = (r.status || '').toLowerCase();\r\n    const isCompleted = !!r.receivedByPIC;\r\n    const matchesFilter =\r\n      filter === 'All' ||\r\n      (filter === 'Pending' && s.includes('pending')) ||\r\n      (filter === 'Approved' && s.includes('approved')) ||\r\n      (filter === 'Cancelled' && (s.includes('denied') || s.includes('cancel'))) ||\r\n      (filter === 'Completed' && isCompleted);\r\n    const searchTarget = [\r\n      r.materials?.map(m => m.materialName).join(', ') || '',\r\n      r.description || '',\r\n      r.project?.projectName || ''\r\n    ].join(' ').toLowerCase();\r\n    return matchesFilter && searchTarget.includes(searchTerm.toLowerCase());\r\n  });\r\n\r\n  const sorted = [...filtered].sort((a, b) => {\r\n    const aCompleted = a.receivedByPIC ? 1 : 0;\r\n    const bCompleted = b.receivedByPIC ? 1 : 0;\r\n    if (aCompleted !== bCompleted) return aCompleted - bCompleted;\r\n    return new Date(b.createdAt || 0) - new Date(a.createdAt || 0);\r\n  });\r\n\r\n  const totalPages = Math.ceil(sorted.length / ITEMS_PER_PAGE);\r\n  const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;\r\n  const page = sorted.slice(startIndex, startIndex + ITEMS_PER_PAGE);\r\n\r\n  return (\r\n    <div>\r\n  <AppHeader roleSegment=\"pic\" />\r\n\r\n      <div style={{padding:'1.1rem 1.6rem 0.4rem'}}>\r\n        <h1 style={{margin:'0 0 4px',fontSize:'1.08rem',fontWeight:600,color:'#1e293b'}}>Material Requests</h1>\r\n        <p style={{margin:0,fontSize:'.72rem',letterSpacing:.2,color:'#64748b'}}>Your submitted material requests</p>\r\n      </div>\r\n\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"page-container\">\r\n          <div className=\"controls-bar\">\r\n            <div className=\"filter-tabs\">\r\n              {['All', 'Pending', 'Approved', 'Cancelled', 'Completed'].map(tab => (\r\n                <button key={tab} className={`filter-tab ${filter === tab ? 'active' : ''}`} onClick={() => setFilter(tab)}>{tab}</button>\r\n              ))}\r\n            </div>\r\n            <div className=\"search-sort-section\">\r\n              <div className=\"search-wrapper\">\r\n                <input className=\"search-input\" placeholder=\"Search requests...\" value={searchTerm} onChange={(e)=>setSearchTerm(e.target.value)} />\r\n              </div>\r\n              {activeProject && (\r\n                <Link to={`/pic/projects/${activeProject._id}/request`} className=\"view-details-btn\" style={{ background:'#2563eb', color:'#fff' }}>+ New Request</Link>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"requests-grid\">\r\n            {loading ? (\r\n              <div className=\"loading-state\"><div className=\"loading-spinner\"></div><p>Loading material requests...</p></div>\r\n            ) : error ? (\r\n              <div className=\"error-state\"><p>{error}</p></div>\r\n            ) : page.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                <div className=\"empty-icon\">📦</div>\r\n                <h3>No material requests</h3>\r\n                <p>You have not submitted any requests yet.</p>\r\n              </div>\r\n            ) : (\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                {page.map(request => (\r\n                  <div key={request._id} style={{ \r\n                    background: '#f8fafc', \r\n                    border: '1px solid #e2e8f0', \r\n                    borderRadius: '6px', \r\n                    padding: '12px',\r\n                    fontSize: '13px'\r\n                  }}>\r\n                    {/* Request Header */}\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '8px' }}>\r\n                      <div style={{ flex: 1 }}>\r\n                        <h3 style={{ \r\n                          margin: '0 0 4px 0', \r\n                          fontSize: '15px', \r\n                          fontWeight: '600', \r\n                          color: '#1f2937' \r\n                        }}>\r\n                          {request.materials?.length\r\n                            ? request.materials.map(m => `${m.materialName} (${m.quantity} ${m.unit || ''})`).join(', ')\r\n                            : 'Material Request'}\r\n                        </h3>\r\n                        <p style={{ \r\n                          margin: '0 0 6px 0', \r\n                          color: '#6b7280', \r\n                          fontSize: '13px',\r\n                          lineHeight: '1.3'\r\n                        }}>\r\n                          {request.description || 'No description provided'}\r\n                        </p>\r\n                      </div>\r\n                      <span style={{ \r\n                        background: getStatusColor(request.status, request.receivedByPIC),\r\n                        color: '#ffffff',\r\n                        padding: '3px 10px',\r\n                        borderRadius: '10px',\r\n                        fontSize: '11px',\r\n                        fontWeight: '600',\r\n                        marginLeft: '10px'\r\n                      }}>\r\n                        {getStatusBadge(request.status, request.receivedByPIC)}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    {/* Tracking Progress */}\r\n                    <div style={{ marginBottom: '8px' }}>\r\n                      <div style={{ fontSize: '12px', color: '#64748b', marginBottom: '4px', fontWeight: '500' }}>\r\n                        Tracking Progress:\r\n                      </div>\r\n                      <div style={{ \r\n                        display: 'flex', \r\n                        alignItems: 'center', \r\n                        gap: '0px',\r\n                        background: '#ffffff',\r\n                        padding: '8px',\r\n                        borderRadius: '6px',\r\n                        border: '1px solid #e2e8f0'\r\n                      }}>\r\n                        {/* Placed Stage */}\r\n                        <div style={{ \r\n                          display: 'flex', \r\n                          flexDirection: 'column',\r\n                          alignItems: 'center',\r\n                          gap: '3px',\r\n                          minWidth: '75px'\r\n                        }}>\r\n                          <div style={{ \r\n                            width: '28px',\r\n                            height: '28px',\r\n                            borderRadius: '50%',\r\n                            background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            color: 'white',\r\n                            fontSize: '12px',\r\n                            fontWeight: 'bold'\r\n                          }}>\r\n                            ✓\r\n                          </div>\r\n                          <span style={{ \r\n                            fontSize: '10px', \r\n                            fontWeight: '600',\r\n                            color: '#1f2937',\r\n                            textAlign: 'center'\r\n                          }}>\r\n                            Placed\r\n                          </span>\r\n                          <span style={{ \r\n                            fontSize: '9px', \r\n                            color: '#10b981',\r\n                            fontWeight: '500'\r\n                          }}>\r\n                            Done\r\n                          </span>\r\n                          <span style={{ \r\n                            fontSize: '8px', \r\n                            color: '#6b7280'\r\n                          }}>\r\n                            {new Date(request.createdAt).toLocaleDateString()}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        {/* Connector 1 */}\r\n                        <div style={{ \r\n                          width: '16px',\r\n                          height: '2px',\r\n                          background: 'linear-gradient(90deg, #10b981 0%, #d1fae5 100%)',\r\n                          margin: '0 3px'\r\n                        }}></div>\r\n                        \r\n                        {/* PM Stage */}\r\n                        <div style={{ \r\n                          display: 'flex', \r\n                          flexDirection: 'column',\r\n                          alignItems: 'center',\r\n                          gap: '3px',\r\n                          minWidth: '75px'\r\n                        }}>\r\n                          <div style={{ \r\n                            width: '28px',\r\n                            height: '28px',\r\n                            borderRadius: '50%',\r\n                            background: (request.status?.includes('pm') || request.status?.includes('project manager')) ? \r\n                                          (request.status?.includes('denied') ? 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)' : 'linear-gradient(135deg, #10b981 0%, #059669 100%)') : \r\n                                          'linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            color: 'white',\r\n                            fontSize: '12px',\r\n                            fontWeight: 'bold'\r\n                          }}>\r\n                            {(request.status?.includes('pm') || request.status?.includes('project manager')) ? \r\n                              (request.status?.includes('denied') ? '✗' : '✓') : '○'}\r\n                          </div>\r\n                          <span style={{ \r\n                            fontSize: '10px', \r\n                            fontWeight: '600',\r\n                            color: '#1f2937',\r\n                            textAlign: 'center'\r\n                          }}>\r\n                            Project Manager\r\n                          </span>\r\n                          <span style={{ \r\n                            fontSize: '9px', \r\n                            color: (request.status?.includes('pm') || request.status?.includes('project manager')) ? \r\n                                   (request.status?.includes('denied') ? '#ef4444' : '#10b981') : '#6b7280',\r\n                            fontWeight: '500'\r\n                          }}>\r\n                            {(request.status?.includes('pm') || request.status?.includes('project manager')) ? \r\n                              (request.status?.includes('denied') ? 'Rejected' : 'Approved') : 'Pending'}\r\n                          </span>\r\n                          <span style={{ \r\n                            fontSize: '8px', \r\n                            color: '#6b7280'\r\n                          }}>\r\n                            {request.pmApprovedAt ? new Date(request.pmApprovedAt).toLocaleDateString() : 'N/A'}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        {/* Connector 2 */}\r\n                        <div style={{ \r\n                          width: '16px',\r\n                          height: '2px',\r\n                          background: (request.status?.includes('pm') || request.status?.includes('project manager')) && !request.status?.includes('denied') ? \r\n                                        'linear-gradient(90deg, #10b981 0%, #d1fae5 100%)' : \r\n                                        'linear-gradient(90deg, #e5e7eb 0%, #f3f4f6 100%)',\r\n                          margin: '0 3px'\r\n                        }}></div>\r\n                        \r\n                        {/* AM Stage */}\r\n                        <div style={{ \r\n                          display: 'flex', \r\n                          flexDirection: 'column',\r\n                          alignItems: 'center',\r\n                          gap: '3px',\r\n                          minWidth: '75px'\r\n                        }}>\r\n                          <div style={{ \r\n                            width: '28px',\r\n                            height: '28px',\r\n                            borderRadius: '50%',\r\n                            background: (request.status?.includes('am') || request.status?.includes('area manager')) ? \r\n                                          (request.status?.includes('denied') ? 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)' : 'linear-gradient(135deg, #10b981 0%, #059669 100%)') : \r\n                                          'linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            color: 'white',\r\n                            fontSize: '12px',\r\n                            fontWeight: 'bold'\r\n                          }}>\r\n                            {(request.status?.includes('am') || request.status?.includes('area manager')) ? \r\n                              (request.status?.includes('denied') ? '✗' : '✓') : '○'}\r\n                          </div>\r\n                          <span style={{ \r\n                            fontSize: '10px', \r\n                            fontWeight: '600',\r\n                            color: '#1f2937',\r\n                            textAlign: 'center'\r\n                          }}>\r\n                            Area Manager\r\n                          </span>\r\n                          <span style={{ \r\n                            fontSize: '9px', \r\n                            color: (request.status?.includes('am') || request.status?.includes('area manager')) ? \r\n                                   (request.status?.includes('denied') ? '#ef4444' : '#10b981') : '#6b7280',\r\n                            fontWeight: '500'\r\n                          }}>\r\n                            {(request.status?.includes('am') || request.status?.includes('area manager')) ? \r\n                              (request.status?.includes('denied') ? 'Rejected' : 'Approved') : 'Pending'}\r\n                          </span>\r\n                          <span style={{ \r\n                            fontSize: '8px', \r\n                            color: '#6b7280'\r\n                          }}>\r\n                            {request.amApprovedAt ? new Date(request.amApprovedAt).toLocaleDateString() : 'N/A'}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        {/* Connector 3 */}\r\n                        <div style={{ \r\n                          width: '16px',\r\n                          height: '2px',\r\n                          background: (request.status?.includes('am') || request.status?.includes('area manager')) && !request.status?.includes('denied') ? \r\n                                        'linear-gradient(90deg, #10b981 0%, #d1fae5 100%)' : \r\n                                        'linear-gradient(90deg, #e5e7eb 0%, #f3f4f6 100%)',\r\n                          margin: '0 3px'\r\n                        }}></div>\r\n                        \r\n                        {/* Received Stage */}\r\n                        <div style={{ \r\n                          display: 'flex', \r\n                          flexDirection: 'column',\r\n                          alignItems: 'center',\r\n                          gap: '3px',\r\n                          minWidth: '75px'\r\n                        }}>\r\n                          <div style={{ \r\n                            width: '28px',\r\n                            height: '28px',\r\n                            borderRadius: '50%',\r\n                            background: request.receivedByPIC ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)' : 'linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%)',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            color: 'white',\r\n                            fontSize: '12px',\r\n                            fontWeight: 'bold'\r\n                          }}>\r\n                            {request.receivedByPIC ? '✓' : '○'}\r\n                          </div>\r\n                          <span style={{ \r\n                            fontSize: '10px', \r\n                            fontWeight: '600',\r\n                            color: '#1f2937',\r\n                            textAlign: 'center'\r\n                          }}>\r\n                            Received\r\n                          </span>\r\n                          <span style={{ \r\n                            fontSize: '9px', \r\n                            color: request.receivedByPIC ? '#10b981' : '#6b7280',\r\n                            fontWeight: '500'\r\n                          }}>\r\n                            {request.receivedByPIC ? 'Received' : 'Pending'}\r\n                          </span>\r\n                          <span style={{ \r\n                            fontSize: '8px', \r\n                            color: '#6b7280'\r\n                          }}>\r\n                            {request.receivedByPIC ? new Date(request.receivedByPIC).toLocaleDateString() : 'N/A'}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Request Details */}\r\n                    <div style={{ \r\n                      display: 'flex', \r\n                      justifyContent: 'space-between', \r\n                      alignItems: 'center',\r\n                      marginBottom: '8px'\r\n                    }}>\r\n                      <div style={{ fontSize: '11px', color: '#64748b' }}>\r\n                        <span style={{ fontWeight: '500' }}>Project: {request.project?.projectName || '-'}</span> • {new Date(request.createdAt).toLocaleDateString()}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Action Buttons */}\r\n                    <div style={{ display: 'flex', gap: '8px', justifyContent: 'flex-end' }}>\r\n                      <Link to={`/pic/material-request/${request._id}`} className=\"view-details-btn\">View Details</Link>\r\n                      <Link to={`/pic/material-request/edit/${request._id}`} className=\"edit-btn\" style={{\r\n                        padding: '6px 12px',\r\n                        backgroundColor: '#3b82f6',\r\n                        color: 'white',\r\n                        textDecoration: 'none',\r\n                        borderRadius: '4px',\r\n                        fontSize: '11px',\r\n                        fontWeight: '500',\r\n                        transition: 'all 0.2s ease',\r\n                        border: 'none',\r\n                        cursor: 'pointer'\r\n                      }}\r\n                      onMouseEnter={(e) => {\r\n                        e.target.style.backgroundColor = '#2563eb';\r\n                      }}\r\n                      onMouseLeave={(e) => {\r\n                        e.target.style.backgroundColor = '#3b82f6';\r\n                      }}>\r\n                        Edit\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {sorted.length > 0 && (\r\n            <div className=\"pagination-section\">\r\n              <div className=\"pagination-info\">Showing {startIndex + 1} to {Math.min(startIndex + ITEMS_PER_PAGE, sorted.length)} of {sorted.length} entries</div>\r\n              <div className=\"pagination-controls\">\r\n                <button className=\"pagination-btn\" disabled={currentPage===1} onClick={()=>setCurrentPage(p=>Math.max(1,p-1))}>Previous</button>\r\n                {Array.from({ length: totalPages }, (_, i) => i + 1).map(n => (\r\n                  <button key={n} className={`pagination-btn ${currentPage===n?'active':''}`} onClick={()=>setCurrentPage(n)}>{n}</button>\r\n                ))}\r\n                <button className=\"pagination-btn\" disabled={currentPage===totalPages} onClick={()=>setCurrentPage(p=>Math.min(totalPages,p+1))}>Next</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport ProjectView from '../project/ProjectView';\r\n\r\n// Minimal unified PIC wrapper. All PIC behavior handled inside ProjectView (roleConfigs.pic).\r\nexport default function PicProject() {\r\n\treturn <ProjectView role=\"pic\" useUnifiedHeader />;\r\n}\r\n\r\nexport const PicCurrentProject = PicProject;\r\n\r\n","import React from 'react';\r\nimport './style/ProgressTracker.css';\r\n\r\nconst steps = [\r\n  { label: \"Placed\", emoji: \"📝\", key: \"placed\" },\r\n  { label: \"Project Manager\", emoji: \"👤\", key: \"project manager\" },\r\n  { label: \"Area Manager\", emoji: \"🏢\", key: \"area manager\" },\r\n  { label: \"Received\", emoji: \"✅\", key: \"received\" }\r\n];\r\n\r\n// Format date and time in local format (show — if no date)\r\nfunction formatDateTime(date) {\r\n  if (!date) return \"—\";\r\n  try {\r\n    const d = new Date(date);\r\n    return d.toLocaleDateString() + ', ' + d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  } catch {\r\n    return \"—\";\r\n  }\r\n}\r\n\r\nfunction getStepInfo(request) {\r\n  if (!request) {\r\n    // All steps pending fallback\r\n    return steps.map(() => ({\r\n      status: \"Pending\",\r\n      date: \"—\",\r\n      decision: \"pending\"\r\n    }));\r\n  }\r\n\r\n  const info = [];\r\n  let denied = false;\r\n\r\n  // 1. Placed\r\n  info.push({\r\n    status: \"Completed\",\r\n    date: formatDateTime(request.createdAt),\r\n    decision: \"placed\"\r\n  });\r\n\r\n  // 2. Project Manager approval\r\n  const pm = (request.approvals || []).find(a =>\r\n    (a.role || '').toLowerCase().includes(\"project manager\")\r\n  );\r\n  if (denied) {\r\n    info.push({ status: \"—\", date: \"—\", decision: \"inactive\" });\r\n  } else if (pm) {\r\n    if (pm.decision === \"approved\") {\r\n      info.push({\r\n        status: \"Approved\",\r\n        date: formatDateTime(pm.timestamp),\r\n        decision: \"approved\"\r\n      });\r\n    } else if (pm.decision === \"denied\") {\r\n      denied = true;\r\n      info.push({\r\n        status: \"Denied\",\r\n        date: formatDateTime(pm.timestamp),\r\n        decision: \"denied\"\r\n      });\r\n    }\r\n  } else {\r\n    info.push({ status: \"Pending\", date: \"—\", decision: \"pending\" });\r\n  }\r\n\r\n  // 3. Area Manager approval\r\n  const am = (request.approvals || []).find(a =>\r\n    (a.role || '').toLowerCase().includes(\"area manager\")\r\n  );\r\n  if (denied) {\r\n    info.push({ status: \"—\", date: \"—\", decision: \"inactive\" });\r\n  } else if (am) {\r\n    if (am.decision === \"approved\") {\r\n      info.push({\r\n        status: \"Approved\",\r\n        date: formatDateTime(am.timestamp),\r\n        decision: \"approved\"\r\n      });\r\n    } else if (am.decision === \"denied\") {\r\n      denied = true;\r\n      info.push({\r\n        status: \"Denied\",\r\n        date: formatDateTime(am.timestamp),\r\n        decision: \"denied\"\r\n      });\r\n    }\r\n  } else {\r\n    info.push({ status: \"Pending\", date: \"—\", decision: \"pending\" });\r\n  }\r\n\r\n  // 4. Received (only if not denied)\r\n  if (denied) {\r\n    info.push({ status: \"—\", date: \"—\", decision: \"inactive\" });\r\n  } else if (request.receivedByPIC) {\r\n    info.push({\r\n      status: \"Received\",\r\n      date: formatDateTime(request.receivedDate),\r\n      decision: \"received\"\r\n    });\r\n  } else {\r\n    info.push({ status: \"Pending\", date: \"—\", decision: \"pending\" });\r\n  }\r\n\r\n  return info;\r\n}\r\n\r\nexport default function ProgressTracker({ request }) {\r\n  const stepInfo = getStepInfo(request);\r\n\r\n  return (\r\n    <div className=\"progress-tracker\">\r\n      {steps.map((step, idx) => {\r\n        const info = stepInfo[idx];\r\n        // Color/Status Logic\r\n        let cls = \"step-circle\";\r\n        if (\r\n          info.decision === \"approved\" ||\r\n          info.decision === \"placed\" ||\r\n          info.decision === \"received\"\r\n        ) {\r\n          cls += \" completed\";\r\n        } else if (info.decision === \"denied\") {\r\n          cls += \" denied\";\r\n        } else if (info.decision === \"inactive\") {\r\n          cls += \" inactive\";\r\n        } else if (\r\n          info.status === \"Pending\" &&\r\n          !stepInfo.slice(idx + 1).some(s => s.status === \"Approved\")\r\n        ) {\r\n          cls += \" active\";\r\n        }\r\n\r\n        return (\r\n          <React.Fragment key={idx}>\r\n            <div className=\"step-vertical\">\r\n              <div className={cls}>\r\n                <span style={{ fontSize: 18 }}>{step.emoji}</span>\r\n              </div>\r\n              <div className=\"step-label\">{step.label}</div>\r\n              <div className={`step-status step-status-${info.decision}`}>{info.status}</div>\r\n              <div className=\"step-date\">{info.date}</div>\r\n            </div>\r\n            {idx < steps.length - 1 && (\r\n              <div\r\n                className={`step-line ${\r\n                  info.decision === \"approved\" ||\r\n                  info.decision === \"placed\" ||\r\n                  info.decision === \"received\"\r\n                    ? \"completed\"\r\n                    : info.decision === \"denied\"\r\n                    ? \"denied\"\r\n                    : info.decision === \"inactive\"\r\n                    ? \"inactive\"\r\n                    : \"\"\r\n                }`}\r\n              ></div>\r\n            )}\r\n          </React.Fragment>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport NotificationBell from '../NotificationBell';\r\nimport '../style/pic_style/Pic_MatReq.css';\r\nimport '../style/pm_style/Pm_Dash.css';\r\n\r\n// React Icons\r\nimport { FaTachometerAlt, FaComments, FaClipboardList, FaEye, FaProjectDiagram } from 'react-icons/fa';\r\nimport AppHeader from '../layout/AppHeader';\r\n\r\nconst chats = [\r\n  { id: 1, name: 'Rychea Miralles', initial: 'R', message: 'Hello Good Morning po! As...', color: '#4A6AA5' },\r\n  { id: 2, name: 'Third Castellar', initial: 'T', message: 'Hello Good Morning po! As...', color: '#2E7D32' },\r\n  { id: 3, name: 'Zenarose Miranda', initial: 'Z', message: 'Hello Good Morning po! As...', color: '#9C27B0' }\r\n];\r\n\r\nconst PicMatReq = () => {\r\n  const { projectId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [project, setProject] = useState(null);\r\n  const [profileMenuOpen, setProfileMenuOpen] = useState(false);\r\n  const [uploadedFiles, setUploadedFiles] = useState([]);\r\n  const [previewImages, setPreviewImages] = useState([]);\r\n  const [materials, setMaterials] = useState([{ id: 1, materialName: '', quantity: '', unit: '' }]);\r\n  const [formData, setFormData] = useState({ description: '' });\r\n  const [errors, setErrors] = useState({ description:'', materials:'', global:'' });\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const submitLockRef = useRef(false);\r\n  const token = localStorage.getItem('token');\r\n    const storedUser = localStorage.getItem('user');\r\n    const user = storedUser ? JSON.parse(storedUser) : null;\r\n  const [userName, setUserName] = useState(user?.name || 'PIC');\r\n  const [userRole, setUserRole] = useState(user?.role || 'Person in Charge');\r\n  const [isHeaderCollapsed, setIsHeaderCollapsed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!token || !user) navigate('/');\r\n  }, [navigate, token, user]);\r\n\r\n  useEffect(() => {\r\n    if (!token || !projectId) return;\r\n    api.get(`/projects/${projectId}`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n      .then(res => setProject(res.data))\r\n      .catch(() => setProject(null));\r\n  }, [projectId, token]);\r\n\r\n  useEffect(() => {\r\n    return () => previewImages.forEach(url => URL.revokeObjectURL(url));\r\n  }, [previewImages.length]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (!event.target.closest(\".user-profile\")) {\r\n        setProfileMenuOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n    return () => document.removeEventListener(\"click\", handleClickOutside);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n      const shouldCollapse = scrollTop > 50;\r\n      setIsHeaderCollapsed(shouldCollapse);\r\n    };\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleMaterialChange = (id, field, value) => {\r\n    setMaterials(prev =>\r\n      prev.map(m => {\r\n        if (m.id === id) {\r\n          if (field === 'quantity') {\r\n            let filtered = value.replace(/\\D/g, '').slice(0, 7);\r\n            return { ...m, [field]: filtered };\r\n          }\r\n          return { ...m, [field]: value };\r\n        }\r\n        return m;\r\n      })\r\n    );\r\n  };\r\n\r\n  const addMaterial = () => {\r\n    const newId = materials.length ? Math.max(...materials.map(m => m.id)) + 1 : 1;\r\n    setMaterials(prev => [...prev, { id: newId, materialName: '', quantity: '', unit: '' }]);\r\n  };\r\n\r\n  const removeMaterial = (id) => {\r\n    if (materials.length > 1) {\r\n      setMaterials(prev => prev.filter(m => m.id !== id));\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    setUploadedFiles(prev => [...prev, ...files]);\r\n    const previews = files.map(file => URL.createObjectURL(file));\r\n    setPreviewImages(prev => [...prev, ...previews]);\r\n  };\r\n\r\n  const removeFile = (index) => {\r\n    setUploadedFiles(prev => prev.filter((_, i) => i !== index));\r\n    setPreviewImages(prev => {\r\n      URL.revokeObjectURL(prev[index]);\r\n      return prev.filter((_, i) => i !== index);\r\n    });\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/');\r\n  };\r\n\r\n  const validate = () => {\r\n    const newErrors = { description:'', materials:'', global:'' };\r\n    if(!formData.description.trim()) newErrors.description = 'Description is required';\r\n    const validMaterials = materials.filter(m => m.materialName.trim() && m.quantity.trim() && m.unit.trim());\r\n    if(validMaterials.length === 0) newErrors.materials = 'Add at least one complete material row';\r\n    // Highlight incomplete rows\r\n    if(materials.some(m => (m.materialName||'').trim() && (!m.quantity.trim() || !m.unit.trim()))) {\r\n      newErrors.materials = newErrors.materials || 'Complete all fields in each row';\r\n    }\r\n    setErrors(newErrors);\r\n    return { ok: !newErrors.description && !newErrors.materials, validMaterials };\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if(submitLockRef.current || submitting) return; // prevent double click\r\n    if(!token){\r\n      setErrors(prev=>({...prev, global:'Session expired. Please login.'}));\r\n      navigate('/');\r\n      return;\r\n    }\r\n    const { ok, validMaterials } = validate();\r\n    if(!ok) return;\r\n    submitLockRef.current = true; setSubmitting(true); setErrors(prev=>({...prev, global:''}));\r\n    const data = new FormData();\r\n    uploadedFiles.forEach(file => data.append('attachments', file));\r\n    data.append('description', formData.description.trim());\r\n    data.append('materials', JSON.stringify(validMaterials));\r\n    data.append('project', projectId);\r\n    try {\r\n      const res = await api.post('/requests', data, { headers: { Authorization: `Bearer ${token}` } });\r\n      if(res?.data?.msg === 'Invalid token'){\r\n        setErrors(prev=>({...prev, global:'Session expired. Please login.'}));\r\n        localStorage.removeItem('token'); localStorage.removeItem('user'); navigate('/'); return;\r\n      }\r\n      // Soft success UI reset\r\n      setFormData({ description: '' });\r\n      setMaterials([{ id: 1, materialName: '', quantity: '', unit: '' }]);\r\n      setUploadedFiles([]); setPreviewImages([]);\r\n      setErrors({ description:'', materials:'', global:'Request submitted successfully.' });\r\n    } catch(err){\r\n      const apiMsg = err?.response?.data?.message || 'Submission failed';\r\n      setErrors(prev=>({...prev, global: apiMsg }));\r\n    } finally { submitLockRef.current = false; setSubmitting(false); }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n  <AppHeader roleSegment=\"pic\" />\r\n\r\n\r\n      {/* Main content */}\r\n      <div className=\"dashboard-layout\">\r\n        <main className=\"dashboard-main\">\r\n          <div className=\"page-container\">\r\n            <div className=\"request-materials-container-picmatreq\">\r\n              {/* Header Section with Title and Back Button */}\r\n              <div className=\"form-header-section\">\r\n                <div className=\"page-title-section\">\r\n                  <h1 className=\"page-title-picmatreq\">Request Materials</h1>\r\n                  <p className=\"page-description\">Create a new request for your project</p>\r\n                </div>\r\n                \r\n                <div className=\"back-button-container\">\r\n                  <button \r\n                    onClick={() => navigate('/pic/requests')} \r\n                    className=\"back-button\"\r\n                  >\r\n                    ← Back to Requests\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            {project && (\r\n                <div className=\"project-details-box\">\r\n                  <h2 className=\"project-name\">{project.name}</h2>\r\n                  <p className=\"project-location\">\r\n                    {project.location?.name} ({project.location?.region})\r\n                  </p>\r\n                  <p className=\"project-target-date\">Target Date: {project.targetDate}</p>\r\n                </div>\r\n            )}\r\n              \r\n            <div className=\"materials-form-picmatreq\">\r\n              <div className=\"form-group-picmatreq\">\r\n                <label className=\"form-label-picmatreq\">Material to be Requested</label>\r\n                <div className=\"materials-list-picmatreq\">\r\n                  <div className=\"material-headers-picmatreq\">\r\n                    <span className=\"material-header-label-picmatreq\">MATERIAL NAME</span>\r\n                    <span className=\"quantity-header-label-picmatreq\">QUANTITY</span>\r\n                    <span className=\"unit-header-label-picmatreq\">UNIT</span>\r\n                    <span className=\"action-header-label-picmatreq\"></span>\r\n                  </div>\r\n                  {materials.map((material) => (\r\n                    <div key={material.id} className=\"material-row-picmatreq\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={material.materialName}\r\n                        onChange={(e) => handleMaterialChange(material.id, 'materialName', e.target.value)}\r\n                        placeholder=\"Enter material name\"\r\n                        className=\"material-input-picmatreq\"\r\n                      />\r\n                      <input\r\n                        type=\"text\"\r\n                        inputMode=\"numeric\"\r\n                        pattern=\"[0-9]*\"\r\n                        value={material.quantity}\r\n                        onChange={(e) => handleMaterialChange(material.id, 'quantity', e.target.value)}\r\n                        placeholder=\"Quantity\"\r\n                        maxLength={7}\r\n                        className=\"quantity-input-picmatreq\"\r\n                        onPaste={e => {\r\n                          const paste = e.clipboardData.getData('text');\r\n                          if (!/^\\d+$/.test(paste)) e.preventDefault();\r\n                          if (paste.length > 7) e.preventDefault();\r\n                        }}\r\n                        onKeyPress={e => {\r\n                          if (!/[0-9]/.test(e.key) || material.quantity.length >= 7) {\r\n                            e.preventDefault();\r\n                          }\r\n                        }}\r\n                      />\r\n                      <select\r\n                        value={material.unit}\r\n                        onChange={(e) => handleMaterialChange(material.id, 'unit', e.target.value)}\r\n                        className=\"unit-select-picmatreq\"\r\n                        required\r\n                      >\r\n                        <option value=\"\">Select Unit</option>\r\n                        <option value=\"kg\">Kilograms (kg)</option>\r\n                        <option value=\"g\">Grams (g)</option>\r\n                        <option value=\"ton\">Metric Tons (ton)</option>\r\n                        <option value=\"bag\">Bags</option>\r\n                        <option value=\"piece\">Pieces</option>\r\n                        <option value=\"box\">Boxes</option>\r\n                        <option value=\"roll\">Rolls</option>\r\n                        <option value=\"sheet\">Sheets</option>\r\n                        <option value=\"m\">Meters (m)</option>\r\n                        <option value=\"cm\">Centimeters (cm)</option>\r\n                        <option value=\"m2\">Square Meters (m²)</option>\r\n                        <option value=\"m3\">Cubic Meters (m³)</option>\r\n                        <option value=\"l\">Liters (L)</option>\r\n                        <option value=\"truck\">Truck Loads</option>\r\n                        <option value=\"set\">Sets</option>\r\n                        <option value=\"pair\">Pairs</option>\r\n                        <option value=\"bundle\">Bundles</option>\r\n                      </select>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => removeMaterial(material.id)}\r\n                        className=\"remove-material-btn-picmatreq\"\r\n                        disabled={materials.length === 1}\r\n                      >\r\n                        ✕\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={addMaterial}\r\n                    className=\"add-material-btn-picmatreq\"\r\n                  >\r\n                    + Add Material\r\n                  </button>\r\n                  {errors.materials && <div style={{marginTop:8,color:'#dc2626',fontSize:12,fontWeight:500}}>{errors.materials}</div>}\r\n                </div>\r\n              </div>\r\n                \r\n              <div className=\"form-group-picmatreq\">\r\n                <label className=\"form-label-picmatreq\">Attachment Proof</label>\r\n                <div className=\"upload-section-picmatreq\">\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"file-upload\"\r\n                    multiple\r\n                    accept=\"image/*\"\r\n                    onChange={handleFileUpload}\r\n                    className=\"file-input-picmatreq\"\r\n                  />\r\n                  <label htmlFor=\"file-upload\" className=\"upload-button\">\r\n                    <span className=\"upload-icon-picmatreq\">📎</span>\r\n                    Upload\r\n                  </label>\r\n                  {previewImages.length > 0 && (\r\n                    <div className=\"preview-container\" style={{ display: 'flex', gap: '10px', flexWrap: 'wrap', marginTop: '10px' }}>\r\n                      {previewImages.map((src, index) => (\r\n                        <div key={index} style={{ position: 'relative' }}>\r\n                          <img\r\n                            src={src}\r\n                            alt={`preview-${index}`}\r\n                            style={{\r\n                              width: '200px',\r\n                              height: '200px',\r\n                              objectFit: 'cover',\r\n                              borderRadius: '8px',\r\n                              border: '1px solid #ccc'\r\n                            }}\r\n                          />\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => removeFile(index)}\r\n                            style={{\r\n                              position: 'absolute',\r\n                              top: '-6px',\r\n                              right: '-6px',\r\n                              background: '#ff4d4f',\r\n                              color: '#fff',\r\n                              border: 'none',\r\n                              borderRadius: '50%',\r\n                              width: '20px',\r\n                              height: '20px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                          >\r\n                            ×\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  <p className=\"upload-hint-picmatreq\">You can attach files such as documents or images</p>\r\n                </div>\r\n              </div>\r\n                \r\n              <div className=\"form-group-picmatreq\">\r\n                <label className=\"form-label-picmatreq\">Request Description</label>\r\n                <textarea\r\n                  name=\"description\"\r\n                  value={formData.description}\r\n                  onChange={handleChange}\r\n                  className=\"description-textarea-picmatreq\"\r\n                  rows=\"6\"\r\n                  placeholder=\"Provide a detailed description of your request\"\r\n                />\r\n                {errors.description && <div style={{marginTop:4,color:'#dc2626',fontSize:12,fontWeight:500}}>{errors.description}</div>}\r\n              </div>\r\n                \r\n              {errors.global && <div style={{marginTop:12,fontSize:13,color: errors.global.includes('successfully')? '#16a34a':'#dc2626',fontWeight:500}}>{errors.global}</div>}\r\n              <div className=\"form-actions-picmatreq\" style={{marginTop:16}}>\r\n                <button onClick={handleSubmit} disabled={submitting} className=\"publish-button-picmatreq\" style={{opacity: submitting? .6:1,cursor: submitting? 'not-allowed':'pointer'}}>\r\n                  {submitting? 'Submitting...' : 'Publish Request'}\r\n                </button>\r\n              </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PicMatReq;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate, useParams, Link } from 'react-router-dom';\r\nimport axiosInstance from '../../api/axiosInstance';\r\nimport NotificationBell from '../NotificationBell';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport '../../components/style/it_style/ItMaterialRequestDetail.css';\r\nimport '../style/pm_style/Pm_Dash.css';\r\n\r\nconst MaterialRequestDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const user = JSON.parse(localStorage.getItem('user'));\r\n  const userId = user?._id;\r\n\r\n  const [materialRequest, setMaterialRequest] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [isHeaderCollapsed, setIsHeaderCollapsed] = useState(false);\r\n  const [isProfileOpen, setIsProfileOpen] = useState(false);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [project, setProject] = useState(null);\r\n  const [materials, setMaterials] = useState([]);\r\n  const [description, setDescription] = useState('');\r\n  const [attachments, setAttachments] = useState([]);\r\n  const [newFiles, setNewFiles] = useState([]);\r\n  const profileDropdownRef = useRef(null);\r\n\r\n  const isPIC = user?._id === materialRequest?.createdBy?._id;\r\n\r\n  useEffect(() => {\r\n    axiosInstance.get(`/requests/${id}`)\r\n      .then(res => {\r\n        const data = res.data;\r\n        setMaterialRequest(data);\r\n        const materialsWithIds = (data.materials || []).map((mat, idx) => ({\r\n          ...mat,\r\n          id: mat.id || Date.now() + idx\r\n        }));\r\n        setMaterials(materialsWithIds);\r\n        setDescription(data.description || '');\r\n        setAttachments(data.attachments || []);\r\n        setError('');\r\n      })\r\n      .catch(() => setError('Failed to load request details.'))\r\n      .finally(() => setLoading(false));\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (profileDropdownRef.current && !profileDropdownRef.current.contains(event.target)) {\r\n        setIsProfileOpen(false);\r\n      }\r\n    };\r\n\r\n    const handleScroll = () => {\r\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n      setIsHeaderCollapsed(scrollTop > 50);\r\n    };\r\n\r\n    document.addEventListener('click', handleClickOutside);\r\n    window.addEventListener('scroll', handleScroll);\r\n    \r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n      window.removeEventListener('scroll', handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/');\r\n  };\r\n\r\n  const handleBack = () => navigate(-1);\r\n\r\n  const handleMaterialChange = (id, field, value) => {\r\n    setMaterials(prev =>\r\n      prev.map(m => (m.id === id ? { ...m, [field]: value } : m))\r\n    );\r\n  };\r\n\r\n  const handleAddMaterial = () => {\r\n    setMaterials(prev => [\r\n      ...prev,\r\n      { id: Date.now(), materialName: '', quantity: '' }\r\n    ]);\r\n  };\r\n\r\n  const handleDeleteMaterial = id => {\r\n    setMaterials(prev => prev.filter(m => m.id !== id));\r\n  };\r\n\r\n  const handleFileUpload = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    setNewFiles(prev => [...prev, ...files]);\r\n  };\r\n\r\n  const handleRemoveNewFile = (idx) => setNewFiles(prev => prev.filter((_, i) => i !== idx));\r\n\r\n  const handleRemoveAttachment = (idx) => {\r\n    setAttachments(prev => prev.filter((_, i) => i !== idx));\r\n  };\r\n\r\n  const getAttachmentUrl = (file) =>\r\n    file.startsWith('http') ? file : `http://localhost:5000/uploads/${file}`;\r\n\r\n  const handleSaveEdit = async () => {\r\n    const formData = new FormData();\r\n    const materialsToSave = materials.map(({ id, ...mat }) => mat);\r\n    formData.append('materials', JSON.stringify(materialsToSave));\r\n    formData.append('description', description);\r\n    formData.append('attachments', JSON.stringify(attachments));\r\n    newFiles.forEach(file => formData.append('newAttachments', file));\r\n\r\n    try {\r\n      const res = await axiosInstance.put(`/requests/${id}`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n      const updated = res.data;\r\n\r\n      const updatedMaterialsWithIds = (updated.materials || []).map((mat, idx) => ({\r\n        ...mat,\r\n        id: mat.id || Date.now() + idx\r\n      }));\r\n      setMaterialRequest(updated);\r\n      setMaterials(updatedMaterialsWithIds);\r\n      setDescription(updated.description || '');\r\n      setAttachments(updated.attachments || []);\r\n      setNewFiles([]);\r\n      setEditMode(false);\r\n      alert('Request updated!');\r\n    } catch (err) {\r\n      alert('Failed to update request');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  // Determine if current user (PIC) can still edit the request.\r\n  // Rules: must be creator (isPIC), not received or cancelled/denied, and no approvals finalized yet.\r\n  const isEditable = (\r\n    !!materialRequest &&\r\n    isPIC &&\r\n    !materialRequest.receivedByPIC &&\r\n    !/denied|cancel|received/i.test(materialRequest.status || '') &&\r\n    !(materialRequest.approvals?.projectManager?.approved || materialRequest.approvals?.areaManager?.approved)\r\n  );\r\n\r\n  // Mark the request as received (PIC acknowledgement after full approval)\r\n  const handleMarkReceived = async () => {\r\n    if (!materialRequest || materialRequest.receivedByPIC) return;\r\n    if (!window.confirm('Mark all materials in this request as received?')) return;\r\n    try {\r\n      await axiosInstance.patch(`/requests/${materialRequest._id}/received`);\r\n      setMaterialRequest(prev => prev ? ({\r\n        ...prev,\r\n        receivedByPIC: true,\r\n        receivedDate: new Date().toISOString(),\r\n        status: 'Received'\r\n      }) : prev);\r\n      alert('Marked as received.');\r\n    } catch (e) {\r\n      alert(e?.response?.data?.message || 'Failed to mark as received');\r\n    }\r\n  };\r\n\r\n  // Cancel (delete) the material request\r\n  const handleCancelRequest = async () => {\r\n    if (!materialRequest) return;\r\n    if (!window.confirm('Cancel (delete) this material request? This cannot be undone.')) return;\r\n    try {\r\n      await axiosInstance.delete(`/requests/${materialRequest._id}`);\r\n      alert('Request cancelled.');\r\n      navigate('/pic/requests');\r\n    } catch (e) {\r\n      alert(e?.response?.data?.message || 'Failed to cancel request');\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status, receivedByPIC) => {\r\n    const s = (status || '').toLowerCase();\r\n    if (receivedByPIC) return '#0ea5e9';\r\n    if (s.includes('approved')) return '#10b981';\r\n    if (s.includes('pending')) return '#f59e0b';\r\n    if (s.includes('denied') || s.includes('cancel')) return '#ef4444';\r\n    return '#6b7280';\r\n  };\r\n  const getStatusBadge = (status, receivedByPIC) => {\r\n    if (receivedByPIC) return 'Completed';\r\n    const s = (status || '').toLowerCase();\r\n    if (s.includes('approved')) return 'Approved';\r\n    if (s.includes('pending')) return 'Pending';\r\n    if (s.includes('denied') || s.includes('cancel')) return 'Rejected';\r\n    return 'Unknown';\r\n  };\r\n\r\n  // Only fetch user's active/ongoing project\r\n  useEffect(() => {\r\n    if (!userId) return;\r\n    const fetchActiveProject = async () => {\r\n      try {\r\n        const { data } = await axiosInstance.get(`/projects/by-user-status?userId=${userId}&role=pic&status=Ongoing`);\r\n        setProject(data[0] || null);\r\n      } catch (err) {\r\n        setProject(null);\r\n      }\r\n    };\r\n    fetchActiveProject();\r\n  }, [userId]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading request details...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"error-container\">\r\n        <p>{error}</p>\r\n        <button onClick={handleBack} className=\"back-button\">Go Back</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!materialRequest) {\r\n    return (\r\n      <div className=\"error-container\">\r\n        <p>Request not found</p>\r\n        <button onClick={handleBack} className=\"back-button\">Go Back</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n  <AppHeader roleSegment=\"pic\" />\r\n      <div className=\"header-content\" style={{padding:'1.5rem 2rem 0'}}>\r\n        <div className=\"header-left\">\r\n          <h1 className=\"header-title\">Material Request Details</h1>\r\n          <p className=\"header-subtitle\">View and manage material request information</p>\r\n        </div>\r\n        <div className=\"header-right\">\r\n          <div className=\"header-actions\">\r\n            <button onClick={handleBack} className=\"btn-secondary\">\r\n              <i className=\"fas fa-arrow-left\"></i>\r\n              Back to List\r\n            </button>\r\n            {!editMode && isEditable && isPIC && (\r\n              <button onClick={() => setEditMode(true)} className=\"btn-primary\">Edit</button>\r\n            )}\r\n            {editMode && (\r\n              <>\r\n                <button onClick={handleSaveEdit} className=\"btn-primary\">Save</button>\r\n                <button onClick={() => setEditMode(false)} className=\"btn-secondary\">Cancel</button>\r\n              </>\r\n            )}\r\n            {!materialRequest.receivedByPIC && materialRequest.status?.includes('Approved') && isPIC && (\r\n              <button onClick={handleMarkReceived} className=\"btn-success\">Mark Received</button>\r\n            )}\r\n            {isPIC && !materialRequest.receivedByPIC && (\r\n              <button onClick={handleCancelRequest} className=\"btn-danger\">Cancel Request</button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"dashboard-main\">\r\n        <div className=\"page-container\">\r\n          {materialRequest && (\r\n            <div className=\"material-request-detail\">\r\n              {/* Status Badge */}\r\n              <div className=\"status-section\">\r\n                <div \r\n                  className=\"status-badge\"\r\n                  style={{ \r\n                    backgroundColor: getStatusColor(materialRequest.status, materialRequest.receivedByPIC),\r\n                    color: 'white'\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-circle\"></i>\r\n                  {getStatusBadge(materialRequest.status, materialRequest.receivedByPIC)}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Main Content Grid */}\r\n              <div className=\"detail-grid\">\r\n                {/* Left Column - Request Info */}\r\n                <div className=\"detail-column\">\r\n                  <div className=\"detail-card\">\r\n                    <div className=\"card-header\">\r\n                      <h3><i className=\"fas fa-info-circle\"></i> Request Information</h3>\r\n                    </div>\r\n                    <div className=\"card-content\">\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Request ID:</span>\r\n                        <span className=\"info-value\">{materialRequest._id}</span>\r\n                      </div>\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Request Number:</span>\r\n                        <span className=\"info-value\">{materialRequest.requestNumber}</span>\r\n                      </div>\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Description:</span>\r\n                        <span className=\"info-value description-text\">{materialRequest.description}</span>\r\n                      </div>\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Priority:</span>\r\n                        <span className=\"info-value\">\r\n                          <span className={`priority-badge priority-${materialRequest.priority?.toLowerCase()}`}>\r\n                            {materialRequest.priority}\r\n                          </span>\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Requested Date:</span>\r\n                        <span className=\"info-value\">\r\n                          {new Date(materialRequest.createdAt).toLocaleDateString()}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"detail-card\">\r\n                    <div className=\"card-header\">\r\n                      <h3><i className=\"fas fa-user\"></i> Requester Details</h3>\r\n                    </div>\r\n                    <div className=\"card-content\">\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Name:</span>\r\n                        <span className=\"info-value\">{materialRequest.createdBy?.name}</span>\r\n                      </div>\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Email:</span>\r\n                        <span className=\"info-value\">{materialRequest.createdBy?.email}</span>\r\n                      </div>\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Role:</span>\r\n                        <span className=\"info-value\">{materialRequest.createdBy?.role}</span>\r\n                      </div>\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Project:</span>\r\n                        <span className=\"info-value\">{materialRequest.project?.projectName}</span>\r\n                      </div>\r\n                      <div className=\"info-row\">\r\n                        <span className=\"info-label\">Location:</span>\r\n                        <span className=\"info-value\">{materialRequest.project?.location}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Right Column - Materials & Attachments */}\r\n                <div className=\"detail-column\">\r\n                  <div className=\"detail-card\">\r\n                    <div className=\"card-header\">\r\n                      <h3><i className=\"fas fa-boxes\"></i> Requested Materials</h3>\r\n                    </div>\r\n                    <div className=\"card-content\">\r\n                      {materialRequest.materials && materialRequest.materials.length > 0 ? (\r\n                        <div className=\"materials-list\">\r\n                          {materialRequest.materials.map((material, index) => (\r\n                            <div key={index} className=\"material-item\">\r\n                              <div className=\"material-info\">\r\n                                <span className=\"material-name\">{material.materialName}</span>\r\n                                <span className=\"material-quantity\">Qty: {material.quantity}</span>\r\n                              </div>\r\n                              {material.specifications && (\r\n                                <div className=\"material-specs\">\r\n                                  <span className=\"specs-label\">Specifications:</span>\r\n                                  <span className=\"specs-value\">{material.specifications}</span>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      ) : (\r\n                        <p className=\"no-data\">No materials specified</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"detail-card\">\r\n                    <div className=\"card-header\">\r\n                      <h3><i className=\"fas fa-paperclip\"></i> Attachments</h3>\r\n                    </div>\r\n                    <div className=\"card-content\">\r\n                      {materialRequest.attachments && materialRequest.attachments.length > 0 ? (\r\n                        <div className=\"attachments-list\">\r\n                          {materialRequest.attachments.map((attachment, index) => (\r\n                            <div key={index} className=\"attachment-item\">\r\n                              <div className=\"attachment-icon\">\r\n                                <i className=\"fas fa-file\"></i>\r\n                              </div>\r\n                              <div className=\"attachment-info\">\r\n                                <span className=\"attachment-name\">{attachment}</span>\r\n                                <a \r\n                                  href={getAttachmentUrl(attachment)} \r\n                                  target=\"_blank\" \r\n                                  rel=\"noopener noreferrer\"\r\n                                  className=\"attachment-link\"\r\n                                >\r\n                                  <i className=\"fas fa-download\"></i>\r\n                                  Download\r\n                                </a>\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      ) : (\r\n                        <p className=\"no-data\">No attachments</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Approval Status */}\r\n              <div className=\"detail-card full-width\">\r\n                <div className=\"card-header\">\r\n                  <h3><i className=\"fas fa-tasks\"></i> Approval Status</h3>\r\n                </div>\r\n                <div className=\"card-content\">\r\n                  <div className=\"approval-timeline\">\r\n                    <div className=\"timeline-item\">\r\n                      <div className=\"timeline-marker completed\">\r\n                        <i className=\"fas fa-check\"></i>\r\n                      </div>\r\n                      <div className=\"timeline-content\">\r\n                        <h4>Request Submitted</h4>\r\n                        <p>Request was submitted by {materialRequest.createdBy?.name}</p>\r\n                        <span className=\"timeline-date\">\r\n                          {new Date(materialRequest.createdAt).toLocaleString()}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {materialRequest.approvals?.projectManager && (\r\n                      <div className=\"timeline-item\">\r\n                        <div className={`timeline-marker ${materialRequest.approvals.projectManager.approved ? 'completed' : 'pending'}`}>\r\n                          <i className={materialRequest.approvals.projectManager.approved ? 'fas fa-check' : 'fas fa-clock'}></i>\r\n                        </div>\r\n                        <div className=\"timeline-content\">\r\n                          <h4>Project Manager Review</h4>\r\n                          <p>\r\n                            {materialRequest.approvals.projectManager.approved \r\n                              ? `Approved by ${materialRequest.approvals.projectManager.reviewer?.name || 'Project Manager'}`\r\n                              : 'Pending Project Manager approval'\r\n                            }\r\n                          </p>\r\n                          {materialRequest.approvals.projectManager.reviewedAt && (\r\n                            <span className=\"timeline-date\">\r\n                              {new Date(materialRequest.approvals.projectManager.reviewedAt).toLocaleString()}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {materialRequest.approvals?.areaManager && (\r\n                      <div className=\"timeline-item\">\r\n                        <div className={`timeline-marker ${materialRequest.approvals.areaManager.approved ? 'completed' : 'pending'}`}>\r\n                          <i className={materialRequest.approvals.areaManager.approved ? 'fas fa-check' : 'fas fa-clock'}></i>\r\n                        </div>\r\n                        <div className=\"timeline-content\">\r\n                          <h4>Area Manager Review</h4>\r\n                          <p>\r\n                            {materialRequest.approvals.areaManager.approved \r\n                              ? `Approved by ${materialRequest.approvals.areaManager.reviewer?.name || 'Area Manager'}`\r\n                              : 'Pending Area Manager approval'\r\n                            }\r\n                          </p>\r\n                          {materialRequest.approvals.areaManager.reviewedAt && (\r\n                            <span className=\"timeline-date\">\r\n                              {new Date(materialRequest.approvals.areaManager.reviewedAt).toLocaleString()}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"timeline-item\">\r\n                      <div className={`timeline-marker ${materialRequest.receivedByPIC ? 'completed' : 'pending'}`}>\r\n                        <i className={materialRequest.receivedByPIC ? 'fas fa-check' : 'fas fa-clock'}></i>\r\n                      </div>\r\n                      <div className=\"timeline-content\">\r\n                        <h4>Materials Received</h4>\r\n                        <p>\r\n                          {materialRequest.receivedByPIC \r\n                            ? `Materials received by ${materialRequest.createdBy?.name}`\r\n                            : 'Pending materials receipt'\r\n                          }\r\n                        </p>\r\n                        {materialRequest.receivedAt && (\r\n                          <span className=\"timeline-date\">\r\n                            {new Date(materialRequest.receivedAt).toLocaleString()}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"detail-card full-width\">\r\n                <div className=\"card-header\">\r\n                  <h3><i className=\"fas fa-tools\"></i> Actions</h3>\r\n                </div>\r\n                <div className=\"card-content\">\r\n                  <div className=\"action-buttons\" style={{ display: 'flex', gap: '12px', flexWrap: 'wrap' }}>\r\n                    {isEditable && (\r\n                      <>\r\n                        <button onClick={() => setEditMode(true)} className=\"btn-primary\">\r\n                          <i className=\"fas fa-edit\"></i>\r\n                          Edit Request\r\n                        </button>\r\n                        <button onClick={handleCancelRequest} className=\"btn-danger\">\r\n                          <i className=\"fas fa-times\"></i>\r\n                          Cancel Request\r\n                        </button>\r\n                      </>\r\n                    )}\r\n                    {materialRequest.status === 'Approved' && isPIC && (\r\n                      materialRequest.receivedByPIC ? (\r\n                        <div className=\"received-badge\" style={{\r\n                          display: 'inline-flex',\r\n                          alignItems: 'center',\r\n                          gap: '8px',\r\n                          padding: '8px 16px',\r\n                          backgroundColor: '#10b981',\r\n                          color: 'white',\r\n                          borderRadius: '6px',\r\n                          fontWeight: '600'\r\n                        }}>\r\n                          <i className=\"fas fa-check\"></i>\r\n                          Received by PIC\r\n                          {materialRequest.receivedDate && (\r\n                            <span>({new Date(materialRequest.receivedDate).toLocaleString()})</span>\r\n                          )}\r\n                        </div>\r\n                      ) : (\r\n                        <button onClick={handleMarkReceived} className=\"btn-success\">\r\n                          <i className=\"fas fa-check\"></i>\r\n                          Mark as Received\r\n                        </button>\r\n                      )\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaterialRequestDetail;\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport NotificationBell from '../NotificationBell';\r\nimport '../style/pic_style/PicAllProjects.css';\r\nimport { FaSearch, FaSortAmountDown, FaCheckCircle, FaHourglassHalf, FaProjectDiagram } from 'react-icons/fa';\r\nimport AppHeader from '../layout/AppHeader';\r\n\r\nconst PicAllProjects = () => {\r\n  const token = localStorage.getItem('token');\r\n  const stored = localStorage.getItem('user');\r\n  const user = stored ? JSON.parse(stored) : null;\r\n  const userId = user?._id;\r\n\r\n  const navigate = useNavigate();\r\n  const [requests, setRequests] = useState([]); // (kept – may be surfaced later for quick view)\r\n  // Default tab now 'All' so PIC sees every assigned project immediately\r\n  const [activeTab, setActiveTab] = useState('All');\r\n  const [ongoing, setOngoing] = useState([]);\r\n  const [completed, setCompleted] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [project, setProject] = useState(null); // current active project (for nav view button)\r\n  const [search, setSearch] = useState('');\r\n  const [sortKey, setSortKey] = useState('startDate');\r\n  const [sortDir, setSortDir] = useState('asc');\r\n\r\n  // Profile menu and user display\r\n  const [profileMenuOpen, setProfileMenuOpen] = useState(false);\r\n  const [userName, setUserName] = useState(user?.name || '');\r\n  const roleName = (user?.role || user?.userType || user?.position || user?.designation || '').toString();\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (!event.target.closest(\".profile-menu-container\")) {\r\n        setProfileMenuOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"click\", handleClickOutside);\r\n    return () => document.removeEventListener(\"click\", handleClickOutside);\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/');\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!userId) return;\r\n    setLoading(true);\r\n    Promise.all([\r\n      api.get(`/projects/by-user-status?userId=${userId}&role=pic&status=Ongoing`),\r\n      api.get(`/projects/by-user-status?userId=${userId}&role=pic&status=Completed`)\r\n    ])\r\n      .then(([resOngoing, resCompleted]) => {\r\n        setOngoing(resOngoing.data || []);\r\n        setCompleted(resCompleted.data || []);\r\n        setLoading(false);\r\n      })\r\n      .catch(() => {\r\n        setOngoing([]); setCompleted([]); setLoading(false);\r\n      });\r\n  }, [userId]);\r\n\r\n  // Only fetch user's active/ongoing project\r\n  useEffect(() => {\r\n    if (!token || !userId) return;\r\n    const fetchActiveProject = async () => {\r\n      try {\r\n        const { data } = await api.get(`/projects/by-user-status?userId=${userId}&role=pic&status=Ongoing`);\r\n        setProject(data[0] || null);\r\n      } catch (err) {\r\n        setProject(null);\r\n      }\r\n    };\r\n    fetchActiveProject();\r\n  }, [token, userId]);\r\n\r\n  // Fetch requests for this PIC's current project **only**\r\n  useEffect(() => {\r\n    if (!token || !project) return;\r\n\r\n    api.get('/requests/mine', {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n      .then(({ data }) => {\r\n        const projectRequests = Array.isArray(data)\r\n          ? data.filter(r => r.project && r.project._id === project._id)\r\n          : [];\r\n        setRequests(projectRequests);\r\n      })\r\n      .catch(() => setRequests([]));\r\n  }, [token, project]);\r\n\r\n  const decorate = (proj) => {\r\n    const start = proj.startDate ? new Date(proj.startDate) : null;\r\n    const end = proj.endDate ? new Date(proj.endDate) : null;\r\n    const today = new Date();\r\n    let totalDays = null, elapsedDays = null, pctTime = null, daysLeft = null;\r\n    if (start && end && end > start) {\r\n      totalDays = Math.round((end - start) / 86400000) || 1;\r\n      elapsedDays = Math.min(totalDays, Math.max(0, Math.round((today - start) / 86400000)));\r\n      pctTime = Math.min(100, Math.max(0, (elapsedDays / totalDays) * 100));\r\n      daysLeft = Math.max(0, Math.round((end - today) / 86400000));\r\n    }\r\n    return { ...proj, totalDays, elapsedDays, pctTime, daysLeft };\r\n  };\r\n\r\n  const stats = useMemo(() => ({\r\n    ongoing: ongoing.length,\r\n    completed: completed.length,\r\n    total: ongoing.length + completed.length\r\n  }), [ongoing, completed]);\r\n\r\n  const sortFn = (a, b) => {\r\n    const dir = sortDir === 'asc' ? 1 : -1;\r\n    const getVal = (p) => {\r\n      switch (sortKey) {\r\n        case 'name': return p.projectName?.toLowerCase() || '';\r\n        case 'startDate': return p.startDate || '';\r\n        case 'endDate': return p.endDate || '';\r\n        case 'status': return p.status || '';\r\n        default: return p.startDate || '';\r\n      }\r\n    };\r\n    const av = getVal(a), bv = getVal(b);\r\n    if (av < bv) return -1 * dir;\r\n    if (av > bv) return 1 * dir;\r\n    return 0;\r\n  };\r\n\r\n  const filteredOngoing = useMemo(()=> ongoing\r\n    .filter(p=> p.projectName.toLowerCase().includes(search.toLowerCase()))\r\n    .map(decorate)\r\n    .sort(sortFn),[ongoing,search,sortKey,sortDir]);\r\n  const filteredCompleted = useMemo(()=> completed\r\n    .filter(p=> p.projectName.toLowerCase().includes(search.toLowerCase()))\r\n    .map(decorate)\r\n    .sort(sortFn),[completed,search,sortKey,sortDir]);\r\n  const filteredAll = useMemo(()=> [...ongoing, ...completed]\r\n    .filter(p=> p.projectName.toLowerCase().includes(search.toLowerCase()))\r\n    .map(decorate)\r\n    .sort(sortFn),[ongoing,completed,search,sortKey,sortDir]);\r\n\r\n  const toggleSort = (key) => {\r\n    if (sortKey === key) {\r\n      setSortDir(d => d === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortKey(key);\r\n      setSortDir('asc');\r\n    }\r\n  };\r\n\r\n  if (loading) return (\r\n    <div className=\"dashboard-container\"><div className=\"professional-loading-screen\"><div className=\"loading-content\"><div className=\"loading-logo\"><img src={require('../../assets/images/FadzLogo1.png')} alt=\"FadzTrack Logo\" className=\"loading-logo-img\" /></div><div className=\"loading-spinner-container\"><div className=\"loading-spinner\"/></div><div className=\"loading-text\"><h2 className=\"loading-title\">Loading Projects</h2><p className=\"loading-subtitle\">Fetching your project list...</p></div></div></div></div>\r\n  );\r\n\r\n  const ProjectTable = ({ projects, showBadges }) => (\r\n    <div className=\"projects-table-wrapper glass-card\">\r\n      <table className=\"projects-table\">\r\n        <thead>\r\n          <tr>\r\n            <th onClick={()=>toggleSort('name')} className={sortKey==='name'? 'sorted':''}>Project</th>\r\n            <th onClick={()=>toggleSort('status')} className={`${sortKey==='status'? 'sorted ':''}status-col`}>Status</th>\r\n            <th>Timeline</th>\r\n            <th onClick={()=>toggleSort('startDate')} className={sortKey==='startDate'? 'sorted':''}>Start</th>\r\n            <th onClick={()=>toggleSort('endDate')} className={sortKey==='endDate'? 'sorted':''}>End</th>\r\n            <th style={{textAlign:'right'}}>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {projects.length === 0 && (\r\n            <tr>\r\n              <td colSpan={6} className=\"empty-row\">No projects found.</td>\r\n            </tr>\r\n          )}\r\n          {projects.map(proj => (\r\n            <tr key={proj._id}>\r\n              <td>\r\n                <div className=\"proj-main\">\r\n                  <div className=\"proj-title\">{proj.projectName}</div>\r\n                  <div className=\"proj-meta\">{proj.location?.name || 'No location'} • {proj.daysLeft != null ? `${proj.daysLeft}d left` : '—'}</div>\r\n                </div>\r\n              </td>\r\n              <td className=\"status-col\">\r\n                {showBadges ? (\r\n                  <span className={`status-badge badge-${(proj.status||'').toLowerCase()}`}>{proj.status||'—'}</span>\r\n                ) : (\r\n                  <span className=\"status-plain\">{proj.status || '—'}</span>\r\n                )}\r\n              </td>\r\n              <td>\r\n                {proj.pctTime != null ? (\r\n                  <div className=\"timeline-bar\" title={proj.totalDays? `${proj.elapsedDays}/${proj.totalDays} days (${proj.pctTime.toFixed(0)}%)` : ''}>\r\n                    <div className=\"timeline-fill\" style={{width:`${proj.pctTime}%`}} />\r\n                  </div>\r\n                ) : <span className=\"muted\">—</span>}\r\n              </td>\r\n              <td>{proj.startDate ? new Date(proj.startDate).toLocaleDateString() : '—'}</td>\r\n              <td>{proj.endDate ? new Date(proj.endDate).toLocaleDateString() : '—'}</td>\r\n              <td style={{textAlign:'right'}}>\r\n                <button className=\"btn-view\" onClick={()=> navigate(`/pic/${proj._id}`)}>View</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      {/* Responsive card layout */}\r\n      <div className=\"projects-cards\">\r\n        {projects.map(proj => (\r\n          <div key={proj._id} className=\"project-card\" onClick={()=> navigate(`/pic/${proj._id}`)}>\r\n            {showBadges ? (\r\n              <div className=\"pc-status\">\r\n                <span className={`status-badge badge-${(proj.status||'').toLowerCase()}`}>{proj.status || '—'}</span>\r\n              </div>\r\n            ) : (\r\n              <div className=\"pc-status-plain\">{proj.status || '—'}</div>\r\n            )}\r\n            <div className=\"pc-header\">\r\n              <h4>{proj.projectName}</h4>\r\n            </div>\r\n            <div className=\"pc-meta\">{proj.location?.name || 'No location'}</div>\r\n            <div className=\"pc-timeline\">\r\n              {proj.pctTime != null ? (\r\n                <div className=\"timeline-bar small\"><div className=\"timeline-fill\" style={{width:`${proj.pctTime}%`}}/></div>\r\n              ) : <div className=\"muted\">No timeline</div>}\r\n            </div>\r\n            <div className=\"pc-dates\">\r\n              <span>{proj.startDate ? new Date(proj.startDate).toLocaleDateString() : '—'}</span>\r\n              <span>→</span>\r\n              <span>{proj.endDate ? new Date(proj.endDate).toLocaleDateString() : '—'}</span>\r\n            </div>\r\n            <div className=\"pc-footer\">\r\n              <button className=\"btn-view ghost\" onClick={(e)=>{e.stopPropagation(); navigate(`/pic/${proj._id}`);}}>Open</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {projects.length === 0 && <div className=\"empty-placeholder\">No projects found.</div>}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"pic-projects-page\">\r\n  <AppHeader roleSegment=\"pic\" />\r\n\r\n      <section className=\"pp-hero\">\r\n        <div className=\"pp-hero-inner\">\r\n          <h1>My Projects</h1>\r\n          <p>Quick overview of all projects you are assigned to. Search, filter and open a project instantly.</p>\r\n          <div className=\"pp-stats\">\r\n            <div\r\n              className={`stat-card stat-click ${activeTab==='Ongoing' ? 'active' : ''}`}\r\n              onClick={()=> setActiveTab('Ongoing')}\r\n              role=\"button\"\r\n              tabIndex={0}\r\n              onKeyDown={e=>{ if(e.key==='Enter' || e.key===' ') { setActiveTab('Ongoing'); e.preventDefault(); }}}\r\n              aria-pressed={activeTab==='Ongoing'}\r\n            >\r\n              <div className=\"sc-icon ongoing\"><FaHourglassHalf/></div>\r\n              <div className=\"sc-body\">\r\n                <span className=\"sc-label\">Ongoing</span>\r\n                <span className=\"sc-value\">{stats.ongoing}</span>\r\n              </div>\r\n            </div>\r\n            <div\r\n              className={`stat-card stat-click ${activeTab==='Completed' ? 'active' : ''}`}\r\n              onClick={()=> setActiveTab('Completed')}\r\n              role=\"button\"\r\n              tabIndex={0}\r\n              onKeyDown={e=>{ if(e.key==='Enter' || e.key===' ') { setActiveTab('Completed'); e.preventDefault(); }}}\r\n              aria-pressed={activeTab==='Completed'}\r\n            >\r\n              <div className=\"sc-icon completed\"><FaCheckCircle/></div>\r\n              <div className=\"sc-body\">\r\n                <span className=\"sc-label\">Completed</span>\r\n                <span className=\"sc-value\">{stats.completed}</span>\r\n              </div>\r\n            </div>\r\n            <div\r\n              className={`stat-card stat-click ${activeTab==='All' ? 'active' : ''}`}\r\n              onClick={()=> setActiveTab('All')}\r\n              role=\"button\"\r\n              tabIndex={0}\r\n              onKeyDown={e=>{ if(e.key==='Enter' || e.key===' ') { setActiveTab('All'); e.preventDefault(); }}}\r\n              aria-pressed={activeTab==='All'}\r\n            >\r\n              <div className=\"sc-icon total\"><FaProjectDiagram/></div>\r\n              <div className=\"sc-body\">\r\n                <span className=\"sc-label\">Total</span>\r\n                <span className=\"sc-value\">{stats.total}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <main className=\"pp-main\">\r\n        <div className=\"pp-controls\">\r\n          <div className=\"search-box\">\r\n            <FaSearch className=\"icon\"/>\r\n            <input value={search} onChange={e=> setSearch(e.target.value)} placeholder=\"Search project name...\" />\r\n          </div>\r\n          <div className=\"filters\">\r\n            <div className=\"tab-group\">\r\n              <button className={activeTab==='All'? 'tg-btn active':'tg-btn'} onClick={()=> setActiveTab('All')}>All ({stats.total})</button>\r\n              <button className={activeTab==='Ongoing'? 'tg-btn active':'tg-btn'} onClick={()=> setActiveTab('Ongoing')}>Ongoing ({stats.ongoing})</button>\r\n              <button className={activeTab==='Completed'? 'tg-btn active':'tg-btn'} onClick={()=> setActiveTab('Completed')}>Completed ({stats.completed})</button>\r\n            </div>\r\n            <div className=\"sort-box\">\r\n              <FaSortAmountDown className=\"icon\"/>\r\n              <select value={sortKey} onChange={e=> setSortKey(e.target.value)}>\r\n                <option value=\"startDate\">Sort: Start Date</option>\r\n                <option value=\"endDate\">Sort: End Date</option>\r\n                <option value=\"name\">Sort: Name</option>\r\n                <option value=\"status\">Sort: Status</option>\r\n              </select>\r\n              <button className=\"dir-btn\" onClick={()=> setSortDir(d=> d==='asc'?'desc':'asc')} aria-label=\"Toggle direction\">{sortDir==='asc'?'↑':'↓'}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"pp-table-area\">\r\n          <ProjectTable \r\n            projects={activeTab==='All' ? filteredAll : activeTab==='Ongoing' ? filteredOngoing : filteredCompleted}\r\n            showBadges={activeTab !== 'All'}\r\n          />\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PicAllProjects;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport '../style/pic_style/Pic_MatReq.css';\r\nimport '../style/pm_style/Pm_Dash.css';\r\n// Nav icons\r\nimport { FaTachometerAlt, FaComments, FaClipboardList, FaEye, FaProjectDiagram, FaArrowLeft, FaInfoCircle, FaUser, FaBoxes as FaMaterials, FaPaperclip, FaTruck, FaCheck, FaClock, FaDownload, FaCalendarAlt, FaMapMarkerAlt, FaPlus, FaTrash, FaSave } from 'react-icons/fa';\r\nimport AppHeader from '../layout/AppHeader';\r\n\r\nconst PicMaterialRequestEdit = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [materialRequest, setMaterialRequest] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [profileMenuOpen, setProfileMenuOpen] = useState(false);\r\n  const [isHeaderCollapsed, setIsHeaderCollapsed] = useState(false);\r\n  const profileDropdownRef = useRef(null);\r\n  \r\n  const [user, setUser] = useState(() => {\r\n    const stored = localStorage.getItem('user');\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState({\r\n    description: '',\r\n    materials: [{ id: 1, materialName: '', quantity: '', unit: '' }],\r\n    attachments: []\r\n  });\r\n\r\n  // File handling\r\n  const [uploadedFiles, setUploadedFiles] = useState([]);\r\n  const [previewImages, setPreviewImages] = useState([]);\r\n  const [newFiles, setNewFiles] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Fetch the material request data\r\n    api.get(`/requests/${id}`)\r\n      .then(res => {\r\n        console.log('Material Request Data for Edit:', res.data);\r\n        const data = res.data;\r\n        setMaterialRequest(data);\r\n        \r\n        // Initialize form data\r\n        setFormData({\r\n          description: data.description || '',\r\n          materials: data.materials && data.materials.length > 0 \r\n            ? data.materials.map((mat, idx) => ({\r\n                id: mat.id || Date.now() + idx,\r\n                materialName: mat.materialName || '',\r\n                quantity: mat.quantity || '',\r\n                unit: mat.unit || ''\r\n              }))\r\n            : [{ id: 1, materialName: '', quantity: '', unit: '' }],\r\n          attachments: data.attachments || []\r\n        });\r\n        \r\n        setError('');\r\n      })\r\n      .catch((err) => {\r\n        console.error('Error fetching request:', err);\r\n        setError('Failed to load request details.');\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (profileDropdownRef.current && !profileDropdownRef.current.contains(event.target)) {\r\n        setProfileMenuOpen(false);\r\n      }\r\n    };\r\n    const handleScroll = () => {\r\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n      setIsHeaderCollapsed(scrollTop > 50);\r\n    };\r\n    document.addEventListener('click', handleClickOutside);\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => { \r\n      document.removeEventListener('click', handleClickOutside); \r\n      window.removeEventListener('scroll', handleScroll); \r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    return () => previewImages.forEach(url => URL.revokeObjectURL(url));\r\n  }, [previewImages.length]);\r\n\r\n  const handleLogout = () => {\r\n    const token = localStorage.getItem('token');\r\n    api.post('/auth/logout', {}, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    }).finally(() => {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      navigate('/');\r\n    });\r\n  };\r\n\r\n  const handleBack = () => navigate(`/pic/material-request/${id}`);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleMaterialChange = (id, field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      materials: prev.materials.map(m => {\r\n        if (m.id === id) {\r\n          if (field === 'quantity') {\r\n            let filtered = value.replace(/\\D/g, '').slice(0, 7);\r\n            return { ...m, [field]: filtered };\r\n          }\r\n          return { ...m, [field]: value };\r\n        }\r\n        return m;\r\n      })\r\n    }));\r\n  };\r\n\r\n  const addMaterial = () => {\r\n    const newId = formData.materials.length ? Math.max(...formData.materials.map(m => m.id)) + 1 : 1;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      materials: [...prev.materials, { id: newId, materialName: '', quantity: '', unit: '' }]\r\n    }));\r\n  };\r\n\r\n  const removeMaterial = (id) => {\r\n    if (formData.materials.length > 1) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        materials: prev.materials.filter(m => m.id !== id)\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    setNewFiles(prev => [...prev, ...files]);\r\n    const previews = files.map(file => URL.createObjectURL(file));\r\n    setPreviewImages(prev => [...prev, ...previews]);\r\n  };\r\n\r\n  const removeFile = (index) => {\r\n    setNewFiles(prev => prev.filter((_, i) => i !== index));\r\n    setPreviewImages(prev => {\r\n      URL.revokeObjectURL(prev[index]);\r\n      return prev.filter((_, i) => i !== index);\r\n    });\r\n  };\r\n\r\n  const removeExistingFile = (index) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      attachments: prev.attachments.filter((_, i) => i !== index)\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n\r\n    try {\r\n      const data = new FormData();\r\n      data.append('description', formData.description);\r\n      data.append('materials', JSON.stringify(formData.materials));\r\n      \r\n      // Add new files\r\n      newFiles.forEach(file => data.append('attachments', file));\r\n      \r\n      // Add existing attachments that weren't removed\r\n      formData.attachments.forEach(attachment => {\r\n        data.append('existingAttachments', attachment);\r\n      });\r\n\r\n      const response = await api.put(`/requests/${id}`, data, {\r\n        headers: { \r\n          'Content-Type': 'multipart/form-data',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      if (response.data.success) {\r\n        alert('✅ Material request updated successfully!');\r\n  navigate(`/pic/material-request/${id}`);\r\n      } else {\r\n        setError('Failed to update request. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error updating request:', err);\r\n      setError('Failed to update request. Please try again.');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\r\n        <div>Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh', flexDirection: 'column', gap: '20px' }}>\r\n        <div style={{ color: 'red' }}>{error}</div>\r\n        <button onClick={handleBack}>Go Back</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n  <AppHeader roleSegment=\"pic\" />\r\n\r\n      <div style={{padding:'1.05rem 1.6rem .3rem'}}>\r\n        <h1 style={{margin:'0 0 4px',fontSize:'1.06rem',fontWeight:600,color:'#1e293b'}}>Edit Material Request</h1>\r\n        <p style={{margin:0,fontSize:'.7rem',letterSpacing:.2,color:'#64748b'}}>Update materials and request details</p>\r\n      </div>\r\n\r\n      {/* Main content */}\r\n      <div className=\"dashboard-layout\">\r\n        <main className=\"dashboard-main\">\r\n          <div className=\"page-container\">\r\n            <div className=\"request-materials-container-picmatreq\">\r\n              {/* Back Button */}\r\n              <div className=\"back-button-container\" style={{ marginBottom: '20px' }}>\r\n                <button \r\n                  onClick={handleBack} \r\n                  className=\"back-button\"\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '8px',\r\n                    padding: '10px 16px',\r\n                    backgroundColor: '#f8f9fa',\r\n                    border: '1px solid #dee2e6',\r\n                    borderRadius: '6px',\r\n                    color: '#495057',\r\n                    cursor: 'pointer',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    transition: 'all 0.2s ease'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.target.style.backgroundColor = '#e9ecef';\r\n                    e.target.style.borderColor = '#adb5bd';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.target.style.backgroundColor = '#f8f9fa';\r\n                    e.target.style.borderColor = '#dee2e6';\r\n                  }}\r\n                >\r\n                  <FaArrowLeft /> Back to Request Details\r\n                </button>\r\n              </div>\r\n\r\n              <h1 className=\"page-title-picmatreq\">Edit Material Request</h1>\r\n              \r\n              {materialRequest && (\r\n                <div className=\"project-details-box\" style={{ \r\n                  marginBottom: '20px',\r\n                  background: '#ffffff',\r\n                  padding: '16px',\r\n                  borderRadius: '8px',\r\n                  border: '1px solid #e2e8f0',\r\n                  boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)'\r\n                }}>\r\n                  <h2 style={{ margin: '0 0 8px 0', fontSize: '18px', color: '#1f2937' }}>\r\n                    {materialRequest.project?.projectName || 'Project'}\r\n                  </h2>\r\n                  <p style={{ margin: '0 0 4px 0', fontStyle: 'italic', color: '#6b7280' }}>\r\n                    {materialRequest.project?.location?.name} ({materialRequest.project?.location?.region})\r\n                  </p>\r\n                  <p style={{ margin: 0, color: '#9ca3af', fontSize: '14px' }}>\r\n                    Requested by: {materialRequest.createdBy?.name || 'Unknown'}\r\n                  </p>\r\n                </div>\r\n              )}\r\n              \r\n              <form onSubmit={handleSubmit} className=\"materials-form-picmatreq\">\r\n                <div className=\"form-group-picmatreq\">\r\n                  <label className=\"form-label-picmatreq\">Request Description</label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    className=\"description-textarea-picmatreq\"\r\n                    rows=\"6\"\r\n                    placeholder=\"Provide a detailed description of your request\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group-picmatreq\">\r\n                  <label className=\"form-label-picmatreq\">Materials</label>\r\n                  <div className=\"materials-list-picmatreq\">\r\n                    <div className=\"material-headers-picmatreq\">\r\n                      <span className=\"material-header-label-picmatreq\">Material Name</span>\r\n                      <span className=\"quantity-header-label-picmatreq\">Quantity</span>\r\n                      <span className=\"unit-header-label-picmatreq\">Unit</span>\r\n                      <span className=\"action-header-label-picmatreq\"></span>\r\n                    </div>\r\n                    {formData.materials.map((material) => (\r\n                      <div key={material.id} className=\"material-row-picmatreq\">\r\n                        <input\r\n                          type=\"text\"\r\n                          value={material.materialName}\r\n                          onChange={(e) => handleMaterialChange(material.id, 'materialName', e.target.value)}\r\n                          placeholder=\"Enter material name\"\r\n                          className=\"material-input-picmatreq\"\r\n                          required\r\n                        />\r\n                        <input\r\n                          type=\"text\"\r\n                          inputMode=\"numeric\"\r\n                          pattern=\"[0-9]*\"\r\n                          value={material.quantity}\r\n                          onChange={(e) => handleMaterialChange(material.id, 'quantity', e.target.value)}\r\n                          placeholder=\"Quantity\"\r\n                          maxLength={7}\r\n                          className=\"quantity-input-picmatreq\"\r\n                          required\r\n                          onPaste={e => {\r\n                            const paste = e.clipboardData.getData('text');\r\n                            if (!/^\\d+$/.test(paste)) e.preventDefault();\r\n                            if (paste.length > 7) e.preventDefault();\r\n                          }}\r\n                          onKeyPress={e => {\r\n                            if (!/[0-9]/.test(e.key) || material.quantity.length >= 7) {\r\n                              e.preventDefault();\r\n                            }\r\n                          }}\r\n                        />\r\n                        <select\r\n                          value={material.unit}\r\n                          onChange={(e) => handleMaterialChange(material.id, 'unit', e.target.value)}\r\n                          className=\"unit-select-picmatreq\"\r\n                          required\r\n                        >\r\n                          <option value=\"\">Select Unit</option>\r\n                          <option value=\"kg\">Kilograms (kg)</option>\r\n                          <option value=\"g\">Grams (g)</option>\r\n                          <option value=\"ton\">Metric Tons (ton)</option>\r\n                          <option value=\"bag\">Bags</option>\r\n                          <option value=\"piece\">Pieces</option>\r\n                          <option value=\"box\">Boxes</option>\r\n                          <option value=\"roll\">Rolls</option>\r\n                          <option value=\"sheet\">Sheets</option>\r\n                          <option value=\"m\">Meters (m)</option>\r\n                          <option value=\"cm\">Centimeters (cm)</option>\r\n                          <option value=\"m2\">Square Meters (m²)</option>\r\n                          <option value=\"m3\">Cubic Meters (m³)</option>\r\n                          <option value=\"l\">Liters (L)</option>\r\n                          <option value=\"truck\">Truck Loads</option>\r\n                          <option value=\"set\">Sets</option>\r\n                          <option value=\"pair\">Pairs</option>\r\n                          <option value=\"bundle\">Bundles</option>\r\n                        </select>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => removeMaterial(material.id)}\r\n                          className=\"remove-material-btn-picmatreq\"\r\n                          disabled={formData.materials.length === 1}\r\n                        >\r\n                          ×\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={addMaterial}\r\n                      className=\"add-material-btn-picmatreq\"\r\n                    >\r\n                      + Add Material\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group-picmatreq\">\r\n                  <label className=\"form-label-picmatreq\">Attachments</label>\r\n                  <div className=\"upload-section-picmatreq\">\r\n                    {/* Existing attachments */}\r\n                    {formData.attachments.length > 0 && (\r\n                      <div style={{ marginBottom: '16px' }}>\r\n                        <h4 style={{ fontSize: '14px', marginBottom: '8px', color: '#374151' }}>Current Attachments:</h4>\r\n                        <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\r\n                          {formData.attachments.map((attachment, index) => (\r\n                            <div key={index} style={{ \r\n                              display: 'flex', \r\n                              alignItems: 'center', \r\n                              gap: '8px',\r\n                              padding: '8px 12px',\r\n                              backgroundColor: '#f3f4f6',\r\n                              borderRadius: '6px',\r\n                              border: '1px solid #d1d5db'\r\n                            }}>\r\n                              <FaPaperclip style={{ color: '#6b7280' }} />\r\n                              <span style={{ fontSize: '12px', color: '#374151' }}>\r\n                                {attachment.name || `Attachment ${index + 1}`}\r\n                              </span>\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => removeExistingFile(index)}\r\n                                style={{\r\n                                  background: 'none',\r\n                                  border: 'none',\r\n                                  color: '#ef4444',\r\n                                  cursor: 'pointer',\r\n                                  fontSize: '14px',\r\n                                  padding: '2px 6px'\r\n                                }}\r\n                              >\r\n                                ×\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    {/* New file upload */}\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"file-upload\"\r\n                      multiple\r\n                      accept=\"image/*,.pdf,.doc,.docx\"\r\n                      onChange={handleFileUpload}\r\n                      className=\"file-input-picmatreq\"\r\n                    />\r\n                    <label htmlFor=\"file-upload\" className=\"upload-button\">\r\n                      <span className=\"upload-icon-picmatreq\">📎</span>\r\n                      Upload New Files\r\n                    </label>\r\n                    \r\n                    {/* Preview of new files */}\r\n                    {previewImages.length > 0 && (\r\n                      <div className=\"preview-container\" style={{ display: 'flex', gap: '10px', flexWrap: 'wrap', marginTop: '10px' }}>\r\n                        {previewImages.map((src, index) => (\r\n                          <div key={index} style={{ position: 'relative' }}>\r\n                            <img\r\n                              src={src}\r\n                              alt={`preview-${index}`}\r\n                              style={{\r\n                                width: '200px',\r\n                                height: '200px',\r\n                                objectFit: 'cover',\r\n                                borderRadius: '8px',\r\n                                border: '1px solid #ccc'\r\n                              }}\r\n                            />\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => removeFile(index)}\r\n                              style={{\r\n                                position: 'absolute',\r\n                                top: '-6px',\r\n                                right: '-6px',\r\n                                background: '#ff4d4f',\r\n                                color: '#fff',\r\n                                border: 'none',\r\n                                borderRadius: '50%',\r\n                                width: '20px',\r\n                                height: '20px',\r\n                                cursor: 'pointer'\r\n                              }}\r\n                            >\r\n                              ×\r\n                            </button>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                    <p className=\"upload-hint-picmatreq\">You can attach files such as documents or images</p>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-actions-picmatreq\">\r\n                  <button \r\n                    type=\"submit\" \r\n                    className=\"publish-button-picmatreq\"\r\n                    disabled={saving}\r\n                    style={{\r\n                      opacity: saving ? 0.7 : 1,\r\n                      cursor: saving ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                  >\r\n                    {saving ? 'Saving...' : 'Save Changes'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PicMaterialRequestEdit;\r\n","// Unified PicChat wrapper using AreaChat implementation\r\nimport React from 'react';\r\nimport AreaChat from './AreaChat';\r\n\r\nexport default function PicChat(){\r\n  return <AreaChat baseSegment=\"pic\" />;\r\n}\r\n","import React from 'react';\r\nimport MaterialRequestDetailView from '../material/MaterialRequestDetailView';\r\n\r\nconst PicMatRequestDetailWrapper = () => (\r\n  <MaterialRequestDetailView\r\n    role=\"Person in Charge\"\r\n    rootClass=\"pic-request-detail\"\r\n    headerTitle=\"Material Request Detail\"\r\n    headerSubtitle=\"View lifecycle and receive materials\"\r\n  />\r\n);\r\n\r\nexport default PicMatRequestDetailWrapper;\r\n","import React from 'react';\r\nimport MaterialRequestListView from '../material/MaterialRequestListView';\r\n\r\nconst PicMatRequestListWrapper = () => (\r\n  <MaterialRequestListView\r\n    role=\"Person in Charge\"\r\n    fetchUrl=\"/requests/mine\"\r\n    detailLinkBase=\"/pic/material-request\"\r\n    rootClass=\"pic-request-list\"\r\n    headerTitle=\"My Material Requests\"\r\n    headerSubtitle=\"Track, create and receive materials\"\r\n  />\r\n);\r\n\r\nexport default PicMatRequestListWrapper;\r\n"],"names":["PicDash","navigate","useNavigate","token","localStorage","getItem","stored","user","JSON","parse","userId","_id","requests","setRequests","useState","userName","setUserName","name","userRole","setUserRole","role","project","setProject","profileMenuOpen","setProfileMenuOpen","currentPage","setCurrentPage","nudgeCooldowns","setNudgeCooldowns","searchQuery","setSearchQuery","searchResults","setSearchResults","reports","setReports","pendingNudges","setPendingNudges","useEffect","saved","parsed","now","Date","filtered","Object","fromEntries","entries","filter","_ref","_","ts","setItem","stringify","indexOfLastItem","indexOfFirstItem","getTimelineStatus","slice","Math","ceil","length","status","stage","includes","async","data","api","get","concat","err","fetchActiveProject","headers","Authorization","then","_ref2","console","log","projectRequests","Array","isArray","r","catch","error","_ref3","handler","e","_e$detail","String","detail","projectId","_ref4","window","addEventListener","removeEventListener","handleClickOutside","event","target","closest","document","_jsxs","className","children","_jsx","AppHeader","roleSegment","style","backgroundImage","Link","to","FaProjectDiagram","FaBoxes","FaChartBar","round","reduce","acc","_r$ai","ai","pic_contribution_percent","ResponsiveContainer","width","height","LineChart","reverse","map","report","_report$ai","_report$ai$completed_","_report$ai2","_report$ai2$summary_o","_report$ai3","uploadedAt","toLocaleDateString","month","day","completedTasks","completed_tasks","workItems","summary_of_work_done","contribution","CartesianGrid","strokeDasharray","stroke","XAxis","dataKey","tick","fontSize","YAxis","Tooltip","contentStyle","Line","type","strokeWidth","dot","FaArrowRight","request","_request$materials","_request$project","_request$status","textDecoration","materials","m","materialName","quantity","join","projectName","createdAt","FaCheckCircle","FaUserTie","FaBuilding","replace","toLowerCase","ITEMS_PER_PAGE","PicRequestList","isHeaderCollapsed","setIsHeaderCollapsed","loading","setLoading","setError","setFilter","searchTerm","setSearchTerm","activeProject","setActiveProject","mine","_r$createdBy","createdBy","finally","handleScroll","scrollTop","pageYOffset","documentElement","getStatusColor","receivedByPIC","s","getStatusBadge","sorted","_r$materials","_r$project","isCompleted","matchesFilter","searchTarget","description","sort","a","b","aCompleted","bCompleted","totalPages","startIndex","page","padding","margin","fontWeight","color","letterSpacing","tab","onClick","placeholder","value","onChange","background","display","flexDirection","gap","_request$status2","_request$status3","_request$status4","_request$status5","_request$status6","_request$status7","_request$status8","_request$status9","_request$status0","_request$status1","_request$status10","_request$status11","_request$status12","_request$status13","_request$status14","_request$status15","_request$status16","_request$status17","_request$status18","_request$status19","_request$status20","_request$status21","_request$status22","_request$status23","_request$status24","_request$status25","_request$status26","_request$status27","_request$status28","border","borderRadius","justifyContent","alignItems","marginBottom","flex","unit","lineHeight","marginLeft","minWidth","textAlign","pmApprovedAt","amApprovedAt","backgroundColor","transition","cursor","onMouseEnter","onMouseLeave","min","disabled","p","max","from","i","n","PicProject","ProjectView","useUnifiedHeader","PicCurrentProject","steps","label","emoji","key","formatDateTime","date","d","toLocaleTimeString","hour","minute","_unused","ProgressTracker","stepInfo","decision","info","denied","push","pm","approvals","find","timestamp","am","receivedDate","getStepInfo","step","idx","cls","some","React","PicMatReq","_project$location","_project$location2","useParams","uploadedFiles","setUploadedFiles","previewImages","setPreviewImages","setMaterials","id","formData","setFormData","errors","setErrors","global","submitting","setSubmitting","submitLockRef","useRef","storedUser","res","forEach","url","URL","revokeObjectURL","handleMaterialChange","field","prev","_objectSpread","location","region","targetDate","material","inputMode","pattern","maxLength","onPaste","paste","clipboardData","getData","test","preventDefault","onKeyPress","required","removeMaterial","addMaterial","newId","marginTop","multiple","accept","files","previews","file","createObjectURL","htmlFor","flexWrap","src","index","position","alt","objectFit","removeFile","top","right","rows","current","ok","validMaterials","validate","newErrors","trim","FormData","append","_res$data","post","msg","removeItem","_err$response","_err$response$data","apiMsg","response","message","opacity","MaterialRequestDetail","_materialRequest$crea","_materialRequest$appr","_materialRequest$appr2","_materialRequest$appr3","_materialRequest$appr4","_materialRequest$stat","_materialRequest$prio","_materialRequest$crea2","_materialRequest$crea3","_materialRequest$crea4","_materialRequest$proj","_materialRequest$proj2","_materialRequest$crea5","_materialRequest$appr5","_materialRequest$appr6","_materialRequest$appr7","_materialRequest$appr8","_materialRequest$crea6","materialRequest","setMaterialRequest","isProfileOpen","setIsProfileOpen","editMode","setEditMode","setDescription","attachments","setAttachments","newFiles","setNewFiles","profileDropdownRef","isPIC","axiosInstance","materialsWithIds","mat","contains","handleBack","isEditable","projectManager","approved","areaManager","handleMarkReceived","confirm","patch","toISOString","alert","_e$response","_e$response$data","handleCancelRequest","delete","_e$response2","_e$response2$data","_Fragment","materialsToSave","_objectWithoutProperties","_excluded","updated","put","updatedMaterialsWithIds","requestNumber","priority","email","specifications","attachment","href","startsWith","rel","toLocaleString","reviewer","reviewedAt","receivedAt","PicAllProjects","activeTab","setActiveTab","ongoing","setOngoing","completed","setCompleted","search","setSearch","sortKey","setSortKey","sortDir","setSortDir","userType","designation","toString","Promise","all","resOngoing","resCompleted","decorate","proj","start","startDate","end","endDate","today","totalDays","elapsedDays","pctTime","daysLeft","stats","useMemo","total","sortFn","dir","getVal","_p$projectName","av","bv","filteredOngoing","filteredCompleted","filteredAll","toggleSort","require","ProjectTable","projects","showBadges","colSpan","_proj$location","title","toFixed","_proj$location2","stopPropagation","tabIndex","onKeyDown","FaHourglassHalf","FaSearch","FaSortAmountDown","PicMaterialRequestEdit","_materialRequest$proj3","_materialRequest$proj4","_materialRequest$proj5","saving","setSaving","setUser","borderColor","FaArrowLeft","boxShadow","fontStyle","onSubmit","success","FaPaperclip","removeExistingFile","PicChat","AreaChat","baseSegment","PicMatRequestDetailWrapper","MaterialRequestDetailView","rootClass","headerTitle","headerSubtitle","PicMatRequestListWrapper","MaterialRequestListView","fetchUrl","detailLinkBase"],"sourceRoot":""}