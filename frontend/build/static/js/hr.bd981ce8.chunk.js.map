{"version":3,"file":"static/js/hr.bd981ce8.chunk.js","mappings":"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","sources":["components/hr/HrAttendance.js","components/hr/HrManpowerRequestDetail.js","utils/manpowerRequestsPdf.js","components/hr/HrMovementList.js","../node_modules/shared/src/utils.ts","../node_modules/lucide-react/src/defaultAttributes.ts","../node_modules/lucide-react/src/Icon.ts","../node_modules/lucide-react/src/createLucideIcon.ts","../node_modules/lucide-react/src/icons/upload.ts","../node_modules/lucide-react/src/icons/search.ts","../node_modules/lucide-react/src/icons/refresh-cw.ts","../node_modules/lucide-react/src/icons/x.ts","components/hr/HrManpowerList.js","components/hr/HrViewProject.js","components/hr/HrManpowerRequestList.js","components/hr/HrDash.js","components/hr/HrProj.js","components/chats/HrChat.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../style/hr_style/Hr_Dash.css';\r\nimport api from '../../api/axiosInstance';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport {\r\n  FaTachometerAlt,\r\n  FaComments,\r\n  FaUsers,\r\n  FaExchangeAlt,\r\n  FaProjectDiagram,\r\n  FaCalendarAlt,\r\n  FaSearch,\r\n  FaFilter,\r\n  FaDownload,\r\n  FaSort,\r\n  FaSortUp,\r\n  FaSortDown,\r\n  FaFileExcel,\r\n  FaUser,\r\n  FaClock\r\n} from 'react-icons/fa';\r\n\r\nconst HrAttendance = ({ forceUserUpdate }) => {\r\n  const navigate = useNavigate();\r\n\r\n  // User state\r\n  const [user, setUser] = useState(() => {\r\n    const stored = localStorage.getItem('user');\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n  const [token, setToken] = useState(() => localStorage.getItem('token') || \"\");\r\n  const [userId, setUserId] = useState(() => user?._id);\r\n\r\n  // Listen for storage changes\r\n  useEffect(() => {\r\n    const handleUserChange = () => {\r\n      const stored = localStorage.getItem('user');\r\n      setUser(stored ? JSON.parse(stored) : null);\r\n      setUserId(stored ? JSON.parse(stored)._id : undefined);\r\n      setToken(localStorage.getItem('token') || \"\");\r\n    };\r\n    window.addEventListener(\"storage\", handleUserChange);\r\n    return () => window.removeEventListener(\"storage\", handleUserChange);\r\n  }, []);\r\n\r\n  // Page state\r\n  const [attendanceReports, setAttendanceReports] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [totalReports, setTotalReports] = useState(0);\r\n\r\n  // Filter and search state\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [dateFrom, setDateFrom] = useState('');\r\n  const [dateTo, setDateTo] = useState('');\r\n  const [sortBy, setSortBy] = useState('generatedAt');\r\n  const [sortOrder, setSortOrder] = useState('desc');\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [projects, setProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState('');\r\n  const [dateFilter, setDateFilter] = useState('');\r\n\r\n  // Redirect to login if not logged in\r\n  useEffect(() => {\r\n    if (!token || !userId) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n  }, [token, userId, navigate]);\r\n\r\n  // Fetch projects for dropdown\r\n  const fetchProjects = useCallback(async () => {\r\n    if (!token) return;\r\n\r\n    try {\r\n      const { data } = await api.get('/projects', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setProjects(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching projects:', error);\r\n    }\r\n  }, [token]);\r\n\r\n  // Fetch attendance reports\r\n  const fetchAttendanceReports = useCallback(async () => {\r\n    if (!token) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (searchTerm) params.append('search', searchTerm);\r\n      if (dateFrom) params.append('dateFrom', dateFrom);\r\n      if (dateTo) params.append('dateTo', dateTo);\r\n      if (selectedProject) params.append('projectId', selectedProject);\r\n      params.append('sortBy', sortBy);\r\n      params.append('sortOrder', sortOrder);\r\n\r\n      console.log('Fetching attendance reports from:', `/hr-site-attendance/all-reports?${params}`);\r\n      console.log('Token:', token ? 'Present' : 'Missing');\r\n\r\n      const { data } = await api.get(`/hr-site-attendance/all-reports?${params}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      console.log('API Response:', data);\r\n\r\n      setAttendanceReports(data.reports || []);\r\n      setTotalReports(data.total || 0);\r\n    } catch (error) {\r\n      console.error('Error fetching attendance reports:', error);\r\n      console.error('Error details:', error.response?.data || error.message);\r\n      setError('Failed to load attendance reports');\r\n      setAttendanceReports([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [token, searchTerm, dateFrom, dateTo, selectedProject, sortBy, sortOrder]);\r\n\r\n  useEffect(() => {\r\n    console.log('HrAttendance component mounted, fetching reports...');\r\n    fetchProjects();\r\n    fetchAttendanceReports();\r\n  }, [fetchProjects, fetchAttendanceReports]);\r\n\r\n  // Handle search\r\n  const handleSearch = (e) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  // Handle sort\r\n  const handleSort = (field) => {\r\n    if (sortBy === field) {\r\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortBy(field);\r\n      setSortOrder('desc');\r\n    }\r\n  };\r\n\r\n  // Clear filters\r\n  const clearFilters = () => {\r\n    setSearchTerm('');\r\n    setDateFrom('');\r\n    setDateTo('');\r\n    setSelectedProject('');\r\n    setDateFilter('');\r\n    setSortBy('generatedAt');\r\n    setSortOrder('desc');\r\n  };\r\n\r\n  // Handle date filter selection\r\n  const handleDateFilter = (filter) => {\r\n    setDateFilter(filter);\r\n    const now = new Date();\r\n    \r\n    switch (filter) {\r\n      case 'today':\r\n        setDateFrom(now.toISOString().split('T')[0]);\r\n        setDateTo(now.toISOString().split('T')[0]);\r\n        break;\r\n      case 'week':\r\n        const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n        setDateFrom(weekAgo.toISOString().split('T')[0]);\r\n        setDateTo(now.toISOString().split('T')[0]);\r\n        break;\r\n      case 'month':\r\n        const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\r\n        setDateFrom(monthAgo.toISOString().split('T')[0]);\r\n        setDateTo(now.toISOString().split('T')[0]);\r\n        break;\r\n      case 'custom':\r\n        // Keep existing dateFrom/dateTo values\r\n        break;\r\n      default:\r\n        setDateFrom('');\r\n        setDateTo('');\r\n    }\r\n  };\r\n\r\n  // Handle sort by date (recent/oldest)\r\n  const handleSortByDate = (order) => {\r\n    setSortBy('generatedAt');\r\n    setSortOrder(order);\r\n  };\r\n\r\n  // Format date\r\n  const formatDate = (date) => {\r\n    if (!date) return 'Unknown';\r\n    return new Date(date).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  // Get sort icon\r\n  const getSortIcon = (field) => {\r\n    if (sortBy !== field) return <FaSort className=\"sort-icon\" />;\r\n    return sortOrder === 'asc' ? <FaSortUp className=\"sort-icon\" /> : <FaSortDown className=\"sort-icon\" />;\r\n  };\r\n\r\n  // Logout handler\r\n  const handleLogout = useCallback(() => {\r\n    api.post('/auth/logout', {}, { headers: { Authorization: `Bearer ${token}` } }).finally(() => {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      setUser(null);\r\n      setUserId(undefined);\r\n      setToken(\"\");\r\n      if (forceUserUpdate) forceUserUpdate();\r\n      window.dispatchEvent(new Event('storage'));\r\n      navigate('/');\r\n    });\r\n  }, [token, forceUserUpdate, navigate]);\r\n\r\n  return (\r\n    <div className=\"hr-dashboard dashboard-container\">\r\n      <AppHeader \r\n        roleSegment=\"hr\"\r\n        onLogout={handleLogout}\r\n        overrideNav={[\r\n          { to:'/hr/dash', label:'Dashboard', icon:<FaTachometerAlt/>, match:'/hr/dash' },\r\n          { to:'/hr/chat', label:'Chat', icon:<FaComments/>, match:'/hr/chat' },\r\n          { to:'/hr/mlist', label:'Manpower', icon:<FaUsers/>, match:'/hr/mlist' },\r\n          { to:'/hr/movement', label:'Movement', icon:<FaExchangeAlt/>, match:'/hr/movement' },\r\n          { to:'/hr/project-records', label:'Projects', icon:<FaProjectDiagram/>, match:'/hr/project-records' },\r\n          { to:'/hr/attendance', label:'Attendance', icon:<FaCalendarAlt/>, match:'/hr/attendance' }\r\n        ]}\r\n      />\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"dashboard-content\">\r\n          {/* Header */}\r\n          <div className=\"page-header\">\r\n            <div className=\"header-content\">\r\n              <h1 className=\"page-title\">\r\n                <FaCalendarAlt className=\"title-icon\" />\r\n                Attendance Reports\r\n              </h1>\r\n              <p className=\"page-subtitle\">View and manage attendance reports across all projects</p>\r\n            </div>\r\n            <div className=\"header-stats\">\r\n              <div className=\"stat-card\">\r\n                <div className=\"stat-value\">{totalReports}</div>\r\n                <div className=\"stat-label\">Total Reports</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Search and Filters */}\r\n          <div className=\"filters-section\">\r\n            <div className=\"filters-row\">\r\n              <div className=\"search-bar\">\r\n                <FaSearch className=\"search-icon\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search anything in the list...\"\r\n                  value={searchTerm}\r\n                  onChange={handleSearch}\r\n                  className=\"search-input\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"filter-controls\">\r\n                {/* Recent/Oldest Filter */}\r\n                <div className=\"date-sort-buttons\">\r\n                  <button\r\n                    className={`sort-btn ${sortBy === 'generatedAt' && sortOrder === 'desc' ? 'active' : ''}`}\r\n                    onClick={() => handleSortByDate('desc')}\r\n                    title=\"Most Recent\"\r\n                  >\r\n                    Recent\r\n                  </button>\r\n                  <button\r\n                    className={`sort-btn ${sortBy === 'generatedAt' && sortOrder === 'asc' ? 'active' : ''}`}\r\n                    onClick={() => handleSortByDate('asc')}\r\n                    title=\"Oldest First\"\r\n                  >\r\n                    Oldest\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Project Filter Dropdown */}\r\n                <select\r\n                  className=\"project-filter\"\r\n                  value={selectedProject}\r\n                  onChange={(e) => setSelectedProject(e.target.value)}\r\n                >\r\n                  <option value=\"\">All Projects</option>\r\n                  {projects.map(project => (\r\n                    <option key={project._id} value={project._id}>\r\n                      {project.projectName}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n\r\n                {/* Date Range Filter */}\r\n                <div className=\"date-filter-dropdown\">\r\n                  <select\r\n                    className=\"date-filter-select\"\r\n                    value={dateFilter}\r\n                    onChange={(e) => handleDateFilter(e.target.value)}\r\n                  >\r\n                    <option value=\"\">All Time</option>\r\n                    <option value=\"today\">Today</option>\r\n                    <option value=\"week\">Last 7 Days</option>\r\n                    <option value=\"month\">Last 30 Days</option>\r\n                    <option value=\"custom\">Custom Range</option>\r\n                  </select>\r\n                </div>\r\n                \r\n                <button className=\"clear-filters\" onClick={clearFilters}>\r\n                  Clear All\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Custom Date Range (shown when custom is selected) */}\r\n            {dateFilter === 'custom' && (\r\n              <div className=\"custom-date-range\">\r\n                <input\r\n                  type=\"date\"\r\n                  value={dateFrom}\r\n                  onChange={(e) => setDateFrom(e.target.value)}\r\n                  className=\"date-input\"\r\n                  placeholder=\"From\"\r\n                />\r\n                <span>to</span>\r\n                <input\r\n                  type=\"date\"\r\n                  value={dateTo}\r\n                  onChange={(e) => setDateTo(e.target.value)}\r\n                  className=\"date-input\"\r\n                  placeholder=\"To\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Reports Table */}\r\n          <div className=\"reports-table-container\">\r\n            {loading ? (\r\n              <div className=\"loading-state\">\r\n                <div className=\"loading-spinner\"></div>\r\n                <span>Loading attendance reports...</span>\r\n              </div>\r\n            ) : error ? (\r\n              <div className=\"error-state\">\r\n                <span>⚠️ {error}</span>\r\n                <button onClick={fetchAttendanceReports} className=\"retry-btn\">\r\n                  Try Again\r\n                </button>\r\n              </div>\r\n            ) : attendanceReports.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                <FaFileExcel className=\"empty-icon\" />\r\n                <h3>No Attendance Reports Found</h3>\r\n                <p>No attendance reports match your current filters.</p>\r\n                <button onClick={clearFilters} className=\"clear-filters-btn\">\r\n                  Clear Filters\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"table-wrapper\">\r\n                <table className=\"reports-table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th \r\n                        className=\"sortable\"\r\n                        onClick={() => handleSort('projectName')}\r\n                      >\r\n                        Project Name {getSortIcon('projectName')}\r\n                      </th>\r\n                      <th \r\n                        className=\"sortable\"\r\n                        onClick={() => handleSort('originalName')}\r\n                      >\r\n                        File Name {getSortIcon('originalName')}\r\n                      </th>\r\n                      <th \r\n                        className=\"sortable\"\r\n                        onClick={() => handleSort('uploadedByName')}\r\n                      >\r\n                        Uploaded By {getSortIcon('uploadedByName')}\r\n                      </th>\r\n                      <th \r\n                        className=\"sortable\"\r\n                        onClick={() => handleSort('generatedAt')}\r\n                      >\r\n                        Generated At {getSortIcon('generatedAt')}\r\n                      </th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {attendanceReports.map((report) => (\r\n                      <tr key={report._id} className=\"report-row\">\r\n                        <td className=\"project-name\">\r\n                          <div className=\"project-info\">\r\n                            <span className=\"project-title\">{report.projectName}</span>\r\n                            <div className=\"project-dates\">\r\n                              <small>\r\n                                {formatDate(report.projectStartDate)} - {formatDate(report.projectEndDate)}\r\n                              </small>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"file-name\">\r\n                          <div className=\"file-info\">\r\n                            <FaFileExcel className=\"file-icon\" />\r\n                            <span>{report.originalName}</span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"uploaded-by\">\r\n                          <div className=\"user-info\">\r\n                            <FaUser className=\"user-icon\" />\r\n                            <span>{report.uploadedByName || 'Unknown'}</span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"generated-at\">\r\n                          <div className=\"date-info\">\r\n                            <FaClock className=\"date-icon\" />\r\n                            <span>{formatDate(report.generatedAt)}</span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"actions\">\r\n                          <div className=\"action-buttons\">\r\n                            <button\r\n                              className=\"action-btn download-btn\"\r\n                              title=\"Download AI Attendance Report\"\r\n                              onClick={async () => {\r\n                                try {\r\n                                  const { data } = await api.get(`/projects/${report.projectId}/attendance-signed-url`, {\r\n                                    params: { path: report.outputPath },\r\n                                    headers: { Authorization: `Bearer ${token}` }\r\n                                  });\r\n                                  if (data?.signedUrl) {\r\n                                    window.open(data.signedUrl, '_blank');\r\n                                  }\r\n                                } catch (error) {\r\n                                  console.error('Error downloading report:', error);\r\n                                  alert('Failed to download report');\r\n                                }\r\n                              }}\r\n                            >\r\n                              <FaDownload />\r\n                            </button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HrAttendance;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport {\r\n  FaTachometerAlt,\r\n  FaComments,\r\n  FaUsers,\r\n  FaExchangeAlt,\r\n  FaProjectDiagram,\r\n  FaClipboardList,\r\n  FaChartBar,\r\n  FaArrowLeft,\r\n  FaTrash,\r\n  FaCalendarPlus,\r\n  FaCalendarAlt,\r\n  FaUserTie,\r\n  FaClock,\r\n  FaFileAlt,\r\n  FaCheckCircle,\r\n  FaExclamationTriangle,\r\n  FaHourglassHalf\r\n} from 'react-icons/fa';\r\nimport '../style/hr_style/Hr_ManpowerRequestDetail.css';\r\n\r\n// IT-style helper functions and styles\r\nconst inputStyle = { width:'100%', padding:'10px 12px', border:'1px solid #d1d5db', borderRadius:6, fontSize:14 };\r\nconst pill = (bg, color='#111827') => ({ background:bg, color, padding:'4px 10px', borderRadius:20, fontSize:12, fontWeight:600, display:'inline-flex', alignItems:'center', gap:6 });\r\nconst labelStyle = { display:'block', fontWeight:600, marginBottom:6, fontSize:13, letterSpacing:'.25px', color:'#374151' };\r\nconst valueBox = { padding:'12px 14px', border:'1px solid #e5e7eb', borderRadius:8, background:'#fff', fontSize:14, minHeight:44, display:'flex', alignItems:'center' };\r\nconst btn = (variant) => {\r\n  const base = { display:'inline-flex', alignItems:'center', gap:8, padding:'10px 18px', fontSize:14, fontWeight:600, borderRadius:8, border:'none', cursor:'pointer' };\r\n  switch(variant){\r\n    case 'primary': return { ...base, background:'#2563eb', color:'#fff' };\r\n    case 'danger': return { ...base, background:'#dc2626', color:'#fff' };\r\n    case 'neutral': return { ...base, background:'#6b7280', color:'#fff' };\r\n    default: return { ...base, background:'#e5e7eb', color:'#111827' };\r\n  }\r\n};\r\n\r\nconst getStatusBadgeStyle = (status) => {\r\n  const statusColors = {\r\n    Pending: pill('#fef3c7', '#92400e'),\r\n    Approved: pill('#dcfce7', '#065f46'),\r\n    Overdue: pill('#fee2e2', '#991b1b'),\r\n    Completed: pill('#e0f2fe', '#075985'),\r\n    Rejected: pill('#fee2e2', '#991b1b')\r\n  };\r\n  return statusColors[status] || pill('#e5e7eb');\r\n};\r\n\r\nconst HrManpowerRequestDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  // User data\r\n  const token = localStorage.getItem('token');\r\n  const stored = localStorage.getItem('user');\r\n  const user = stored ? JSON.parse(stored) : null;\r\n  const userId = user?._id || user?.id || null;\r\n  const userRole = user?.role;\r\n  const [userName] = useState(() => user?.name || 'HR Manager');\r\n\r\n  // Profile dropdown handled by AppHeader\r\n\r\n  // Request data\r\n  const [request, setRequest] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [busy, setBusy] = useState(false);\r\n\r\n  // UI state\r\n  const [markReceived, setMarkReceived] = useState(false);\r\n  const [showCalendar, setShowCalendar] = useState(false);\r\n  const [selectedDate, setSelectedDate] = useState('');\r\n\r\n  // Removed outside click listener (unified header)\r\n\r\n  const handleLogout = () => {\r\n    api.post('/auth/logout', {}, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    }).finally(() => {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      navigate('/');\r\n    });\r\n  };\r\n\r\n  // Load request data\r\n  useEffect(() => {\r\n    const run = async () => {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        const { data } = await api.get(`/manpower-requests/${id}`, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        setRequest(data);\r\n        \r\n        // Mark as viewed\r\n        if (!data.isViewed) {\r\n          try {\r\n            await api.put(`/manpower-requests/${id}`, {\r\n              isViewed: true\r\n            }, {\r\n              headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n          } catch (err) {\r\n            console.error('Failed to mark as viewed:', err);\r\n          }\r\n        }\r\n      } catch (err) {\r\n        setError('Failed to load request details');\r\n        console.error('Error fetching request:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    run();\r\n  }, [id, token]);\r\n\r\n  const handleBack = () => navigate('/hr/movement');\r\n\r\n\r\n\r\n  const handleDelete = async () => {\r\n    if (!window.confirm('Are you sure you want to delete this request? This action cannot be undone.')) return;\r\n    \r\n    setBusy(true);\r\n    try {\r\n      await api.delete(`/manpower-requests/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      \r\n      alert('🗑️ Request deleted successfully');\r\n      navigate('/hr/dash');\r\n    } catch (err) {\r\n      console.error('Error deleting request:', err);\r\n      alert('❌ Failed to delete request');\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleReceived = async () => {\r\n    const next = !markReceived;\r\n    setMarkReceived(next);\r\n  };\r\n\r\n  const handleScheduleReturn = () => setShowCalendar(true);\r\n  const handleDateConfirm = async () => {\r\n    if (!selectedDate) return;\r\n    try {\r\n      await api.put(`/manpower-requests/${id}/return`, { returnDate: selectedDate });\r\n      setShowCalendar(false);\r\n      const { data } = await api.get(`/manpower-requests/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setRequest(data);\r\n      alert(`Return scheduled for ${selectedDate}`);\r\n    } catch {\r\n      alert('Failed to set return date');\r\n    }\r\n  };\r\n\r\n  const isApproved = (request?.status || '').toLowerCase() === 'approved';\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status?.toLowerCase()) {\r\n      case 'approved':\r\n        return <FaCheckCircle className=\"status-icon approved\" />;\r\n      case 'rejected':\r\n        return <FaExclamationTriangle className=\"status-icon rejected\" />;\r\n      case 'pending':\r\n        return <FaHourglassHalf className=\"status-icon pending\" />;\r\n      default:\r\n        return <FaHourglassHalf className=\"status-icon pending\" />;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"dashboard-container\">\r\n        <div className=\"loading-container\">\r\n          <div className=\"loading-spinner\"></div>\r\n          <p>Loading manpower request details...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !request) {\r\n    return (\r\n      <div className=\"dashboard-container\">\r\n        <div className=\"error-container\">\r\n          <FaExclamationTriangle className=\"error-icon\" />\r\n          <p>{error || 'Request not found.'}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <AppHeader\r\n        roleSegment=\"hr\"\r\n        onLogout={handleLogout}\r\n        overrideNav={[\r\n          { to:'/hr/dash', label:'Dashboard', icon:<FaTachometerAlt/>, match:'/hr/dash' },\r\n          { to:'/hr/chat', label:'Chat', icon:<FaComments/>, match:'/hr/chat' },\r\n          { to:'/hr/mlist', label:'Manpower', icon:<FaUsers/>, match:'/hr/mlist' },\r\n          { to:'/hr/movement', label:'Movement', icon:<FaExchangeAlt/>, match:'/hr/movement' },\r\n          { to:'/hr/project-records', label:'Projects', icon:<FaProjectDiagram/>, match:'/hr/project-records' },\r\n          { to:'/hr/attendance', label:'Attendance', icon:<FaCalendarAlt/>, match:'/hr/attendance' }\r\n        ]}\r\n      />\r\n\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"form-container\" style={{ maxWidth:900, margin:'40px auto', background:'#fff', borderRadius:16, padding:'32px 40px', boxShadow:'0 4px 16px rgba(0,0,0,0.06)' }}>\r\n          <div style={{ display:'flex', justifyContent:'space-between', alignItems:'flex-start', flexWrap:'wrap', gap:24 }}>\r\n            <div>\r\n              <h2 style={{ margin:0, fontSize:30, fontWeight:700 }}>Manpower Request</h2>\r\n              <div style={{ marginTop:8, fontSize:14, color:'#4b5563' }}>\r\n                Project: <strong>{request.project?.projectName || 'N/A'}</strong> &nbsp;•&nbsp; Requested by {request.createdBy?.name}\r\n              </div>\r\n              <div style={{ marginTop:12 }}>\r\n                <span style={getStatusBadgeStyle(request.status)}>{request.status}</span>\r\n              </div>\r\n            </div>\r\n            <div style={{ display:'flex', gap:12, flexWrap:'wrap' }}>\r\n              <button onClick={handleBack} style={btn('secondary')}>Back</button>\r\n              <button disabled={busy} onClick={handleDelete} style={btn('danger')}>{busy? 'Deleting...' : 'Delete'}</button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content Sections */}\r\n          <div style={{ marginTop:32, display:'grid', gap:32, gridTemplateColumns:'repeat(auto-fit,minmax(260px,1fr))' }}>\r\n            <div>\r\n              <label style={labelStyle}>Target Acquisition Date</label>\r\n              <div style={valueBox}>{request.acquisitionDate ? new Date(request.acquisitionDate).toLocaleDateString() : '—'}</div>\r\n            </div>\r\n            <div>\r\n              <label style={labelStyle}>Duration (days)</label>\r\n              <div style={valueBox}>{request.duration} days</div>\r\n            </div>\r\n            <div>\r\n              <label style={labelStyle}>Project</label>\r\n              <div style={{ ...valueBox, background:'#f3f4f6' }}>{request.project?.projectName || '—'}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginTop:40 }}>\r\n            <label style={labelStyle}>Manpower Needed</label>\r\n            <div style={{ display:'flex', flexWrap:'wrap', gap:12 }}>\r\n              {request.manpowers?.length ? request.manpowers.map((m,i)=>(\r\n                <span key={i} style={pill('#eef2ff', '#3730a3')}>{m.quantity} {m.type}</span>\r\n              )) : <span style={{ color:'#6b7280' }}>No manpower entries</span>}\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginTop:40 }}>\r\n            <label style={labelStyle}>Description / Purpose</label>\r\n            <div style={{ ...valueBox, minHeight:80 }}>{request.description || 'No description provided'}</div>\r\n          </div>\r\n\r\n          {/* HR-specific functionality */}\r\n          <div className=\"request-details-container\">\r\n            {/* Status Banner */}\r\n            <div className={`status-banner ${request.status?.toLowerCase()}`}>\r\n              {/* Overdue Ribbon for Pending Requests */}\r\n              {request.status?.toLowerCase() === 'pending' && \r\n               request.acquisitionDate && \r\n               new Date(request.acquisitionDate) < new Date() && (\r\n               <div className=\"overdue-ribbon\">\r\n                 <span>OVERDUE</span>\r\n               </div>\r\n              )}\r\n              \r\n              <div className=\"status-content\">\r\n                {getStatusIcon(request.status)}\r\n                <div className=\"status-info\">\r\n                  <h3 className=\"status-title\">\r\n                    {request.status || 'Pending'} Request\r\n                  </h3>\r\n                  <p className=\"status-description\">\r\n                    {request.status?.toLowerCase() === 'approved' \r\n                      ? 'This request has been approved and manpower assigned'\r\n                      : request.status?.toLowerCase() === 'rejected'\r\n                      ? 'This request has been rejected'\r\n                      : 'Waiting for HR approval'\r\n                    }\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Received Toggle for Approved Requests */}\r\n              {isApproved && (\r\n                <div className=\"received-toggle\">\r\n                  <label className=\"toggle-label\">\r\n                    <input \r\n                      type=\"checkbox\" \r\n                      checked={markReceived} \r\n                      onChange={handleToggleReceived}\r\n                      className=\"toggle-input\"\r\n                    />\r\n                    <span className=\"toggle-text\">Mark as Received</span>\r\n                  </label>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Request Information Cards */}\r\n            <div className=\"info-grid\">\r\n              {/* Basic Info Card */}\r\n              <div className=\"info-card\">\r\n                <div className=\"card-header\">\r\n                  <FaFileAlt className=\"card-icon\" />\r\n                  <h3>Request Information</h3>\r\n                </div>\r\n                <div className=\"card-content\">\r\n                  <div className=\"info-row\">\r\n                    <span className=\"info-label\">Request Number:</span>\r\n                    <span className=\"info-value\">#{request.requestNumber || id?.slice(-3)}</span>\r\n                  </div>\r\n                  <div className=\"info-row\">\r\n                    <span className=\"info-label\">Created By:</span>\r\n                    <span className=\"info-value\">\r\n                      <FaUserTie className=\"inline-icon\" />\r\n                      {request.createdBy?.name || 'Unknown'}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"info-row\">\r\n                    <span className=\"info-label\">Project:</span>\r\n                    <span className=\"info-value\">\r\n                      <FaProjectDiagram className=\"inline-icon\" />\r\n                      {request.project?.projectName || 'Unknown Project'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Timeline Card */}\r\n              <div className=\"info-card\">\r\n                <div className=\"card-header\">\r\n                  <FaClock className=\"card-icon\" />\r\n                  <h3>Timeline</h3>\r\n                </div>\r\n                <div className=\"card-content\">\r\n                  <div className=\"info-row\">\r\n                    <span className=\"info-label\">Target Date:</span>\r\n                    <span className=\"info-value\">\r\n                      {request.acquisitionDate ? new Date(request.acquisitionDate).toLocaleDateString() : 'Not set'}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"info-row\">\r\n                    <span className=\"info-label\">Duration:</span>\r\n                    <span className=\"info-value\">{request.duration} days</span>\r\n                  </div>\r\n                  {request.returnDate && (\r\n                    <div className=\"info-row\">\r\n                      <span className=\"info-label\">Return Date:</span>\r\n                      <span className=\"info-value\">\r\n                        {new Date(request.returnDate).toLocaleDateString()}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Manpower Requirements */}\r\n            <div className=\"requirements-card\">\r\n              <div className=\"card-header\">\r\n                <FaUsers className=\"card-icon\" />\r\n                <h3>Manpower Requirements</h3>\r\n              </div>\r\n              <div className=\"card-content\">\r\n                {Array.isArray(request?.manpowers) && request.manpowers.length > 0 ? (\r\n                  <div className=\"manpower-grid\">\r\n                    {request.manpowers.map((mp, i) => (\r\n                      <div key={i} className=\"manpower-item\">\r\n                        <div className=\"manpower-quantity\">{mp.quantity}</div>\r\n                        <div className=\"manpower-type\">{mp.type}</div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"no-manpower\">\r\n                    <p>No manpower types listed</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div className=\"description-card\">\r\n              <div className=\"card-header\">\r\n                <FaFileAlt className=\"card-icon\" />\r\n                <h3>Request Description</h3>\r\n              </div>\r\n              <div className=\"card-content\">\r\n                <div className=\"description-text\">\r\n                  {request.description || 'No description provided'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n\r\n\r\n            {/* Management Actions */}\r\n            <div className=\"creator-actions\">\r\n              <button onClick={handleDelete} className=\"cancel-btn\">\r\n                <FaTrash />\r\n                <span>Delete Request</span>\r\n              </button>\r\n            </div>\r\n\r\n            {/* Return Scheduling & Navigation */}\r\n            <div className=\"bottom-actions\">\r\n              <button\r\n                onClick={() => navigate(-1)}\r\n                className=\"back-btn\"\r\n              >\r\n                <FaArrowLeft />\r\n                <span>Go Back</span>\r\n              </button>\r\n\r\n              {isApproved && !request.returnDate && (\r\n                <button\r\n                  onClick={handleScheduleReturn}\r\n                  disabled={!markReceived}\r\n                  className={`schedule-btn ${!markReceived ? 'disabled' : ''}`}\r\n                >\r\n                  <FaCalendarPlus />\r\n                  <span>Schedule Return</span>\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Calendar Modal */}\r\n          {showCalendar && (\r\n            <div className=\"modal-overlay\">\r\n              <div className=\"calendar-modal\">\r\n                <div className=\"modal-header\">\r\n                  <h3>Schedule Return Date</h3>\r\n                </div>\r\n                <div className=\"modal-content\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={selectedDate}\r\n                    min={new Date().toISOString().split('T')[0]}\r\n                    onChange={e => setSelectedDate(e.target.value)}\r\n                    className=\"date-input\"\r\n                  />\r\n                </div>\r\n                <div className=\"modal-actions\">\r\n                  <button\r\n                    className=\"confirm-btn\"\r\n                    disabled={!selectedDate}\r\n                    onClick={handleDateConfirm}\r\n                  >\r\n                    Confirm\r\n                  </button>\r\n                  <button\r\n                    className=\"cancel-modal-btn\"\r\n                    onClick={() => setShowCalendar(false)}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <AuditTrail requestId={request._id} />\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Audit trail component (inline fetch)\r\nconst AuditTrail = ({ requestId }) => {\r\n  const [logs, setLogs] = React.useState([]);\r\n  const [open, setOpen] = React.useState(false);\r\n  const token = localStorage.getItem('token');\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const fetchLogs = async () => {\r\n      try {\r\n        const { data } = await api.get('/audit-logs', { headers:{ Authorization:`Bearer ${token}` } });\r\n        // Filter to those referencing this request\r\n        const filtered = data.filter(l => l.meta?.requestId === requestId);\r\n        setLogs(filtered);\r\n      } catch(e){ console.error('Audit fetch failed', e); }\r\n    };\r\n    fetchLogs();\r\n  }, [open, requestId, token]);\r\n\r\n  return (\r\n    <div style={{ marginTop:48 }}>\r\n      <button onClick={()=>setOpen(o=>!o)} style={{ ...btn('neutral'), background:'#f3f4f6', color:'#111827' }}>{open? 'Hide' : 'Show'} Audit Log</button>\r\n      {open && (\r\n        <div style={{ marginTop:16, maxHeight:260, overflowY:'auto', border:'1px solid #e5e7eb', borderRadius:12, padding:16, background:'#fafafa' }}>\r\n          {logs.length === 0 && <div style={{ fontSize:13, color:'#6b7280' }}>No audit entries for this request.</div>}\r\n          {logs.map(l => (\r\n            <div key={l._id || l.timestamp} style={{ padding:'10px 12px', borderBottom:'1px solid #e5e7eb', fontSize:13, lineHeight:1.4 }}>\r\n              <div style={{ fontWeight:600 }}>{l.action}</div>\r\n              <div style={{ color:'#374151' }}>{l.description}</div>\r\n              <div style={{ color:'#6b7280', fontSize:12, marginTop:4 }}>{new Date(l.timestamp).toLocaleString()} • {l.performedBy?.name} ({l.performedByRole})</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HrManpowerRequestDetail;\r\n","import jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\n/* ---------- utility functions ---------- */\r\nfunction loadImageDataURLWithSize(url) {\r\n  return new Promise((resolve) => {\r\n    if (!url) return resolve(null);\r\n    try {\r\n      const img = new Image();\r\n      img.crossOrigin = 'anonymous';\r\n      img.onload = () => {\r\n        const c = document.createElement('canvas');\r\n        c.width = img.naturalWidth;\r\n        c.height = img.naturalHeight;\r\n        c.getContext('2d').drawImage(img, 0, 0);\r\n        resolve({ dataUrl: c.toDataURL('image/png'), w: img.naturalWidth, h: img.naturalHeight });\r\n      };\r\n      img.onerror = () => resolve(null);\r\n      img.src = url;\r\n    } catch {\r\n      resolve(null);\r\n    }\r\n  });\r\n}\r\n\r\nfunction loadFontFromPublic(doc, fontFile, family, style) {\r\n  return new Promise((resolve) => {\r\n    try {\r\n      const fontPath = `${process.env.PUBLIC_URL || ''}/fonts/${fontFile}`;\r\n      fetch(fontPath)\r\n        .then((r) => r.arrayBuffer())\r\n        .then((buf) => {\r\n          try {\r\n            doc.addFileToVFS(fontFile, buf);\r\n            doc.addFont(fontFile, family, style);\r\n            resolve(true);\r\n          } catch {\r\n            resolve(false);\r\n          }\r\n        })\r\n        .catch(() => resolve(false));\r\n    } catch {\r\n      resolve(false);\r\n    }\r\n  });\r\n}\r\n\r\nfunction fontUsable(doc, family, style) {\r\n  try {\r\n    const fonts = doc.getFontList();\r\n    return fonts && fonts[family] && fonts[family][style];\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction fitInside(w, h, maxW, maxH) {\r\n  if (!w || !h) return { w: maxW, h: maxH };\r\n  const r = Math.min(maxW / w, maxH / h, 1);\r\n  return { w: w * r, h: h * r };\r\n}\r\n\r\nfunction formatDateTime(date) {\r\n  if (!date) return 'N/A';\r\n  const dt = new Date(date);\r\n  return Number.isNaN(dt.getTime()) ? 'N/A' : dt.toLocaleString();\r\n}\r\n\r\nfunction buildFileName(prefix = 'Manpower-Requests-Export') {\r\n  const d = new Date();\r\n  const name = `_${pad(d.getHours())}${pad(d.getMinutes())}`;\r\n  return `${prefix}-${name}.pdf`;\r\n}\r\n\r\nfunction pad(n) {\r\n  return String(n).padStart(2, '0');\r\n}\r\n\r\nfunction buildFiltersSummary(filters) {\r\n  const parts = [];\r\n  if (filters.status && filters.status !== 'all') parts.push(`Status: ${filters.status}`);\r\n  if (filters.search) parts.push(`Search: \"${filters.search}\"`);\r\n  if (filters.dateFrom) parts.push(`From: ${filters.dateFrom}`);\r\n  if (filters.dateTo) parts.push(`To: ${filters.dateTo}`);\r\n  return parts.length ? parts.join(', ') : null;\r\n}\r\n\r\nfunction computeStatusLabel(req) {\r\n  if (req.status === 'Approved') return 'Approved';\r\n  if (req.status === 'Pending') return 'Pending';\r\n  if (req.status === 'Rejected') return 'Rejected';\r\n  if (req.status === 'Completed') return 'Completed';\r\n  if (req.status === 'In Progress') return 'In Progress';\r\n  return 'Unknown';\r\n}\r\n\r\nexport async function exportManpowerRequestsPdf(rows = [], options = {}) {\r\n  const {\r\n    companyName = 'FadzTrack',\r\n    logoPath = `${process.env.PUBLIC_URL || ''}/images/Fadz-logo.png`,\r\n    exporterName = 'Unknown',\r\n    exporterRole = '',\r\n    filters = {},\r\n    reportTitle = 'Manpower Requests Export',\r\n  } = options;\r\n\r\n  const doc = new jsPDF({ unit: 'pt', format: 'a4' });\r\n\r\n  // Fonts\r\n  const FAMILY = 'NotoSans';\r\n  const regOk = await loadFontFromPublic(doc, 'NotoSans-Regular.ttf', FAMILY, 'normal');\r\n  const boldOk = await loadFontFromPublic(doc, 'NotoSans-Bold.ttf', FAMILY, 'bold');\r\n  const canUseRegular = regOk && fontUsable(doc, FAMILY, 'normal');\r\n  const canUseBold = boldOk && fontUsable(doc, FAMILY, 'bold');\r\n  const bodyFont = canUseRegular ? FAMILY : 'helvetica';\r\n  const headStyle = canUseBold ? 'bold' : 'normal';\r\n\r\n  const marginX = 40;\r\n  let y = 40;\r\n\r\n  // Header: logo + company name + context\r\n  const logo = await loadImageDataURLWithSize(logoPath);\r\n  let titleX = marginX;\r\n  if (logo?.dataUrl) {\r\n    const { w: drawW, h: drawH } = fitInside(logo.w, logo.h, 180, 60); // increased size\r\n    doc.addImage(logo.dataUrl, 'PNG', marginX, y - 12, drawW, drawH, undefined, 'FAST');\r\n    titleX = marginX + drawW + 16; // more spacing\r\n  }\r\n\r\n  doc.setFont(bodyFont, headStyle);\r\n  doc.setFontSize(20); // increased font size\r\n  doc.setTextColor(20);\r\n  doc.text(String(companyName), titleX, y + 16);\r\n\r\n  doc.setFont(bodyFont, 'normal');\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(90);\r\n  doc.text(reportTitle, titleX, y + 26);\r\n\r\n  // Divider\r\n  doc.setDrawColor(220);\r\n  doc.setLineWidth(1);\r\n  doc.line(marginX, y + 38, 595 - marginX, y + 38);\r\n  y += 54;\r\n\r\n  // Metadata block\r\n  doc.setFont(bodyFont, headStyle);\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(20);\r\n  doc.text('Export Details', marginX, y);\r\n\r\n  doc.setFont(bodyFont, 'normal');\r\n  doc.setTextColor(60);\r\n  const meta = [\r\n    `Exported by: ${exporterName}${exporterRole ? ` (${exporterRole})` : ''}`,\r\n    `Date exported: ${formatDateTime(new Date())}`,\r\n  ];\r\n  const filterSummary = buildFiltersSummary(filters);\r\n  if (filterSummary) meta.push(`Filters: ${filterSummary}`);\r\n\r\n  let metaY = y + 16;\r\n  meta.forEach((line) => {\r\n    doc.text(line, marginX, metaY);\r\n    metaY += 16;\r\n  });\r\n\r\n  // Table\r\n  const tableStartY = metaY + 6;\r\n  const head = [['Date', 'Requester', 'Project', 'Manpower Requested', 'Status', 'Acquisition Date']];\r\n  const body = rows.map((r) => {\r\n    const manpowerList = Array.isArray(r.manpowerRequested)\r\n      ? r.manpowerRequested.map((m) => `${m.name || ''}${m.position ? ` (${m.position})` : ''}`).join(', ')\r\n      : '';\r\n    return [\r\n      r.createdAt ? new Date(r.createdAt).toLocaleDateString() : '',\r\n      String(r.createdBy?.name || ''),\r\n      String(r.project?.projectName || ''),\r\n      manpowerList,\r\n      computeStatusLabel(r),\r\n      r.acquisitionDate ? new Date(r.acquisitionDate).toLocaleDateString() : '',\r\n    ];\r\n  });\r\n\r\n  autoTable(doc, {\r\n    startY: tableStartY,\r\n    head,\r\n    body,\r\n    styles: { font: bodyFont, fontStyle: 'normal', fontSize: 10, cellPadding: 5, halign: 'left', overflow: 'linebreak' },\r\n    headStyles: { font: bodyFont, fontStyle: headStyle, fillColor: [59, 130, 246], textColor: 255 },\r\n    theme: 'grid',\r\n    margin: { left: marginX, right: marginX },\r\n    columnStyles: { 3: { cellWidth: 180 } }, // Manpower Requested column\r\n    didDrawPage: () => {\r\n      const str = `Generated: ${formatDateTime(new Date())}`;\r\n      doc.setFont(bodyFont, 'normal');\r\n      doc.setFontSize(9);\r\n      doc.setTextColor(120);\r\n      doc.text(str, marginX, 842 - 24);\r\n\r\n      const page = doc.getCurrentPageInfo().pageNumber || 1;\r\n      const pages = doc.getNumberOfPages();\r\n      const label = `Page ${page} of ${pages}`;\r\n      const w = doc.getTextWidth(label);\r\n      doc.text(label, 595 - marginX - w, 842 - 24);\r\n    },\r\n  });\r\n\r\n  doc.save(buildFileName());\r\n}\r\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport '../style/ceo_style/Ceo_Dash.css';\r\nimport '../style/ceo_style/Ceo_ManpowerRequest.css';\r\nimport api from '../../api/axiosInstance';\r\nimport { FaSearch } from 'react-icons/fa';\r\nimport AppHeader from '../layout/AppHeader';\r\n\r\nconst ITEMS_PER_PAGE = 8;\r\n\r\nconst HrMovementList = () => {\r\n  const navigate = useNavigate();\r\n  const userRef = useRef(null);\r\n  if (userRef.current === null) {\r\n    const stored = localStorage.getItem('user');\r\n    userRef.current = stored ? JSON.parse(stored) : null;\r\n  }\r\n  const user = userRef.current;\r\n\r\n  const [requests, setRequests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [status, setStatus] = useState('All');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [layoutView, setLayoutView] = useState('cards');\r\n\r\n  useEffect(() => {\r\n    if (!user || user.role !== 'HR') return;\r\n    let active = true;\r\n    const fetchAll = async () => {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        const { data } = await api.get('/manpower-requests');\r\n        if (!active) return;\r\n        setRequests(Array.isArray(data) ? data : []);\r\n      } catch (err) {\r\n        if (!active) return;\r\n        console.error('Failed to load manpower requests:', err);\r\n        if (err.response && (err.response.status === 401 || err.response.status === 403)) {\r\n          setError('Session expired or unauthorized. Please login.');\r\n        } else {\r\n          setError('Failed to load manpower requests');\r\n        }\r\n      } finally {\r\n        if (active) {\r\n        setLoading(false);\r\n          setCurrentPage(1);\r\n        }\r\n      }\r\n    };\r\n    fetchAll();\r\n    return () => { active = false; };\r\n  }, [user]);\r\n\r\n  const filteredRequests = useMemo(() => {\r\n    let items = requests;\r\n    if (status !== 'All') {\r\n      if (status === 'Archived') {\r\n        items = items.filter(r => (r.status || 'Pending').toLowerCase().includes('archived'));\r\n      } else {\r\n        items = items.filter(r => (r.status || 'Pending').toLowerCase().includes(status.toLowerCase()));\r\n      }\r\n      } else {\r\n      // For 'All' filter, exclude archived items by default\r\n      items = items.filter(r => !(r.status || 'Pending').toLowerCase().includes('archived'));\r\n    }\r\n    if (searchTerm) {\r\n      const s = searchTerm.toLowerCase();\r\n      items = items.filter(r => {\r\n        const proj = r.project?.projectName || '';\r\n        const by = r.createdBy?.name || '';\r\n        const summary = (r.manpowers || []).map(m => `${m.quantity} ${m.type}`).join(', ');\r\n        return proj.toLowerCase().includes(s) || by.toLowerCase().includes(s) || summary.toLowerCase().includes(s) || (r.description || '').toLowerCase().includes(s);\r\n      });\r\n    }\r\n    return items;\r\n  }, [requests, status, searchTerm]);\r\n\r\n  const totalPages = Math.max(1, Math.ceil(filteredRequests.length / ITEMS_PER_PAGE));\r\n  const pageRows = useMemo(() => {\r\n    const start = (currentPage - 1) * ITEMS_PER_PAGE;\r\n    return filteredRequests.slice(start, start + ITEMS_PER_PAGE);\r\n  }, [filteredRequests, currentPage]);\r\n\r\n  const getRequestBackgroundColor = (request) => {\r\n    const statusLower = request.status?.toLowerCase() || '';\r\n    if (statusLower.includes('pending') && request.acquisitionDate && new Date(request.acquisitionDate) < new Date()) {\r\n      return '#fef3c7';\r\n    }\r\n    if (statusLower.includes('pending')) return '#ffffff';\r\n    if (statusLower.includes('approved')) return '#fef3c7';\r\n    if (statusLower.includes('rejected') || statusLower.includes('cancel') || statusLower.includes('denied')) return '#fef2f2';\r\n    if (statusLower.includes('completed')) return '#ecfdf5';\r\n    return '#f9fafb';\r\n  };\r\n\r\n  const getStatusBadge = (request) => {\r\n    const s = (request.status || 'Pending').toLowerCase();\r\n    const isOverdue = s === 'pending' && request.acquisitionDate && new Date(request.acquisitionDate) < new Date();\r\n    if (isOverdue) return 'Overdue';\r\n    if (s.includes('archived')) return 'Archived';\r\n    if (s.includes('completed')) return 'Completed';\r\n    if (s.includes('approved')) return 'Approved';\r\n    if (s.includes('pending')) return 'Pending';\r\n    if (s.includes('reject') || s.includes('denied') || s.includes('cancel')) return 'Rejected';\r\n    if (s.includes('overdue')) return 'Overdue';\r\n    return 'Unknown';\r\n  };\r\n\r\n  const getStatusColor = (request) => {\r\n    const s = (request.status || 'Pending').toLowerCase();\r\n    const isOverdue = s === 'pending' && request.acquisitionDate && new Date(request.acquisitionDate) < new Date();\r\n    if (isOverdue) return '#d97706';\r\n    if (s.includes('archived')) return '#8b5cf6';\r\n    if (s.includes('completed')) return '#059669';\r\n    if (s.includes('approved')) return '#10b981';\r\n    if (s.includes('pending')) return '#f59e0b';\r\n    if (s.includes('reject') || s.includes('denied') || s.includes('cancel')) return '#ef4444';\r\n    if (s.includes('overdue')) return '#d97706';\r\n    return '#6b7280';\r\n  };\r\n\r\n  const summaryCounts = useMemo(() => {\r\n    let pending = 0, approved = 0, completed = 0, rejected = 0, overdue = 0, archived = 0;\r\n    requests.forEach(r => {\r\n      const s = (r.status || 'Pending').toLowerCase();\r\n      const isOver = s === 'pending' && r.acquisitionDate && new Date(r.acquisitionDate) < new Date();\r\n      if (s.includes('archived')) archived++; else if (s.includes('completed')) completed++; else if (s.includes('approved')) approved++; else if (s.includes('reject') || s.includes('denied') || s.includes('cancel')) rejected++; else if (isOver || s.includes('overdue')) overdue++; else pending++;\r\n    });\r\n    return { total: requests.length, pending, approved, rejected, overdue, completed, archived };\r\n  }, [requests]);\r\n\r\n  const statusCounts = useMemo(() => ({\r\n    All: summaryCounts.total - summaryCounts.archived, // Exclude archived from All count\r\n    Pending: summaryCounts.pending,\r\n    Overdue: summaryCounts.overdue,\r\n    Approved: summaryCounts.approved,\r\n    Completed: summaryCounts.completed,\r\n    Rejected: summaryCounts.rejected,\r\n    Archived: summaryCounts.archived\r\n  }), [summaryCounts]);\r\n\r\n  if (!user || user.role !== 'HR') {\r\n    return (\r\n      <div style={{ padding: 24 }}>\r\n        <h2>Forbidden</h2>\r\n        <p>You must be an HR user to view this page.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-container ceo-manpower-requests-page\">\r\n      <AppHeader roleSegment=\"hr\" />\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"page-container\">\r\n          <div className=\"dashboard-card ceo-mr-header-card\">\r\n            <div className=\"card-header mr-header-row\">\r\n              <div className=\"mr-header-texts\">\r\n                <h1 className=\"card-title\">Movement Tracking</h1>\r\n                <p className=\"card-subtitle\">Monitor and manage staff movements and transfers across projects</p>\r\n            </div>\r\n              <div className=\"layout-toggle-wrapper\">\r\n                <button onClick={()=>setLayoutView(v=> v==='cards' ? 'table' : 'cards')} className=\"btn-secondary toggle-layout-btn\">\r\n                  {layoutView === 'cards' ? 'Table View' : 'Card View'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n            <div className=\"card-body mr-filters-row\">\r\n              <div className=\"filter-tabs compact\">\r\n                {['All','Pending','Overdue','Approved','Completed','Rejected','Archived'].map(tab => (\r\n                  <button key={tab} className={`filter-tab ${status === tab ? 'active' : ''}`} onClick={() => {setStatus(tab); setCurrentPage(1);}}>\r\n                    <span>{tab}</span>\r\n                    <span className=\"count\">{statusCounts[tab] ?? 0}</span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              <div className=\"search-wrapper stretch\">\r\n                <FaSearch className=\"search-icon\" />\r\n                <input type=\"text\" placeholder=\"Search requests...\" value={searchTerm} onChange={(e)=>{setSearchTerm(e.target.value); setCurrentPage(1);}} className=\"search-input\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"dashboard-card ceo-mr-summary-card\">\r\n            <div className=\"card-header\"><h3 className=\"card-title-sm\">Summary</h3></div>\r\n            <div className=\"mr-summary-grid\">\r\n              {[{ label:'Total', value: summaryCounts.total, color:'#334155' },\r\n                { label:'Pending', value: summaryCounts.pending, color:'#f59e0b' },\r\n                { label:'Overdue', value: summaryCounts.overdue, color:'#d97706' },\r\n                { label:'Approved', value: summaryCounts.approved, color:'#10b981' },\r\n                { label:'Completed', value: summaryCounts.completed, color:'#059669' },\r\n                { label:'Rejected', value: summaryCounts.rejected, color:'#ef4444' },\r\n                { label:'Archived', value: summaryCounts.archived, color:'#8b5cf6' }\r\n              ].map(c => (\r\n                <div key={c.label} className=\"mr-summary-item\">\r\n                  <span className=\"mr-summary-label\">{c.label}</span>\r\n                  <span className=\"mr-summary-value\" style={{ color:c.color }}>{c.value}</span>\r\n                  <div className=\"mr-summary-bar\" style={{ background:c.color }} />\r\n            </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"dashboard-card ceo-mr-list-card\">\r\n            <div className=\"card-header list-header\"><h3 className=\"card-title-sm\">Requests <span className=\"muted\">({filteredRequests.length})</span></h3></div>\r\n            <div className={`requests-grid ceo-mr-grid ${layoutView === 'table' ? 'table-view' : ''}`}>            \r\n            {loading ? (\r\n                <div className=\"loading-state\"><div className=\"loading-spinner\"></div><p>Loading manpower requests...</p></div>\r\n            ) : error ? (\r\n                <div className=\"error-state\"><p>{error}</p></div>\r\n              ) : pageRows.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                  <div className=\"empty-icon\">👥</div>\r\n                  <h3>No manpower requests found</h3>\r\n                  <p>No requests match your current filters. Try adjusting your search criteria.</p>\r\n            </div>\r\n          ) : (\r\n                <>\r\n                  {layoutView === 'table' && (\r\n                    <div className=\"mr-table-header\" role=\"row\" aria-label=\"Table Header\">\r\n                      <div>Project</div>\r\n                      <div>Requester</div>\r\n                      <div>Description</div>\r\n                      <div>Manpower</div>\r\n                      <div>Target</div>\r\n                      <div>Dur</div>\r\n                      <div>Created</div>\r\n                      <div>Status</div>\r\n                    </div>\r\n                  )}\r\n                  {pageRows.map(request => {\r\n                    const summary = (request.manpowers || []).map(m=>`${m.quantity} ${m.type}`).join(', ');\r\n                    const badgeLabel = getStatusBadge(request);\r\n                    const badgeColor = getStatusColor(request);\r\n                    if (layoutView === 'table') {\r\n                  return (\r\n                    <div \r\n                          key={request._id}\r\n                          className=\"mr-table-row\"\r\n                          role=\"row\"\r\n                          onClick={() => navigate(`/hr/manpower-request/${request._id}`)}\r\n                          style={{ cursor: 'pointer' }}\r\n                          title=\"View details\"\r\n                        >\r\n                          <div className=\"rt-title\" title={request.project?.projectName || '(No Project Name)'}>{request.project?.projectName || '(No Project Name)'}</div>\r\n                          <div className=\"rt-req\" title={request.createdBy?.name || 'Unknown'}>{request.createdBy?.name || 'Unknown'}</div>\r\n                          <div className=\"rt-desc\" title={request.description || 'No description'}>{request.description || 'No description'}</div>\r\n                          <div className=\"rt-man\" title={summary || '—'}>{summary || '—'}</div>\r\n                          <div className=\"rt-date\" title=\"Target Date\">{request.acquisitionDate ? new Date(request.acquisitionDate).toLocaleDateString() : '—'}</div>\r\n                          <div className=\"rt-date\" title=\"Duration\">{request.duration || '—'}d</div>\r\n                          <div className=\"rt-date\" title=\"Created\">{request.createdAt ? new Date(request.createdAt).toLocaleDateString() : '—'}</div>\r\n                          <div className=\"rt-btn\"><span className={`status-chip ${badgeLabel.toLowerCase()}`}>{badgeLabel}</span></div>\r\n                        </div>\r\n                      );\r\n                    }\r\n                    return (\r\n                      <div className={`request-card ceo-mr-card`} key={request._id}>\r\n                        <div className=\"card-body\">\r\n                          <div className=\"mr-card-top-row\">\r\n                            <h3 className=\"request-title\" title={request.project?.projectName || '(No Project Name)'}>{request.project?.projectName || '(No Project Name)'}</h3>\r\n                            <span className={`status-chip ${badgeLabel.toLowerCase()}`}>{badgeLabel}</span>\r\n                        </div>\r\n                          <p className=\"request-description\" title={request.description || 'No description provided'}>{request.description || 'No description provided'}</p>\r\n                          <div className=\"request-meta\">\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Requested by:</span><span className=\"meta-value\" title={request.createdBy?.name || 'Unknown'}>{request.createdBy?.name || 'Unknown'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Manpower:</span><span className=\"meta-value\" title={summary || '—'}>{summary || '—'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Date:</span><span className=\"meta-value\">{request.createdAt ? new Date(request.createdAt).toLocaleDateString() : '—'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Target:</span><span className=\"meta-value\">{request.acquisitionDate ? new Date(request.acquisitionDate).toLocaleDateString() : '—'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Duration:</span><span className=\"meta-value\">{request.duration || '—'} d</span></div>\r\n                        </div>\r\n                      </div>\r\n                        <div className=\"card-footer\">\r\n                          <Link to={`/hr/manpower-request/${request._id}`} className=\"view-details-btn\">View Details</Link>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n                </>\r\n              )}\r\n            </div>\r\n            {filteredRequests.length > 0 && (\r\n              <div className=\"pagination-section inside-card\">\r\n                <div className=\"pagination-info\">Showing {((currentPage - 1) * ITEMS_PER_PAGE) + 1} to {Math.min(currentPage * ITEMS_PER_PAGE, filteredRequests.length)} of {filteredRequests.length} entries</div>\r\n                <div className=\"pagination-controls\">\r\n                  <button onClick={()=>setCurrentPage(p=>Math.max(p-1,1))} disabled={currentPage===1} className=\"pagination-btn\">Previous</button>\r\n                  {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => (\r\n                    <button key={page} className={`pagination-btn ${page === currentPage ? 'active' : ''}`} onClick={()=>setCurrentPage(page)}>{page}</button>\r\n                  ))}\r\n                  <button onClick={()=>setCurrentPage(p=>Math.min(p+1,totalPages))} disabled={currentPage===totalPages} className=\"pagination-btn\">Next</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HrMovementList;\r\n","import { CamelToPascal } from './utility-types';\n\n/**\n * Converts string to kebab case\n *\n * @param {string} string\n * @returns {string} A kebabized string\n */\nexport const toKebabCase = (string: string) =>\n  string.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n\n/**\n * Converts string to camel case\n *\n * @param {string} string\n * @returns {string} A camelized string\n */\nexport const toCamelCase = <T extends string>(string: T) =>\n  string.replace(/^([A-Z])|[\\s-_]+(\\w)/g, (match, p1, p2) =>\n    p2 ? p2.toUpperCase() : p1.toLowerCase(),\n  );\n\n/**\n * Converts string to pascal case\n *\n * @param {string} string\n * @returns {string} A pascalized string\n */\nexport const toPascalCase = <T extends string>(string: T): CamelToPascal<T> => {\n  const camelCase = toCamelCase(string);\n\n  return (camelCase.charAt(0).toUpperCase() + camelCase.slice(1)) as CamelToPascal<T>;\n};\n\n/**\n * Merges classes into a single string\n *\n * @param {array} classes\n * @returns {string} A string of classes\n */\nexport const mergeClasses = <ClassType = string | undefined | null>(...classes: ClassType[]) =>\n  classes\n    .filter((className, index, array) => {\n      return (\n        Boolean(className) &&\n        (className as string).trim() !== '' &&\n        array.indexOf(className) === index\n      );\n    })\n    .join(' ')\n    .trim();\n\n/**\n * Check if a component has an accessibility prop\n *\n * @param {object} props\n * @returns {boolean} Whether the component has an accessibility prop\n */\nexport const hasA11yProp = (props: Record<string, any>) => {\n  for (const prop in props) {\n    if (prop.startsWith('aria-') || prop === 'role' || prop === 'title') {\n      return true;\n    }\n  }\n};\n","export default {\n  xmlns: 'http://www.w3.org/2000/svg',\n  width: 24,\n  height: 24,\n  viewBox: '0 0 24 24',\n  fill: 'none',\n  stroke: 'currentColor',\n  strokeWidth: 2,\n  strokeLinecap: 'round',\n  strokeLinejoin: 'round',\n};\n","import { createElement, forwardRef } from 'react';\nimport defaultAttributes from './defaultAttributes';\nimport { IconNode, LucideProps } from './types';\nimport { mergeClasses, hasA11yProp } from '@lucide/shared';\n\ninterface IconComponentProps extends LucideProps {\n  iconNode: IconNode;\n}\n\n/**\n * Lucide icon component\n *\n * @component Icon\n * @param {object} props\n * @param {string} props.color - The color of the icon\n * @param {number} props.size - The size of the icon\n * @param {number} props.strokeWidth - The stroke width of the icon\n * @param {boolean} props.absoluteStrokeWidth - Whether to use absolute stroke width\n * @param {string} props.className - The class name of the icon\n * @param {IconNode} props.children - The children of the icon\n * @param {IconNode} props.iconNode - The icon node of the icon\n *\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst Icon = forwardRef<SVGSVGElement, IconComponentProps>(\n  (\n    {\n      color = 'currentColor',\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = '',\n      children,\n      iconNode,\n      ...rest\n    },\n    ref,\n  ) => {\n    return createElement(\n      'svg',\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? (Number(strokeWidth) * 24) / Number(size) : strokeWidth,\n        className: mergeClasses('lucide', className),\n        ...(!children && !hasA11yProp(rest) && { 'aria-hidden': 'true' }),\n        ...rest,\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]),\n      ],\n    );\n  },\n);\n\nexport default Icon;\n","import { createElement, forwardRef } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from '@lucide/shared';\nimport { IconNode, LucideProps } from './types';\nimport Icon from './Icon';\n\n/**\n * Create a Lucide icon component\n * @param {string} iconName\n * @param {array} iconNode\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst createLucideIcon = (iconName: string, iconNode: IconNode) => {\n  const Component = forwardRef<SVGSVGElement, LucideProps>(({ className, ...props }, ref) =>\n    createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className,\n      ),\n      ...props,\n    }),\n  );\n\n  Component.displayName = toPascalCase(iconName);\n\n  return Component;\n};\n\nexport default createLucideIcon;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['polyline', { points: '17 8 12 3 7 8', key: 't8dd8p' }],\n  ['line', { x1: '12', x2: '12', y1: '3', y2: '15', key: 'widbto' }],\n];\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNyA4IDEyIDMgNyA4IiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMyIgeTI9IjE1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('upload', __iconNode);\n\nexport default Upload;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['path', { d: 'm21 21-4.3-4.3', key: '1qie3q' }],\n];\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('search', __iconNode);\n\nexport default Search;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8', key: 'v9h5vc' }],\n  ['path', { d: 'M21 3v5h-5', key: '1q7to0' }],\n  ['path', { d: 'M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16', key: '3uifl3' }],\n  ['path', { d: 'M8 16H3v5', key: '1cv678' }],\n];\n\n/**\n * @component @name RefreshCw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAwIDEgOS05IDkuNzUgOS43NSAwIDAgMSA2Ljc0IDIuNzRMMjEgOCIgLz4KICA8cGF0aCBkPSJNMjEgM3Y1aC01IiAvPgogIDxwYXRoIGQ9Ik0yMSAxMmE5IDkgMCAwIDEtOSA5IDkuNzUgOS43NSAwIDAgMS02Ljc0LTIuNzRMMyAxNiIgLz4KICA8cGF0aCBkPSJNOCAxNkgzdjUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/refresh-cw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RefreshCw = createLucideIcon('refresh-cw', __iconNode);\n\nexport default RefreshCw;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18 6 6 18', key: '1bl5f8' }],\n  ['path', { d: 'm6 6 12 12', key: 'd8bk6v' }],\n];\n\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst X = createLucideIcon('x', __iconNode);\n\nexport default X;\n","// Hr_ManpowerList.jsx\r\n// This is your updated React component with fixed layout, horizontal pagination, and visible controls\r\n\r\nimport React, { useState, useMemo, useRef, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport { Search, Filter, Download, Upload, Plus, RefreshCw, X } from 'lucide-react';\r\nimport api from '../../api/axiosInstance';\r\nimport Papa from 'papaparse';\r\nimport '../style/hr_style/Hr_ManpowerList.css';\r\n// Nav icons\r\nimport {\r\n  FaTachometerAlt,\r\n  FaComments,\r\n  FaUsers,\r\n  FaExchangeAlt,\r\n  FaProjectDiagram,\r\n  FaClipboardList,\r\n  FaChartBar,\r\n  FaCalendarAlt,\r\n  FaArrowRight,\r\n  FaUserPlus,\r\n  FaUserCheck,\r\n  FaUserClock,\r\n  FaExclamationTriangle,\r\n  FaSync,\r\n  FaProjectDiagram as FaReassign\r\n} from 'react-icons/fa';\r\n\r\nconst ITEMS_PER_PAGE = 10;\r\n\r\nfunction ManpowerRow({ manpower, onReassignClick, onEditClick }) {\r\n  const isOnLoan = manpower.currentLoan && manpower.currentLoan.returnDate && new Date(manpower.currentLoan.returnDate) > new Date();\r\n  const locationDisplay = typeof manpower.location === 'string' ? manpower.location : (manpower.location && manpower.location.name ? manpower.location.name : '');\r\n  return (\r\n    <tr className=\"mp-row\">\r\n      <td className=\"col-emp\">\r\n        <div className=\"emp-name\">{manpower.name}</div>\r\n        <div className=\"emp-pos\">{manpower.position}</div>\r\n      </td>\r\n      <td className=\"col-project\">\r\n        {isOnLoan ? (\r\n          <div className=\"loan-wrapper\">\r\n            <span className=\"loan-project\">{manpower.currentLoan.projectName}</span>\r\n            <span className=\"loan-until\">Until {new Date(manpower.currentLoan.returnDate).toLocaleDateString()}</span>\r\n          </div>\r\n        ) : manpower.project ? (\r\n          <div className=\"project-wrapper\">\r\n            <Link\r\n              to={`/hr/project-records/${manpower.assignedProject?._id || manpower.assignedProject || ''}`}\r\n              className=\"project-name project-link\"\r\n              onClick={e => { if(!manpower.assignedProject) e.preventDefault(); }}\r\n            >{manpower.project}</Link>\r\n            {locationDisplay && <span className=\"project-location\">{locationDisplay}</span>}\r\n          </div>\r\n        ) : (\r\n          <span className=\"project-name unassigned\">Unassigned</span>\r\n        )}\r\n      </td>\r\n      <td className=\"col-actions\">\r\n        <div className=\"manpower-actions\">\r\n          <button className=\"action-btn reassign-btn\" title=\"Reassign to Project\" onClick={() => onReassignClick(manpower)} disabled={isOnLoan}>\r\n            <FaReassign />\r\n          </button>\r\n          <button className=\"action-btn edit-btn\" title=\"Edit Manpower\" onClick={() => onEditClick(manpower)}>\r\n            <FaUserPlus />\r\n          </button>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nfunction Pagination({ currentPage, totalPages, totalEntries, onPageChange, showingRange }) {\r\n  const visiblePages = [];\r\n  if (totalPages <= 7) {\r\n    for (let i = 1; i <= totalPages; i++) visiblePages.push(i);\r\n  } else {\r\n    visiblePages.push(1);\r\n    if (currentPage > 3) visiblePages.push('...');\r\n    const start = Math.max(2, currentPage - 1);\r\n    const end = Math.min(totalPages - 1, currentPage + 1);\r\n    for (let i = start; i <= end; i++) visiblePages.push(i);\r\n    if (currentPage < totalPages - 2) visiblePages.push('...');\r\n    visiblePages.push(totalPages);\r\n  }\r\n\r\n  return (\r\n    <div className=\"pagination-wrapper\">\r\n      <span className=\"pagination-info\">\r\n        Showing {showingRange.start} to {showingRange.end} of {totalEntries} entries\r\n      </span>\r\n      <div className=\"pagination\">\r\n        <button \r\n          className=\"pagination-btn\" \r\n          onClick={() => onPageChange(currentPage - 1)} \r\n          disabled={currentPage === 1}\r\n        >\r\n          &lt;\r\n        </button>\r\n        {visiblePages.map((page, index) => (\r\n          <button\r\n            key={index}\r\n            className={`pagination-btn ${page === currentPage ? 'active' : ''} ${page === '...' ? 'dots' : ''}`}\r\n            disabled={page === '...'}\r\n            onClick={() => typeof page === 'number' && onPageChange(page)}\r\n          >\r\n            {page}\r\n          </button>\r\n        ))}\r\n        <button \r\n          className=\"pagination-btn\" \r\n          onClick={() => onPageChange(currentPage + 1)} \r\n          disabled={currentPage === totalPages}\r\n        >\r\n          &gt;\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function HrManpowerList() {\r\n  const [manpowers, setManpowers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  // Removed status filter (UI shows no status column)\r\n  const [positionFilter, setPositionFilter] = useState('all');\r\n  // Assignment sort: none | assignedFirst | unassignedFirst\r\n  const [assignmentSort, setAssignmentSort] = useState('none');\r\n  // Removed local header collapse/profile state (handled by AppHeader)\r\n  const [reassignModalOpen, setReassignModalOpen] = useState(false);\r\n  const [selectedManpower, setSelectedManpower] = useState(null);\r\n  const [editingManpower, setEditingManpower] = useState(null);\r\n  const [editForm, setEditForm] = useState({ name:'', position:'' });\r\n  const [savingEdit, setSavingEdit] = useState(false);\r\n  const [projects, setProjects] = useState([]);\r\n  const [reassigning, setReassigning] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  // User state\r\n  const [user, setUser] = useState(() => {\r\n    const stored = localStorage.getItem('user');\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n  const [token, setToken] = useState(() => localStorage.getItem('token') || \"\");\r\n  const [userId, setUserId] = useState(() => user?._id);\r\n  const [userName, setUserName] = useState(user?.name || 'HR Manager');\r\n  const [userRole, setUserRole] = useState(user?.role || '');\r\n\r\n  // Listen for storage changes\r\n  useEffect(() => {\r\n    const handleUserChange = () => {\r\n      const stored = localStorage.getItem('user');\r\n      setUser(stored ? JSON.parse(stored) : null);\r\n      setUserId(stored ? JSON.parse(stored)._id : undefined);\r\n      setToken(localStorage.getItem('token') || \"\");\r\n    };\r\n    window.addEventListener(\"storage\", handleUserChange);\r\n    return () => window.removeEventListener(\"storage\", handleUserChange);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setUserName(user?.name || 'HR Manager');\r\n    setUserRole(user?.role || '');\r\n  }, [user]);\r\n\r\n  // Redirect to login if not logged in\r\n  useEffect(() => {\r\n    if (!token || !userId) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n  }, [token, userId, navigate]);\r\n\r\n  // Removed scroll collapse effect\r\n\r\n  // Fetch manpower data with loan information\r\n  useEffect(() => {\r\n    const fetchManpower = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Fetch manpower data\r\n        const { data: manpowerData } = await api.get('/manpower', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n\r\n        // Fetch active loan requests\r\n        const { data: loanRequests } = await api.get('/manpower-requests', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n\r\n        // Process manpower data with loan information\r\n        const processedManpower = manpowerData.map(manpower => {\r\n          // Find active loan for this manpower\r\n          const activeLoan = loanRequests.find(loan => \r\n            loan.manpowerProvided && \r\n            loan.manpowerProvided.includes(manpower._id) &&\r\n            loan.returnDate && \r\n            new Date(loan.returnDate) > new Date() &&\r\n            loan.status === 'Approved'\r\n          );\r\n\r\n          return {\r\n            ...manpower,\r\n            currentLoan: activeLoan ? {\r\n              projectName: activeLoan.project?.projectName || 'Unknown Project',\r\n              returnDate: activeLoan.returnDate,\r\n              requestId: activeLoan._id\r\n            } : null\r\n          };\r\n        });\r\n\r\n  // assignedProject presence (non-null) now drives Assigned/Unassigned logic on UI\r\n  setManpowers(processedManpower);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Error fetching manpower:', err);\r\n        setError('Failed to load manpower data');\r\n        setManpowers([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (token) {\r\n      fetchManpower();\r\n    }\r\n  }, [token]);\r\n\r\n  // Fetch projects for reassignment\r\n  useEffect(() => {\r\n    const fetchProjects = async () => {\r\n      try {\r\n        const { data } = await api.get('/projects', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        setProjects(data);\r\n      } catch (err) {\r\n        console.error('Error fetching projects:', err);\r\n      }\r\n    };\r\n\r\n    if (token) {\r\n      fetchProjects();\r\n    }\r\n  }, [token]);\r\n\r\n  // Handle reassign modal open\r\n  const handleReassignClick = (manpower) => {\r\n    setSelectedManpower(manpower);\r\n    setReassignModalOpen(true);\r\n  };\r\n\r\n  // Open edit modal\r\n  useEffect(() => {\r\n    if (editingManpower) {\r\n      setEditForm({\r\n        name: editingManpower.name || '',\r\n        position: editingManpower.position || ''\r\n      });\r\n    }\r\n  }, [editingManpower]);\r\n\r\n  const handleEditChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setEditForm(f => ({ ...f, [name]: value }));\r\n  };\r\n\r\n  const saveEdit = async () => {\r\n    if (!editingManpower) return;\r\n    if (!editForm.name.trim() || !editForm.position.trim()) {\r\n      alert('Name and Position are required');\r\n      return;\r\n    }\r\n    setSavingEdit(true);\r\n    try {\r\n      await api.put(`/manpower/${editingManpower._id}`, {\r\n        name: editForm.name.trim(),\r\n        position: editForm.position.trim()\r\n      }, { headers: { Authorization: `Bearer ${token}` } });\r\n      // Refresh list quickly in memory\r\n      setManpowers(prev => prev.map(mp => mp._id === editingManpower._id ? { ...mp, ...editForm } : mp));\r\n      setEditingManpower(null);\r\n    } catch (err) {\r\n      console.error('Edit manpower failed:', err);\r\n      alert('Failed to save changes');\r\n    } finally {\r\n      setSavingEdit(false);\r\n    }\r\n  };\r\n\r\n  // Handle reassign manpower\r\n  const handleReassign = async (newProjectId) => {\r\n    if (!selectedManpower || !newProjectId) return;\r\n\r\n    setReassigning(true);\r\n    try {\r\n      // Update manpower assignment\r\n      await api.put(`/manpower/${selectedManpower._id}`, {\r\n        assignedProject: newProjectId === 'unassign' ? null : newProjectId\r\n      }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      // Log the reassignment action\r\n      const selectedProject = projects.find(p => p._id === newProjectId);\r\n      await api.post('/audit-logs', {\r\n        action: 'MANPOWER_REASSIGNED',\r\n        performedBy: userId,\r\n        performedByRole: userRole,\r\n        description: `Reassigned ${selectedManpower.name} ${newProjectId === 'unassign' ? 'to unassigned' : `to ${selectedProject?.projectName || 'unknown project'}`}`,\r\n        meta: {\r\n          manpowerId: selectedManpower._id,\r\n          manpowerName: selectedManpower.name,\r\n          previousProject: selectedManpower.assignedProject,\r\n          newProject: newProjectId === 'unassign' ? null : newProjectId\r\n        }\r\n      }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      // Refresh manpower data\r\n      const refreshManpower = async () => {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          const { data: manpowerData } = await api.get('/manpower', {\r\n            headers: { Authorization: `Bearer ${token}` }\r\n          });\r\n\r\n          const { data: loanRequests } = await api.get('/manpower-requests', {\r\n            headers: { Authorization: `Bearer ${token}` }\r\n          });\r\n\r\n          const processedManpower = manpowerData.map(manpower => {\r\n            const activeLoan = loanRequests.find(loan => \r\n              loan.manpowerProvided && \r\n              loan.manpowerProvided.includes(manpower._id) &&\r\n              loan.returnDate && \r\n              new Date(loan.returnDate) > new Date() &&\r\n              loan.status === 'Approved'\r\n            );\r\n\r\n            return {\r\n              ...manpower,\r\n              currentLoan: activeLoan ? {\r\n                projectName: activeLoan.project?.projectName || 'Unknown Project',\r\n                returnDate: activeLoan.returnDate,\r\n                requestId: activeLoan._id\r\n              } : null\r\n            };\r\n          });\r\n\r\n          setManpowers(processedManpower);\r\n          setError(null);\r\n        } catch (err) {\r\n          console.error('Error fetching manpower:', err);\r\n          setError('Failed to load manpower data');\r\n          setManpowers([]);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      await refreshManpower();\r\n      setReassignModalOpen(false);\r\n      setSelectedManpower(null);\r\n    } catch (err) {\r\n      console.error('Error reassigning manpower:', err);\r\n      alert('Failed to reassign manpower. Please try again.');\r\n    } finally {\r\n      setReassigning(false);\r\n    }\r\n  };\r\n\r\n  // Filtered and paginated data\r\n  const filteredManpowers = useMemo(() => {\r\n    let filtered = manpowers;\r\n\r\n    // Search filter\r\n    if (searchTerm) {\r\n      filtered = filtered.filter(mp => \r\n        mp.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        mp.position?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        mp.employeeId?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        mp.project?.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Position filter\r\n    if (positionFilter !== 'all') {\r\n      filtered = filtered.filter(mp => mp.position?.toLowerCase() === positionFilter.toLowerCase());\r\n    }\r\n\r\n    // Assignment sort (pure sort, does not filter)\r\n    if (assignmentSort !== 'none') {\r\n      filtered = [...filtered].sort((a, b) => {\r\n        const aAssigned = !!a.assignedProject;\r\n        const bAssigned = !!b.assignedProject;\r\n        if (assignmentSort === 'assignedFirst') {\r\n          // Return assigned before unassigned\r\n            if (aAssigned === bAssigned) return 0;\r\n            return aAssigned ? -1 : 1;\r\n        } else if (assignmentSort === 'unassignedFirst') {\r\n            if (aAssigned === bAssigned) return 0;\r\n            return aAssigned ? 1 : -1;\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [manpowers, searchTerm, positionFilter, assignmentSort]);\r\n\r\n  const totalPages = Math.ceil(filteredManpowers.length / ITEMS_PER_PAGE);\r\n  const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;\r\n  const endIndex = startIndex + ITEMS_PER_PAGE;\r\n  const currentManpowers = filteredManpowers.slice(startIndex, endIndex);\r\n\r\n  const showingRange = {\r\n    start: filteredManpowers.length > 0 ? startIndex + 1 : 0,\r\n    end: Math.min(endIndex, filteredManpowers.length)\r\n  };\r\n\r\n  // Get unique positions for filter\r\n  const uniquePositions = useMemo(() => {\r\n    const positions = [...new Set(manpowers.map(mp => mp.position).filter(Boolean))];\r\n    return positions.sort();\r\n  }, [manpowers]);\r\n\r\n  // Get status counts\r\n  const statusCounts = useMemo(() => {\r\n    const counts = { assigned: 0, unassigned: 0, total: manpowers.length };\r\n    manpowers.forEach(mp => {\r\n      if (mp.assignedProject) counts.assigned++; else counts.unassigned++;\r\n    });\r\n    return counts;\r\n  }, [manpowers]);\r\n\r\n  // Removed enrichment & fallback logic per request (project must come from backend directly)\r\n\r\n  // Handle page change\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  // Handle CSV upload\r\n  const handleCSVUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      Papa.parse(file, {\r\n        header: true,\r\n        skipEmptyLines: true,\r\n        complete: async function(results) {\r\n          const parsedData = results.data;\r\n          const errors = results.errors;\r\n\r\n          if (errors.length > 0) {\r\n            alert(`CSV Upload Error: ${errors[0].message}`);\r\n            return;\r\n          }\r\n\r\n          if (parsedData.length === 0) {\r\n            alert('No data found in CSV file.');\r\n            return;\r\n          }\r\n\r\n          const newManpowers = [];\r\n          const invalidRows = [];\r\n\r\n          parsedData.forEach(row => {\r\n            const name = row['Name'] || row['name'] || '';\r\n            const position = row['Position'] || row['position'] || '';\r\n            const status = row['Status'] || row['status'] || 'Active';\r\n            const project = row['Project'] || row['project'] || '';\r\n\r\n            if (!name || !position) {\r\n              invalidRows.push(row);\r\n              return;\r\n            }\r\n\r\n            newManpowers.push({\r\n              name: name,\r\n              position: position,\r\n              status: status,\r\n              project: project,\r\n              location: '', // Default to empty for now\r\n              employeeId: '', // Default to empty for now\r\n              assignedProject: project, // Assign project as default\r\n              currentLoan: null, // No loan information for new manpowers\r\n            });\r\n          });\r\n\r\n          if (invalidRows.length > 0) {\r\n            alert(`Skipped ${invalidRows.length} rows due to missing 'Name' or 'Position':\\n${invalidRows.map(row => JSON.stringify(row)).join('\\n')}`);\r\n          }\r\n\r\n          if (newManpowers.length > 0) {\r\n            setLoading(true);\r\n            setError(null);\r\n            try {\r\n              // Create manpower entries individually\r\n              const createdManpowers = [];\r\n              for (const mp of newManpowers) {\r\n                const { data } = await api.post('/manpower', {\r\n                  name: mp.name,\r\n                  position: mp.position,\r\n                  status: mp.status || 'Active',\r\n                  assignedProject: null // Will be handled separately if project assignment is needed\r\n                }, {\r\n                  headers: { Authorization: `Bearer ${token}` }\r\n                });\r\n                createdManpowers.push(data);\r\n              }\r\n              \r\n              alert(`Successfully imported ${createdManpowers.length} manpowers.`);\r\n              window.location.reload(); // Refresh the page to show updated data\r\n            } catch (err) {\r\n              console.error('Error importing manpowers:', err);\r\n              setError('Failed to import manpowers. Please try again.');\r\n            } finally {\r\n              setLoading(false);\r\n            }\r\n          } else {\r\n            alert('No valid manpower data found in CSV file.');\r\n          }\r\n        },\r\n        error: function(err) {\r\n          console.error('CSV Parsing Error:', err);\r\n          alert('Error parsing CSV file. Please ensure it is a valid CSV and try again.');\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  // Handle logout\r\n  const handleLogout = () => {\r\n    api.post('/auth/logout', {}, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    }).finally(() => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n      setUser(null);\r\n      setUserId(undefined);\r\n      setToken(\"\");\r\n      window.dispatchEvent(new Event('storage'));\r\n    navigate('/');\r\n    });\r\n  };\r\n\r\n  // Removed legacy profile menu outside click\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <AppHeader\r\n        roleSegment=\"hr\"\r\n        onLogout={handleLogout}\r\n        overrideNav={[\r\n          { to:'/hr/dash', label:'Dashboard', icon:<FaTachometerAlt/>, match:'/hr/dash' },\r\n          { to:'/hr/chat', label:'Chat', icon:<FaComments/>, match:'/hr/chat' },\r\n          { to:'/hr/mlist', label:'Manpower', icon:<FaUsers/>, match:'/hr/mlist' },\r\n          { to:'/hr/movement', label:'Movement', icon:<FaExchangeAlt/>, match:'/hr/movement' },\r\n          { to:'/hr/project-records', label:'Projects', icon:<FaProjectDiagram/>, match:'/hr/project-records' },\r\n          { to:'/hr/attendance', label:'Attendance', icon:<FaCalendarAlt/>, match:'/hr/attendance' }\r\n        ]}\r\n      />\r\n\r\n      {/* Main Content */}\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"manpower-container\">\r\n          {/* Page Header */}\r\n          <div className=\"page-header\">\r\n            <div className=\"page-title-section\">\r\n              <h1 className=\"page-title\">Manpower Management</h1>\r\n              <p className=\"page-subtitle\">Manage and track all staff members across projects</p>\r\n            </div>\r\n                         <div className=\"page-actions\">\r\n               <button className=\"action-button secondary\" onClick={() => fileInputRef.current?.click()}>\r\n                 <Upload />\r\n                 <span>Import CSV</span>\r\n               </button>\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\".csv\"\r\n                onChange={handleCSVUpload}\r\n                style={{ display: 'none' }}\r\n              />\r\n              <button \r\n                className=\"action-button info\" \r\n                onClick={() => alert('CSV Format:\\n\\nRequired columns:\\n- Name (required)\\n- Position (required)\\n\\nOptional columns:\\n- Status (defaults to \"Active\" if empty)\\n- Project (defaults to \"Unassigned\" if empty)\\n\\nExample:\\nName,Position,Status,Project\\nJohn Doe,Engineer,Active,Project A\\nJane Smith,Manager,,Project B')}\r\n                style={{ marginLeft: '10px', backgroundColor: '#17a2b8', borderColor: '#17a2b8' }}\r\n              >\r\n                <span>CSV Format</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n                    {/* Stats Overview */}\r\n          <div className=\"stats-overview\">\r\n            <div className=\"stat-card total\">\r\n              <div className=\"stat-icon\">\r\n                <FaUsers />\r\n              </div>\r\n              <div className=\"stat-content\">\r\n                <span className=\"stat-value\">{statusCounts.total}</span>\r\n                <span className=\"stat-label\">Total Manpower</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"stat-card active\">\r\n              <div className=\"stat-icon\">\r\n                <FaUserCheck />\r\n              </div>\r\n              <div className=\"stat-content\">\r\n                <span className=\"stat-value\">{statusCounts.assigned}</span>\r\n                <span className=\"stat-label\">Assigned</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"stat-card inactive\">\r\n              <div className=\"stat-icon\">\r\n                <FaUserClock />\r\n              </div>\r\n              <div className=\"stat-content\">\r\n                <span className=\"stat-value\">{statusCounts.unassigned}</span>\r\n                <span className=\"stat-label\">Unassigned</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Filters and Search */}\r\n          <div className=\"filters-section\">\r\n            <div className=\"search-box\">\r\n              <Search className=\"search-icon\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search by name, position, ID, or project...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"search-input\"\r\n              />\r\n            </div>\r\n            <div className=\"filter-controls\">\r\n              {/* Status filter removed */}\r\n              <select\r\n                value={positionFilter}\r\n                onChange={(e) => setPositionFilter(e.target.value)}\r\n                className=\"filter-select\"\r\n              >\r\n                <option value=\"all\">All Positions</option>\r\n                {uniquePositions.map(position => (\r\n                  <option key={position} value={position}>{position}</option>\r\n                ))}\r\n              </select>\r\n              <select\r\n                value={assignmentSort}\r\n                onChange={(e) => setAssignmentSort(e.target.value)}\r\n                className=\"filter-select\"\r\n                style={{ minWidth:'150px' }}\r\n              >\r\n                <option value=\"none\">No Sort</option>\r\n                <option value=\"assignedFirst\">Assigned First</option>\r\n                <option value=\"unassignedFirst\">Unassigned First</option>\r\n              </select>\r\n              <button className=\"refresh-btn\" onClick={() => window.location.reload()}>\r\n                <RefreshCw />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Manpower List */}\r\n          <div className=\"manpower-list-container\">\r\n            {loading ? (\r\n              <div className=\"loading-state\">\r\n                <div className=\"loading-spinner\"></div>\r\n                <span>Loading manpower data...</span>\r\n              </div>\r\n            ) : error ? (\r\n              <div className=\"error-state\">\r\n                <FaExclamationTriangle />\r\n                <span>{error}</span>\r\n              </div>\r\n            ) : currentManpowers.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                <FaUsers />\r\n                <span>No manpower found matching your criteria</span>\r\n                </div>\r\n              ) : (\r\n              <>\r\n                <div className=\"manpower-table-wrapper\">\r\n                  <table className=\"manpower-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Employee</th>\r\n                        <th>Project / Loan</th>\r\n                        <th style={{textAlign:'center'}}>Actions</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {currentManpowers.map(mp => (\r\n                        <ManpowerRow key={mp._id} manpower={mp} onReassignClick={handleReassignClick} onEditClick={setEditingManpower} />\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n            <Pagination\r\n              currentPage={currentPage}\r\n              totalPages={totalPages}\r\n                  totalEntries={filteredManpowers.length}\r\n              onPageChange={handlePageChange}\r\n                  showingRange={showingRange}\r\n            />\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      {/* Reassign Modal */}\r\n      {reassignModalOpen && selectedManpower && (\r\n        <div className=\"reassign-modal-overlay\" onClick={() => setReassignModalOpen(false)}>\r\n          <div className=\"reassign-modal\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"reassign-modal-header\">\r\n              <h3>Reassign {selectedManpower.name}</h3>\r\n              <button \r\n                className=\"reassign-modal-close\" \r\n                onClick={() => setReassignModalOpen(false)}\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"reassign-modal-content\">\r\n              <div className=\"current-assignment\">\r\n                <h4>Current Assignment:</h4>\r\n                <p>{selectedManpower.project || 'Unassigned'}</p>\r\n                {(() => { const loc = selectedManpower.location; const disp = typeof loc === 'string' ? loc : (loc && loc.name ? loc.name : ''); return disp ? <p className=\"location\">Location: {disp}</p> : null; })()}\r\n              </div>\r\n\r\n              <div className=\"new-assignment\">\r\n                <h4>Select New Project:</h4>\r\n                <div className=\"project-options\">\r\n                  <button \r\n                    className=\"project-option unassign\"\r\n                    onClick={() => handleReassign('unassign')}\r\n                    disabled={reassigning}\r\n                  >\r\n                    <div className=\"project-info\">\r\n                      <span className=\"project-name\">Unassign</span>\r\n                      <span className=\"project-description\">Remove from current project</span>\r\n                    </div>\r\n                  </button>\r\n                  \r\n                  {projects.map(project => (\r\n                    <button\r\n                      key={project._id}\r\n                      className={`project-option ${selectedManpower.assignedProject === project._id ? 'current' : ''}`}\r\n                      onClick={() => handleReassign(project._id)}\r\n                      disabled={reassigning || selectedManpower.assignedProject === project._id}\r\n                    >\r\n                      <div className=\"project-info\">\r\n                        <span className=\"project-name\">{project.projectName}</span>\r\n                        <span className=\"project-description\">{ (typeof project.location === 'string' ? project.location : (project.location && project.location.name ? project.location.name : 'No location specified')) || 'No location specified'}</span>\r\n                        {selectedManpower.assignedProject === project._id && (\r\n                          <span className=\"current-badge\">Current</span>\r\n                        )}\r\n                      </div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {reassigning && (\r\n                <div className=\"reassigning-indicator\">\r\n                  <div className=\"loading-spinner\"></div>\r\n                  <span>Reassigning...</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Edit Manpower Modal */}\r\n      {editingManpower && (\r\n        <div className=\"reassign-modal-overlay\" onClick={() => !savingEdit && setEditingManpower(null)}>\r\n          <div className=\"reassign-modal\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"reassign-modal-header\">\r\n              <h3>Edit {editingManpower.name}</h3>\r\n              <button className=\"reassign-modal-close\" onClick={() => !savingEdit && setEditingManpower(null)}>\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n            <div className=\"reassign-modal-content\">\r\n              <div className=\"current-assignment\" style={{ marginBottom:'1rem' }}>\r\n                <h4>Details</h4>\r\n                <div className=\"edit-field-group\">\r\n                  <label>Name</label>\r\n                  <input name=\"name\" value={editForm.name} onChange={handleEditChange} />\r\n                </div>\r\n                <div className=\"edit-field-group\">\r\n                  <label>Position</label>\r\n                  <input name=\"position\" value={editForm.position} onChange={handleEditChange} />\r\n                </div>\r\n              </div>\r\n              <div style={{ display:'flex', gap:'0.75rem', justifyContent:'flex-end' }}>\r\n                <button className=\"action-button secondary\" disabled={savingEdit} onClick={() => setEditingManpower(null)}>Cancel</button>\r\n                <button className=\"action-button primary\" disabled={savingEdit} onClick={saveEdit}>{savingEdit ? 'Saving...' : 'Save Changes'}</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ProjectView from '../project/ProjectView';\r\nimport { useParams } from 'react-router-dom';\r\n\r\n// HR wrapper ensuring the unified HR AppHeader is used (same header as other HR pages)\r\nexport default function HrViewProject(){\r\n\tconst { id } = useParams();\r\n\tconst overrides = {\r\n\t\t'View Project': `/hr/project-records/${id}`,\r\n\t\t'Reports': `/hr/progress-report/${id}`\r\n\t};\r\n\treturn (\r\n\t\t<ProjectView\r\n\t\t\trole=\"hr\"\r\n\t\t\tnavPathOverrides={overrides}\r\n\t\t\tuseUnifiedHeader\r\n\t\t/>\r\n\t);\r\n}\r\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport '../style/ceo_style/Ceo_Dash.css';\r\nimport '../style/ceo_style/Ceo_ManpowerRequest.css';\r\nimport api from '../../api/axiosInstance';\r\nimport { FaSearch, FaDownload } from 'react-icons/fa';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport { exportManpowerRequestsPdf } from '../../utils/manpowerRequestsPdf';\r\n\r\nconst ITEMS_PER_PAGE = 8;\r\n\r\nconst HrManpowerRequestList = () => {\r\n  const navigate = useNavigate();\r\n  const userRef = useRef(null);\r\n  if (userRef.current === null) {\r\n    const stored = localStorage.getItem('user');\r\n    userRef.current = stored ? JSON.parse(stored) : null;\r\n  }\r\n  const user = userRef.current;\r\n\r\n  const [requests, setRequests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [status, setStatus] = useState('All');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [layoutView, setLayoutView] = useState('cards');\r\n  const [viewMode, setViewMode] = useState('mine'); // 'mine' or 'others'\r\n  const [exporting, setExporting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!user || user.role !== 'HR') return;\r\n    let active = true;\r\n    const fetchAll = async () => {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        if (viewMode === 'mine') {\r\n          const { data } = await api.get('/manpower-requests/mine');\r\n          if (!active) return;\r\n          setRequests(Array.isArray(data) ? data : []);\r\n        } else {\r\n          const { data } = await api.get('/manpower-requests/hr');\r\n          if (!active) return;\r\n          const arr = Array.isArray(data) ? data : [];\r\n          // For HR users, filter out completed requests from \"Others' Requests\"\r\n          const othersOnly = arr.filter(r => {\r\n            const creatorId = r.createdBy?._id || r.createdBy?.id || r.createdBy;\r\n            const isCompleted = r.status?.toLowerCase() === 'completed';\r\n            const isOverdue = r.status?.toLowerCase() === 'pending' && r.acquisitionDate && new Date(r.acquisitionDate) < new Date();\r\n            // Show overdue requests to other HR users, but hide completed ones\r\n            return !user._id || (creatorId && creatorId !== user._id && !isCompleted);\r\n          });\r\n          setRequests(othersOnly);\r\n        }\r\n      } catch (err) {\r\n        if (!active) return;\r\n        console.error('Failed to load manpower requests:', err);\r\n        if (err.response && (err.response.status === 401 || err.response.status === 403)) {\r\n          setError('Session expired or unauthorized. Please login.');\r\n        } else {\r\n          setError('Failed to load manpower requests');\r\n        }\r\n      } finally {\r\n        if (active) {\r\n          setLoading(false);\r\n          setCurrentPage(1);\r\n        }\r\n      }\r\n    };\r\n    fetchAll();\r\n    return () => { active = false; };\r\n  }, [user, viewMode]);\r\n\r\n  const filteredRequests = useMemo(() => {\r\n    let items = requests;\r\n    if (status !== 'All') {\r\n      if (status === 'Archived') {\r\n        items = items.filter(r => (r.status || 'Pending').toLowerCase().includes('archived'));\r\n      } else {\r\n        items = items.filter(r => (r.status || 'Pending').toLowerCase().includes(status.toLowerCase()));\r\n      }\r\n    } else {\r\n      // For 'All' filter, exclude archived items by default\r\n      items = items.filter(r => !(r.status || 'Pending').toLowerCase().includes('archived'));\r\n    }\r\n    if (searchTerm) {\r\n      const s = searchTerm.toLowerCase();\r\n      items = items.filter(r => {\r\n        const proj = r.project?.projectName || '';\r\n        const by = r.createdBy?.name || '';\r\n        const summary = (r.manpowers || []).map(m => `${m.quantity} ${m.type}`).join(', ');\r\n        return proj.toLowerCase().includes(s) || by.toLowerCase().includes(s) || summary.toLowerCase().includes(s) || (r.description || '').toLowerCase().includes(s);\r\n      });\r\n    }\r\n    return items;\r\n  }, [requests, status, searchTerm]);\r\n\r\n  // Export function\r\n  const handleExportPdf = async () => {\r\n    try {\r\n      setExporting(true);\r\n      await exportManpowerRequestsPdf(filteredRequests, {\r\n        companyName: 'FadzTrack',\r\n        logoPath: `${process.env.PUBLIC_URL || ''}/images/Fadz-logo.png`,\r\n        exporterName: user?.name || 'Unknown',\r\n        exporterRole: user?.role || '',\r\n        filters: { status, searchTerm },\r\n      });\r\n    } catch (error) {\r\n      console.error('Export failed:', error);\r\n      alert('Failed to export PDF');\r\n    } finally {\r\n      setExporting(false);\r\n    }\r\n  };\r\n\r\n  const totalPages = Math.max(1, Math.ceil(filteredRequests.length / ITEMS_PER_PAGE));\r\n  const pageRows = useMemo(() => {\r\n    const start = (currentPage - 1) * ITEMS_PER_PAGE;\r\n    return filteredRequests.slice(start, start + ITEMS_PER_PAGE);\r\n  }, [filteredRequests, currentPage]);\r\n\r\n  const getRequestBackgroundColor = (request) => {\r\n    const statusLower = request.status?.toLowerCase() || '';\r\n    if (statusLower.includes('pending') && request.acquisitionDate && new Date(request.acquisitionDate) < new Date()) {\r\n      return '#fef3c7';\r\n    }\r\n    if (statusLower.includes('pending')) return '#ffffff';\r\n    if (statusLower.includes('approved')) return '#fef3c7';\r\n    if (statusLower.includes('rejected') || statusLower.includes('cancel') || statusLower.includes('denied')) return '#fef2f2';\r\n    if (statusLower.includes('completed')) return '#ecfdf5';\r\n    return '#f9fafb';\r\n  };\r\n\r\n  const getStatusBadge = (request) => {\r\n    const s = (request.status || 'Pending').toLowerCase();\r\n    const isOverdue = s === 'pending' && request.acquisitionDate && new Date(request.acquisitionDate) < new Date();\r\n    if (isOverdue) return 'Overdue';\r\n    if (s.includes('archived')) return 'Archived';\r\n    if (s.includes('completed')) return 'Completed';\r\n    if (s.includes('approved')) return 'Approved';\r\n    if (s.includes('pending')) return 'Pending';\r\n    if (s.includes('reject') || s.includes('denied') || s.includes('cancel')) return 'Rejected';\r\n    if (s.includes('overdue')) return 'Overdue';\r\n    return 'Unknown';\r\n  };\r\n\r\n  const getStatusColor = (request) => {\r\n    const s = (request.status || 'Pending').toLowerCase();\r\n    const isOverdue = s === 'pending' && request.acquisitionDate && new Date(request.acquisitionDate) < new Date();\r\n    if (isOverdue) return '#d97706';\r\n    if (s.includes('archived')) return '#8b5cf6';\r\n    if (s.includes('completed')) return '#059669';\r\n    if (s.includes('approved')) return '#10b981';\r\n    if (s.includes('pending')) return '#f59e0b';\r\n    if (s.includes('reject') || s.includes('denied') || s.includes('cancel')) return '#ef4444';\r\n    if (s.includes('overdue')) return '#d97706';\r\n    return '#6b7280';\r\n  };\r\n\r\n  const summaryCounts = useMemo(() => {\r\n    let pending = 0, approved = 0, completed = 0, rejected = 0, overdue = 0, archived = 0;\r\n    requests.forEach(r => {\r\n      const s = (r.status || 'Pending').toLowerCase();\r\n      const isOver = s === 'pending' && r.acquisitionDate && new Date(r.acquisitionDate) < new Date();\r\n      if (s.includes('archived')) archived++; else if (s.includes('completed')) completed++; else if (s.includes('approved')) approved++; else if (s.includes('reject') || s.includes('denied') || s.includes('cancel')) rejected++; else if (isOver || s.includes('overdue')) overdue++; else pending++;\r\n    });\r\n    return { total: requests.length, pending, approved, rejected, overdue, completed, archived };\r\n  }, [requests]);\r\n\r\n  const statusCounts = useMemo(() => ({\r\n    All: summaryCounts.total - summaryCounts.archived, // Exclude archived from All count\r\n    Pending: summaryCounts.pending,\r\n    Overdue: summaryCounts.overdue,\r\n    Approved: summaryCounts.approved,\r\n    Completed: summaryCounts.completed,\r\n    Rejected: summaryCounts.rejected,\r\n    Archived: summaryCounts.archived\r\n  }), [summaryCounts]);\r\n\r\n  if (!user || user.role !== 'HR') {\r\n    return (\r\n      <div style={{ padding: 24 }}>\r\n        <h2>Forbidden</h2>\r\n        <p>You must be an HR user to view this page.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-container ceo-manpower-requests-page\">\r\n      <AppHeader roleSegment=\"hr\" />\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"page-container\">\r\n          <div className=\"dashboard-card ceo-mr-header-card\">\r\n            <div className=\"card-header mr-header-row\">\r\n              <div className=\"mr-header-texts\">\r\n                <h1 className=\"card-title\">Manpower Movement</h1>\r\n                <p className=\"card-subtitle\">Manage and track manpower requests across all projects</p>\r\n              </div>\r\n              <div className=\"layout-toggle-wrapper\">\r\n                <button onClick={()=>setLayoutView(v=> v==='cards' ? 'table' : 'cards')} className=\"btn-secondary toggle-layout-btn\">\r\n                  {layoutView === 'cards' ? 'Table View' : 'Card View'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"card-body mr-filters-row\">\r\n              <div className=\"filter-tabs compact\">\r\n                {['All','Pending','Overdue','Approved','Completed','Rejected','Archived'].map(tab => (\r\n                  <button key={tab} className={`filter-tab ${status === tab ? 'active' : ''}`} onClick={() => {setStatus(tab); setCurrentPage(1);}}>\r\n                    <span>{tab}</span>\r\n                    <span className=\"count\">{statusCounts[tab] ?? 0}</span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              <div className=\"search-wrapper stretch\">\r\n                <FaSearch className=\"search-icon\" />\r\n                <input type=\"text\" placeholder=\"Search requests...\" value={searchTerm} onChange={(e)=>{setSearchTerm(e.target.value); setCurrentPage(1);}} className=\"search-input\" />\r\n              </div>\r\n              <button \r\n                onClick={handleExportPdf} \r\n                disabled={exporting || filteredRequests.length === 0}\r\n                className=\"btn-primary export-btn\"\r\n                style={{ \r\n                  display: 'flex', \r\n                  alignItems: 'center', \r\n                  gap: '8px', \r\n                  padding: '8px 16px',\r\n                  minWidth: 'auto'\r\n                }}\r\n              >\r\n                <FaDownload />\r\n                {exporting ? 'Exporting...' : 'Export PDF'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Request Type Filter */}\r\n          <div className=\"dashboard-card ceo-mr-header-card\" style={{ marginTop: '1rem' }}>\r\n            <div className=\"card-body\">\r\n              <div className=\"request-type-filter\" style={{ display: 'flex', gap: '1rem', alignItems: 'center' }}>\r\n                <span style={{ fontWeight: '500', color: '#374151' }}>View:</span>\r\n                <button\r\n                  className={`type-filter-btn ${viewMode === 'mine' ? 'active' : ''}`}\r\n                  onClick={() => setViewMode('mine')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '6px',\r\n                    background: viewMode === 'mine' ? '#3b82f6' : '#ffffff',\r\n                    color: viewMode === 'mine' ? '#ffffff' : '#374151',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '500'\r\n                  }}\r\n                >\r\n                  My Requests\r\n                </button>\r\n                <button\r\n                  className={`type-filter-btn ${viewMode === 'others' ? 'active' : ''}`}\r\n                  onClick={() => setViewMode('others')}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '6px',\r\n                    background: viewMode === 'others' ? '#3b82f6' : '#ffffff',\r\n                    color: viewMode === 'others' ? '#ffffff' : '#374151',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '500'\r\n                  }}\r\n                >\r\n                  Others' Requests\r\n                </button>\r\n                <button\r\n                  onClick={() => navigate('/hr/request-manpower')}\r\n                  className=\"btn-primary\"\r\n                  style={{\r\n                    marginLeft: 'auto',\r\n                    padding: '8px 16px',\r\n                    background: '#10b981',\r\n                    color: '#ffffff',\r\n                    border: 'none',\r\n                    borderRadius: '6px',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '500',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '8px'\r\n                  }}\r\n                >\r\n                  <span>+</span>\r\n                  <span>Request Manpower</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"dashboard-card ceo-mr-summary-card\">\r\n            <div className=\"card-header\"><h3 className=\"card-title-sm\">Summary</h3></div>\r\n            <div className=\"mr-summary-grid\">\r\n              {[{ label:'Total', value: summaryCounts.total, color:'#334155' },\r\n                { label:'Pending', value: summaryCounts.pending, color:'#f59e0b' },\r\n                { label:'Overdue', value: summaryCounts.overdue, color:'#d97706' },\r\n                { label:'Approved', value: summaryCounts.approved, color:'#10b981' },\r\n                { label:'Completed', value: summaryCounts.completed, color:'#059669' },\r\n                { label:'Rejected', value: summaryCounts.rejected, color:'#ef4444' },\r\n                { label:'Archived', value: summaryCounts.archived, color:'#8b5cf6' }\r\n              ].map(c => (\r\n                <div key={c.label} className=\"mr-summary-item\">\r\n                  <span className=\"mr-summary-label\">{c.label}</span>\r\n                  <span className=\"mr-summary-value\" style={{ color:c.color }}>{c.value}</span>\r\n                  <div className=\"mr-summary-bar\" style={{ background:c.color }} />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"dashboard-card ceo-mr-list-card\">\r\n            <div className=\"card-header list-header\"><h3 className=\"card-title-sm\">Requests <span className=\"muted\">({filteredRequests.length})</span></h3></div>\r\n            <div className={`requests-grid ceo-mr-grid ${layoutView === 'table' ? 'table-view' : ''}`}>            \r\n              {loading ? (\r\n                <div className=\"loading-state\"><div className=\"loading-spinner\"></div><p>Loading manpower requests...</p></div>\r\n              ) : error ? (\r\n                <div className=\"error-state\"><p>{error}</p></div>\r\n              ) : pageRows.length === 0 ? (\r\n                <div className=\"empty-state\">\r\n                  <div className=\"empty-icon\">👥</div>\r\n                  <h3>No manpower requests found</h3>\r\n                  <p>No requests match your current filters. Try adjusting your search criteria.</p>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {layoutView === 'table' && (\r\n                    <div className=\"mr-table-header\" role=\"row\" aria-label=\"Table Header\">\r\n                      <div>Project</div>\r\n                      <div>Requester</div>\r\n                      <div>Description</div>\r\n                      <div>Manpower</div>\r\n                      <div>Target</div>\r\n                      <div>Dur</div>\r\n                      <div>Created</div>\r\n                      <div>Status</div>\r\n                    </div>\r\n                  )}\r\n                  {pageRows.map(request => {\r\n                    const summary = (request.manpowers || []).map(m=>`${m.quantity} ${m.type}`).join(', ');\r\n                    const badgeLabel = getStatusBadge(request);\r\n                    const badgeColor = getStatusColor(request);\r\n                    if (layoutView === 'table') {\r\n                      return (\r\n                        <div\r\n                          key={request._id}\r\n                          className=\"mr-table-row\"\r\n                          role=\"row\"\r\n                          onClick={() => navigate(`/hr/manpower-request/${request._id}`)}\r\n                          style={{ cursor: 'pointer' }}\r\n                          title=\"View details\"\r\n                        >\r\n                          <div className=\"rt-title\" title={request.project?.projectName || '(No Project Name)'}>{request.project?.projectName || '(No Project Name)'}</div>\r\n                          <div className=\"rt-req\" title={request.createdBy?.name || 'Unknown'}>{request.createdBy?.name || 'Unknown'}</div>\r\n                          <div className=\"rt-desc\" title={request.description || 'No description'}>{request.description || 'No description'}</div>\r\n                          <div className=\"rt-man\" title={summary || '—'}>{summary || '—'}</div>\r\n                          <div className=\"rt-date\" title=\"Target Date\">{request.acquisitionDate ? new Date(request.acquisitionDate).toLocaleDateString() : '—'}</div>\r\n                          <div className=\"rt-date\" title=\"Duration\">{request.duration || '—'}d</div>\r\n                          <div className=\"rt-date\" title=\"Created\">{request.createdAt ? new Date(request.createdAt).toLocaleDateString() : '—'}</div>\r\n                          <div className=\"rt-btn\"><span className={`status-chip ${badgeLabel.toLowerCase()}`}>{badgeLabel}</span></div>\r\n                        </div>\r\n                      );\r\n                    }\r\n                    return (\r\n                      <div className={`request-card ceo-mr-card`} key={request._id}>\r\n                        <div className=\"card-body\">\r\n                          <div className=\"mr-card-top-row\">\r\n                            <h3 className=\"request-title\" title={request.project?.projectName || '(No Project Name)'}>{request.project?.projectName || '(No Project Name)'}</h3>\r\n                            <span className={`status-chip ${badgeLabel.toLowerCase()}`}>{badgeLabel}</span>\r\n                          </div>\r\n                          <p className=\"request-description\" title={request.description || 'No description provided'}>{request.description || 'No description provided'}</p>\r\n                          <div className=\"request-meta\">\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Requested by:</span><span className=\"meta-value\" title={request.createdBy?.name || 'Unknown'}>{request.createdBy?.name || 'Unknown'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Manpower:</span><span className=\"meta-value\" title={summary || '—'}>{summary || '—'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Date:</span><span className=\"meta-value\">{request.createdAt ? new Date(request.createdAt).toLocaleDateString() : '—'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Target:</span><span className=\"meta-value\">{request.acquisitionDate ? new Date(request.acquisitionDate).toLocaleDateString() : '—'}</span></div>\r\n                            <div className=\"meta-item\"><span className=\"meta-label\">Duration:</span><span className=\"meta-value\">{request.duration || '—'} d</span></div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"card-footer\">\r\n                          <Link to={`/hr/manpower-request/${request._id}`} className=\"view-details-btn\">View Details</Link>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </>\r\n              )}\r\n            </div>\r\n            {filteredRequests.length > 0 && (\r\n              <div className=\"pagination-section inside-card\">\r\n                <div className=\"pagination-info\">Showing {((currentPage - 1) * ITEMS_PER_PAGE) + 1} to {Math.min(currentPage * ITEMS_PER_PAGE, filteredRequests.length)} of {filteredRequests.length} entries</div>\r\n                <div className=\"pagination-controls\">\r\n                  <button onClick={()=>setCurrentPage(p=>Math.max(p-1,1))} disabled={currentPage===1} className=\"pagination-btn\">Previous</button>\r\n                  {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => (\r\n                    <button key={page} className={`pagination-btn ${page === currentPage ? 'active' : ''}`} onClick={()=>setCurrentPage(page)}>{page}</button>\r\n                  ))}\r\n                  <button onClick={()=>setCurrentPage(p=>Math.min(p+1,totalPages))} disabled={currentPage===totalPages} className=\"pagination-btn\">Next</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HrManpowerRequestList;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport '../style/hr_style/Hr_Dash.css';\r\nimport api from '../../api/axiosInstance';\r\nimport { PieChart, Pie, Cell, ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts';\r\nimport NotificationBell from '../NotificationBell'; // retained for any future usage in cards\r\nimport AppHeader from '../layout/AppHeader';\r\n// Nav icons\r\nimport {\r\n  FaTachometerAlt,\r\n  FaComments,\r\n  FaUsers,\r\n  FaExchangeAlt,\r\n  FaProjectDiagram,\r\n  FaUserPlus,\r\n  FaUserCheck,\r\n  FaUserClock,\r\n  FaClipboardList,\r\n  FaChartBar,\r\n  FaCalendarAlt,\r\n  FaArrowRight,\r\n  FaExclamationTriangle,\r\n  FaCheckCircle,\r\n  FaClock\r\n} from 'react-icons/fa';\r\n\r\nconst HrDash = ({ forceUserUpdate }) => {\r\n  const navigate = useNavigate();\r\n\r\n  // --- 1. User, token, userId state ---\r\n  const [user, setUser] = useState(() => {\r\n    const stored = localStorage.getItem('user');\r\n    return stored ? JSON.parse(stored) : null;\r\n  });\r\n  const [token, setToken] = useState(() => localStorage.getItem('token') || \"\");\r\n  const [userId, setUserId] = useState(() => user?._id);\r\n\r\n  // --- 2. Listen for storage changes for live update on login/logout/user switch ---\r\n  useEffect(() => {\r\n    const handleUserChange = () => {\r\n      const stored = localStorage.getItem('user');\r\n      setUser(stored ? JSON.parse(stored) : null);\r\n      setUserId(stored ? JSON.parse(stored)._id : undefined);\r\n      setToken(localStorage.getItem('token') || \"\");\r\n    };\r\n    window.addEventListener(\"storage\", handleUserChange);\r\n    return () => window.removeEventListener(\"storage\", handleUserChange);\r\n  }, []);\r\n\r\n  // --- 3. Update username/role from state ---\r\n  const [userName, setUserName] = useState(user?.name || 'HR Manager');\r\n  const [userRole, setUserRole] = useState(user?.role || '');\r\n  \r\n  useEffect(() => {\r\n    setUserName(user?.name || 'HR Manager');\r\n      setUserRole(user?.role || '');\r\n    }, [user]);\r\n\r\n  // --- 4. Page data state ---\r\n  // Header state no longer needed with AppHeader\r\n\r\n  const [chats, setChats] = useState([]);\r\n  const [loadingChats, setLoadingChats] = useState(true);\r\n  const [chatsError, setChatsError] = useState(null);\r\n\r\n  const [manpowerRequests, setManpowerRequests] = useState([]);\r\n  const [loadingRequests, setLoadingRequests] = useState(true);\r\n  const [requestsError, setRequestsError] = useState(null);\r\n\r\n  const [viewedRequestIds, setViewedRequestIds] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem('hrViewedRequests');\r\n      const arr = raw ? JSON.parse(raw) : [];\r\n      return new Set(Array.isArray(arr) ? arr : []);\r\n    } catch {\r\n      return new Set();\r\n    }\r\n  });\r\n\r\n  const persistViewedIds = useCallback((idsSet) => {\r\n    try {\r\n      localStorage.setItem('hrViewedRequests', JSON.stringify(Array.from(idsSet)));\r\n    } catch {}\r\n  }, []);\r\n\r\n  const [stats, setStats] = useState({\r\n    totalStaff: 0,\r\n    assigned: 0,\r\n    available: 0,\r\n    requests: 0,\r\n    pendingRequests: 0,\r\n    approvedRequests: 0\r\n  });\r\n\r\n  const [recentActivities, setRecentActivities] = useState([]);\r\n  const [loadingActivities, setLoadingActivities] = useState(true);\r\n\r\n  // --- 5. Redirect to login if not logged in ---\r\n  useEffect(() => {\r\n    if (!token || !userId) {\r\n      navigate('/');\r\n      return;\r\n    }\r\n  }, [token, userId, navigate]);\r\n\r\n  // --- 6. Header collapse handled internally by generic AppHeader (no-op retained for clarity) ---\r\n\r\n  // --- 7. Fetch HR statistics ---\r\n  const fetchHRStats = useCallback(async () => {\r\n    if (!token) return;\r\n    \r\n      try {\r\n       const [manpowerRes, movementRes] = await Promise.all([\r\n        api.get('/manpower', { headers: { Authorization: `Bearer ${token}` } }),\r\n        api.get('/manpower-requests', { headers: { Authorization: `Bearer ${token}` } })\r\n          ]);\r\n\r\n          const manpower = manpowerRes.data;\r\n          const movements = movementRes.data;\r\n\r\n        // ASSIGNMENT LOGIC (updated):\r\n        // We now treat a manpower record as Assigned iff assignedProject is non-null.\r\n        // Status field (Active/Inactive) is ignored for assignment counts to stay consistent\r\n        // with the Manpower list view.\r\n        const totalStaff = manpower.length;\r\n        const assigned = manpower.filter(mp => !!mp.assignedProject).length;\r\n        const available = manpower.filter(mp => !mp.assignedProject).length;\r\n      const requests = movements.length;\r\n      const pendingRequests = movements.filter(mv => mv.status === 'Pending').length;\r\n      const approvedRequests = movements.filter(mv => mv.status === 'Approved').length;\r\n\r\n      setStats({ totalStaff, assigned, available, requests, pendingRequests, approvedRequests });\r\n      } catch (error) {\r\n        console.error('Failed to fetch HR stats:', error);\r\n      }\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    fetchHRStats();\r\n  }, [fetchHRStats]);\r\n\r\n  // --- 8. Fetch recent conversations ---\r\n  const fetchChats = useCallback(async () => {\r\n    if (!token || !userId) return;\r\n\r\n    try {\r\n      const { data } = await api.get(`/chats/user/${userId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (data && Array.isArray(data)) {\r\n        const processedChats = data.slice(0, 5).map((conversation, index) => {\r\n          // Get the other user's name (not the current user)\r\n          const otherUser = conversation.users?.find(u => u._id !== userId);\r\n          let otherUserName = 'Unknown User';\r\n          \r\n          if (otherUser) {\r\n            otherUserName = otherUser.name || `${otherUser.firstname || ''} ${otherUser.lastname || ''}`.trim() || 'Unknown User';\r\n          } else if (conversation.users?.length > 0) {\r\n            const allUserNames = conversation.users.map(user =>\r\n              user.name || `${user.firstname || ''} ${user.lastname || ''}`.trim() || 'Unknown'\r\n            ).filter(name => name !== 'Unknown');\r\n            otherUserName = allUserNames.length > 0 ? allUserNames.join(', ') : 'Unknown User';\r\n          }\r\n\r\n          let lastMessageContent = 'No messages yet';\r\n          let lastMessageTime = new Date();\r\n\r\n          if (conversation.lastMessage) {\r\n            lastMessageContent = conversation.lastMessage.content || 'No messages yet';\r\n            lastMessageTime = conversation.lastMessage.timestamp || new Date();\r\n          }\r\n\r\n          return {\r\n            _id: conversation._id,\r\n            name: conversation.isGroup ? conversation.name : otherUserName,\r\n            isGroup: conversation.isGroup || false,\r\n            lastMessage: lastMessageContent,\r\n            lastMessageTime: lastMessageTime,\r\n            users: conversation.users || [],\r\n            color: '#4A6AA5'\r\n          };\r\n        });\r\n\r\n        setChats(processedChats);\r\n      } else {\r\n        setChats([]);\r\n      }\r\n\r\n      setChatsError(null);\r\n    } catch (error) {\r\n      console.log('Chat fetch error:', error);\r\n      setChats([]);\r\n      setChatsError(`Failed to load conversations: ${error.message}`);\r\n    }\r\n    setLoadingChats(false);\r\n  }, [token, userId]);\r\n\r\n  useEffect(() => {\r\n    fetchChats();\r\n  }, [fetchChats]);\r\n\r\n  // --- 9. Fetch manpower requests ---\r\n  const fetchManpowerRequests = useCallback(async () => {\r\n    if (!token) return;\r\n\r\n    try {\r\n      const { data } = await api.get('/manpower-requests', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      console.log('Raw manpower requests data:', data); // Debug log\r\n\r\n      if (data && Array.isArray(data)) {\r\n        const processedRequests = data.map(request => {\r\n          console.log('Processing individual request:', request); // Debug individual request\r\n          \r\n          const idStr = String(request._id || request.id || '');\r\n          // Extract project name from the actual API structure\r\n          let projectName = 'Unknown Project';\r\n          if (request.project?.projectName) {\r\n            projectName = request.project.projectName;\r\n          }\r\n\r\n          // Extract requested by from the actual API structure\r\n          let requestedBy = 'Unknown';\r\n          if (request.createdBy?.name) {\r\n            requestedBy = request.createdBy.name;\r\n          }\r\n\r\n          // Extract position and quantity from manpowers array\r\n          let position = 'Unknown Position';\r\n          let quantity = 1;\r\n          \r\n          if (request.manpowers && Array.isArray(request.manpowers) && request.manpowers.length > 0) {\r\n            // Get the first manpower entry (assuming one type per request for display)\r\n            const manpower = request.manpowers[0];\r\n            position = manpower.type || 'Unknown Position';\r\n            quantity = manpower.quantity || 1;\r\n          }\r\n\r\n          const rawStatus = (request.status || 'Pending').toString();\r\n          let displayStatus = rawStatus;\r\n          try {\r\n            const acq = request.acquisitionDate ? new Date(request.acquisitionDate) : null;\r\n            const isOverdue = rawStatus.toLowerCase() === 'pending' && acq && acq < new Date();\r\n            if (isOverdue) displayStatus = 'Overdue';\r\n          } catch {}\r\n\r\n          const processedRequest = {\r\n            _id: idStr,\r\n            projectName: projectName,\r\n            requestedBy: requestedBy,\r\n            position: position,\r\n            quantity: quantity,\r\n            status: displayStatus,\r\n            requestDate: new Date(request.createdAt || request.acquisitionDate || Date.now()),\r\n            priority: request.priority || 'Normal',\r\n            isViewed: Boolean(request.isViewed) || viewedRequestIds.has(idStr)\r\n          };\r\n          \r\n          console.log('Processed request:', processedRequest); // Debug processed request\r\n          \r\n          return processedRequest;\r\n        });\r\n\r\n        // Sort by date (most recent first) and take only the first 5\r\n        const sortedRequests = processedRequests\r\n          .sort((a, b) => b.requestDate - a.requestDate)\r\n          .slice(0, 5);\r\n\r\n        setManpowerRequests(sortedRequests);\r\n      } else {\r\n        setManpowerRequests([]);\r\n      }\r\n\r\n      setRequestsError(null);\r\n    } catch (error) {\r\n      console.log('Manpower requests fetch error:', error);\r\n      setManpowerRequests([]);\r\n      setRequestsError(`Failed to load requests: ${error.message}`);\r\n    }\r\n    setLoadingRequests(false);\r\n  }, [token, viewedRequestIds]);\r\n\r\n  useEffect(() => {\r\n    fetchManpowerRequests();\r\n  }, [fetchManpowerRequests]);\r\n\r\n  // Keep local list in sync with viewedRequestIds so highlight clears even without refetch\r\n  useEffect(() => {\r\n    setManpowerRequests(prev => prev.map(r => (\r\n      viewedRequestIds.has(r._id) ? { ...r, isViewed: true } : r\r\n    )));\r\n  }, [viewedRequestIds]);\r\n\r\n  // Refetch when window regains focus to reflect viewed status after navigating back\r\n  useEffect(() => {\r\n    const onFocus = () => {\r\n      fetchManpowerRequests();\r\n    };\r\n    window.addEventListener('focus', onFocus);\r\n    return () => window.removeEventListener('focus', onFocus);\r\n  }, [fetchManpowerRequests]);\r\n\r\n  // --- 10. Fetch recent activities ---\r\n  const fetchRecentActivities = useCallback(async () => {\r\n    if (!token) return;\r\n\r\n    try {\r\n      const { data } = await api.get('/audit-logs', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (data && Array.isArray(data)) {\r\n        const processedActivities = data.slice(0, 6).map((log, index) => ({\r\n          id: log._id || `activity-${index}`,\r\n          icon: getActivityIcon(log.action),\r\n          iconClass: 'activity-icon',\r\n          title: `${log.action} - ${log.description || ''}`,\r\n          time: new Date(log.timestamp).toLocaleString(),\r\n          type: log.action?.toLowerCase() || 'general'\r\n        }));\r\n\r\n        setRecentActivities(processedActivities);\r\n      } else {\r\n        setRecentActivities([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch recent activities:', error);\r\n      setRecentActivities([]);\r\n    }\r\n    setLoadingActivities(false);\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    fetchRecentActivities();\r\n  }, [fetchRecentActivities]);\r\n\r\n  // --- 11. Helper function for activity icons ---\r\n  const getActivityIcon = (action) => {\r\n    const actionLower = action?.toLowerCase() || '';\r\n    if (actionLower.includes('login') || actionLower.includes('logout')) return '🔐';\r\n    if (actionLower.includes('create') || actionLower.includes('add')) return '➕';\r\n    if (actionLower.includes('update') || actionLower.includes('edit')) return '✏️';\r\n    if (actionLower.includes('delete') || actionLower.includes('remove')) return '🗑️';\r\n    if (actionLower.includes('approve') || actionLower.includes('approval')) return '✅';\r\n    if (actionLower.includes('reject') || actionLower.includes('deny')) return '❌';\r\n    if (actionLower.includes('assign') || actionLower.includes('assignment')) return '👥';\r\n    if (actionLower.includes('request') || actionLower.includes('requisition')) return '📋';\r\n    return '📝';\r\n  };\r\n\r\n  // --- 12. Legacy profile menu logic removed (handled by AppHeader) ---\r\n\r\n  // --- 13. Logout handler passed to AppHeader ---\r\n  const handleLogout = useCallback(() => {\r\n    api.post('/auth/logout', {}, { headers: { Authorization: `Bearer ${token}` } }).finally(() => {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      setUser(null);\r\n      setUserId(undefined);\r\n      setToken(\"\");\r\n      if (forceUserUpdate) forceUserUpdate();\r\n      window.dispatchEvent(new Event('storage'));\r\n      navigate('/');\r\n    });\r\n  }, [token, forceUserUpdate, navigate]);\r\n\r\n  // --- 14. KPI data for charts ---\r\n  const workforceData = React.useMemo(() => {\r\n    const total = stats.totalStaff;\r\n    if (total === 0) return { data: [], assigned: 0, available: 0, total: 0 };\r\n    \r\n    const assigned = stats.assigned;\r\n    const available = stats.available;\r\n    \r\n    const data = [\r\n      { name: 'Assigned', value: assigned, color: '#22c55e' },\r\n      { name: 'Available', value: available, color: '#3b82f6' }\r\n    ];\r\n    \r\n    return {\r\n      data: data.filter(item => item.value > 0),\r\n      assigned,\r\n      available,\r\n      total\r\n    };\r\n  }, [stats]);\r\n\r\n  const requestStatusData = React.useMemo(() => {\r\n    const pending = stats.pendingRequests;\r\n    const approved = stats.approvedRequests;\r\n    const total = stats.requests;\r\n    \r\n    if (total === 0) return { data: [], pending: 0, approved: 0, total: 0 };\r\n    \r\n    const data = [\r\n      { name: 'Pending', value: pending, color: '#f59e0b' },\r\n      { name: 'Approved', value: approved, color: '#22c55e' }\r\n    ];\r\n    \r\n    return {\r\n      data: data.filter(item => item.value > 0),\r\n      pending,\r\n      approved,\r\n      total\r\n    };\r\n  }, [stats]);\r\n\r\n  // Function to truncate text\r\n  const truncateMessage = (text, maxWords = 10) => {\r\n    if (!text || typeof text !== 'string') return 'No messages yet';\r\n    const words = text.trim().split(/\\s+/);\r\n    if (words.length <= maxWords) return text;\r\n    return words.slice(0, maxWords).join(' ') + '...';\r\n  };\r\n\r\n  // Function to format date\r\n  const formatDate = (date) => {\r\n    if (!date) return 'Unknown';\r\n    const d = new Date(date);\r\n    const now = new Date();\r\n    const diffTime = Math.abs(now - d);\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    if (diffDays === 1) return 'Today';\r\n    if (diffDays === 2) return 'Yesterday';\r\n    if (diffDays <= 7) return `${diffDays - 1} days ago`;\r\n    return d.toLocaleDateString();\r\n  };\r\n\r\n  // Mark a request as viewed (optimistic update + API)\r\n  const markRequestAsViewed = useCallback(async (requestId) => {\r\n    try {\r\n      await api.put(`/manpower-requests/${requestId}`, { isViewed: true }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to mark as viewed:', error);\r\n    }\r\n  }, [token]);\r\n\r\n  const handleRequestClick = useCallback((event, requestId) => {\r\n    const idStr = String(requestId);\r\n    try {\r\n      if (event && event.currentTarget && event.currentTarget.classList) {\r\n        event.currentTarget.classList.remove('unviewed');\r\n        event.currentTarget.setAttribute('data-viewed', '1');\r\n      }\r\n    } catch {}\r\n    // Optimistically update local state so highlight disappears immediately\r\n    setManpowerRequests(prev => prev.map(r => (\r\n      String(r._id) === idStr ? { ...r, isViewed: true } : r\r\n    )));\r\n    // Persist locally as viewed to keep state on return even if backend lags\r\n    setViewedRequestIds(prev => {\r\n      const next = new Set(prev);\r\n      next.add(idStr);\r\n      persistViewedIds(next);\r\n      return next;\r\n    });\r\n    // Persist on server (detail page also does this; redundancy is safe)\r\n    markRequestAsViewed(idStr);\r\n    navigate(`/hr/manpower-request/${idStr}`);\r\n  }, [markRequestAsViewed, navigate, persistViewedIds]);\r\n\r\n  return (\r\n    <div className=\"hr-dashboard dashboard-container\">\r\n      <AppHeader \r\n        roleSegment=\"hr\"\r\n        onLogout={handleLogout}\r\n        overrideNav={[\r\n          { to:'/hr/dash', label:'Dashboard', icon:<FaTachometerAlt/>, match:'/hr/dash' },\r\n          { to:'/hr/chat', label:'Chat', icon:<FaComments/>, match:'/hr/chat' },\r\n            { to:'/hr/mlist', label:'Manpower', icon:<FaUsers/>, match:'/hr/mlist' },\r\n          { to:'/hr/movement', label:'Movement', icon:<FaExchangeAlt/>, match:'/hr/movement' },\r\n          { to:'/hr/project-records', label:'Projects', icon:<FaProjectDiagram/>, match:'/hr/project-records' },\r\n          { to:'/hr/attendance', label:'Attendance', icon:<FaCalendarAlt/>, match:'/hr/attendance' }\r\n        ]}\r\n      />\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"dashboard-grid\">\r\n          {/* Welcome & Overview Card */}\r\n          <div className=\"dashboard-card hr-welcome-card\">\r\n            {/* Hero Art */}\r\n            <div \r\n              className=\"hero-art\"\r\n              aria-hidden=\"true\"\r\n              style={{\r\n                backgroundImage: `radial-gradient(ellipse at 65% 35%, rgba(255,255,255,0.18), transparent 55%), url(${process.env.PUBLIC_URL || ''}/images/illustration-construction-site.png)`\r\n              }}\r\n            />\r\n            \r\n            <div className=\"welcome-content\">\r\n              <h2 className=\"welcome-title\">Welcome back, {userName}! 👋</h2>\r\n              <p className=\"welcome-subtitle\">Manage your workforce and track manpower activities</p>\r\n            </div>\r\n\r\n            {/* Welcome Stats */}\r\n            <div className=\"welcome-stats\">\r\n              <Link to=\"/hr/mlist\" className=\"stat-link\">\r\n                <div className=\"stat-item\">\r\n                  <div className=\"stat-icon\">\r\n                    <FaUsers />\r\n                  </div>\r\n                  <div className=\"stat-content\">\r\n                    <span className=\"stat-value\">{stats.totalStaff}</span>\r\n                    <span className=\"stat-label\">Total Manpower</span>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n              \r\n              <Link to=\"/hr/mlist\" className=\"stat-link\">\r\n                <div className=\"stat-item\">\r\n                  <div className=\"stat-icon\">\r\n                    <FaUserCheck />\r\n                  </div>\r\n                  <div className=\"stat-content\">\r\n                    <span className=\"stat-value\">{stats.assigned}</span>\r\n                    <span className=\"stat-label\">Assigned</span>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            </div>\r\n\r\n            {/* KPI Strip */}\r\n            <div className=\"kpi-strip\">\r\n              <Link to=\"/hr/mlist\" className=\"kpi\">\r\n                <div className=\"kpi-ico\">\r\n                  <FaUsers />\r\n                </div>\r\n                <div className=\"kpi-body\">\r\n                  <div className=\"kpi-title\">Total Manpower</div>\r\n                  <div className=\"kpi-value\">{stats.totalStaff}</div>\r\n                </div>\r\n              </Link>\r\n              \r\n              <Link to=\"/hr/mlist\" className=\"kpi\">\r\n                <div className=\"kpi-ico\">\r\n                  <FaUserCheck />\r\n                </div>\r\n                <div className=\"kpi-body\">\r\n                  <div className=\"kpi-title\">Assigned</div>\r\n                  <div className=\"kpi-value\">{stats.assigned}</div>\r\n                </div>\r\n              </Link>\r\n              \r\n              <Link to=\"/hr/movement\" className=\"kpi\">\r\n                <div className=\"kpi-ico\">\r\n                  <FaClipboardList />\r\n                </div>\r\n                <div className=\"kpi-body\">\r\n                  <div className=\"kpi-title\">Requests</div>\r\n                  <div className=\"kpi-value\">{stats.requests}</div>\r\n                </div>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Workforce Analytics Chart */}\r\n          {workforceData.data.length > 0 && (\r\n            <div className=\"dashboard-card chart-card\">\r\n              <div className=\"card-header\">\r\n                <h3 className=\"card-title\">Workforce Analytics</h3>\r\n                <div className=\"card-subtitle\">\r\n                  Based on {workforceData.total} total workforce\r\n                </div>\r\n              </div>\r\n              <div className=\"chart-container\">\r\n                <ResponsiveContainer width=\"100%\" height={200}>\r\n                  <PieChart>\r\n                    <Pie\r\n                      data={workforceData.data}\r\n                      cx=\"50%\"\r\n                      cy=\"50%\"\r\n                      innerRadius={40}\r\n                      outerRadius={80}\r\n                      fill=\"#8884d8\"\r\n                      paddingAngle={2}\r\n                      dataKey=\"value\"\r\n                      label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\r\n                      labelLine={false}\r\n                    >\r\n                      {workforceData.data.map((entry, index) => (\r\n                        <Cell key={`cell-${index}`} fill={entry.color} />\r\n                      ))}\r\n                    </Pie>\r\n                  </PieChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n              <div className=\"chart-footer\">\r\n                <span className=\"utilization-rate\">\r\n                  Utilization Rate: {workforceData.total > 0 ? Math.round((workforceData.assigned / workforceData.total) * 100) : 0}%\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Recent Manpower Requests */}\r\n          <div className=\"dashboard-card requests-card\">\r\n            <div className=\"card-header\">\r\n              <h3 className=\"card-title\">Recent Manpower Requests</h3>\r\n              <Link to=\"/hr/movement\" className=\"view-all-link\">\r\n                View All <FaArrowRight />\r\n              </Link>\r\n            </div>\r\n            <div className=\"requests-content\">\r\n              {loadingRequests ? (\r\n                <div className=\"loading-state\">\r\n                  <div className=\"loading-spinner\"></div>\r\n                  <span>Loading requests...</span>\r\n                </div>\r\n              ) : requestsError ? (\r\n                <div className=\"error-state\">\r\n                  <FaExclamationTriangle />\r\n                  <span>{requestsError}</span>\r\n                </div>\r\n              ) : manpowerRequests.length === 0 ? (\r\n                <div className=\"empty-state\">\r\n                  <FaClipboardList />\r\n                  <span>No recent requests found</span>\r\n                  <p>All requests have been processed or none are pending</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"requests-list\">\r\n                  {manpowerRequests.slice(0, 3).map(request => (\r\n                    <div \r\n                      key={request._id} \r\n                      className={`request-item-new-layout ${!request.isViewed ? 'unviewed' : ''}`}\r\n                      onClick={(e) => handleRequestClick(e, request._id)}\r\n                      style={{ cursor: 'pointer', textDecoration: 'none' }}\r\n                    >\r\n                      {/* Left Section - Request Details */}\r\n                      <div className=\"request-left-section\">\r\n                        <div className=\"request-icon-new\">\r\n                          <FaClipboardList />\r\n                        </div>\r\n                        <div className=\"request-details-new\">\r\n                          <h4 className=\"request-title-new\">\r\n                            {request.position} - {request.quantity} needed\r\n                          </h4>\r\n                          <div className=\"request-meta-new\">\r\n                            <span className=\"request-project-new\">{request.projectName}</span>\r\n                            <span className=\"request-date-new\">\r\n                              {formatDate(request.requestDate)}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {/* Center Section - Status */}\r\n                      <div className=\"request-center-section\">\r\n                        <div className=\"request-status-info\">\r\n                          <span className=\"request-requester\">By: {request.requestedBy}</span>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {/* Right Section - Status Badge */}\r\n                      <div className=\"request-right-section\">\r\n                        <div className=\"request-status-new\">\r\n                          <span className={`status-text-new ${request.status?.replace(/\\s/g, '').toLowerCase()}`}>\r\n                            {request.status}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HrDash;","import React, { useEffect, useMemo, useState, useDeferredValue } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport api from '../../api/axiosInstance';\r\nimport AppHeader from '../layout/AppHeader';\r\nimport '../style/it_style/It_Projects.css';\r\nimport {\r\n  FaProjectDiagram, FaSearch, FaChevronUp, FaChevronDown, FaTh, FaList,\r\n  FaMapMarkerAlt, FaUserTie, FaBuilding, FaCalendarAlt, FaUsers as FaUsersIcon,\r\n  FaMoneyBillWave, FaClock, FaCheckCircle\r\n} from 'react-icons/fa';\r\n\r\nconst HrProj = () => {\r\n  const navigate = useNavigate();\r\n  const [projects,setProjects]=useState([]);\r\n  const [loading,setLoading]=useState(true);\r\n  const [error,setError]=useState('');\r\n  const [filter,setFilter]=useState('all');\r\n  const [viewMode,setViewMode]=useState('grid');\r\n  const [searchTerm,setSearchTerm]=useState('');\r\n  const deferredSearch = useDeferredValue(searchTerm);\r\n  const [sortBy,setSortBy]=useState('name');\r\n  const [sortOrder,setSortOrder]=useState('asc');\r\n  const [page,setPage]=useState(1);\r\n  const [pageSize,setPageSize]=useState(12);\r\n\r\n  useEffect(()=>{\r\n    let active = true;\r\n    (async()=>{\r\n      try {\r\n        const { data } = await api.get('/projects');\r\n        if(!active) return; setProjects(Array.isArray(data)? data:[]);\r\n      } catch {\r\n        if(active) setError('Failed to fetch projects');\r\n      } finally { if(active) setLoading(false); }\r\n    })();\r\n    return ()=>{ active=false; };\r\n  },[]);\r\n\r\n  const currencyFmt = useMemo(()=> new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',maximumFractionDigits:2}),[]);\r\n  const dateFmt = (d)=> d ? new Date(d).toLocaleDateString(undefined,{month:'short',day:'numeric',year:'numeric'}) : '';\r\n\r\n  const statusMeta = (statusRaw='')=>{\r\n    const s = statusRaw.toLowerCase();\r\n    if(s==='completed') return { color:'#10B981', Icon:FaCheckCircle, label:'Completed' };\r\n    if(s==='ongoing' || s==='on going') return { color:'#3B82F6', Icon:FaClock, label:'Ongoing' };\r\n    if(['pending','not started'].includes(s)) return { color:'#F59E0B', Icon:FaClock, label:'Pending' };\r\n    return { color:'#6B7280', Icon:FaClock, label: statusRaw || 'Unknown' };\r\n  };\r\n\r\n  const filteredSorted = useMemo(()=>{\r\n    const srch = deferredSearch.trim().toLowerCase();\r\n    const subset = projects\r\n      .filter(p=>{\r\n        const st = (p.status||'').toLowerCase();\r\n        if(filter==='completed') return st==='completed';\r\n        if(filter==='ongoing') return ['ongoing','on going'].includes(st);\r\n        if(filter==='pending') return ['pending','not started'].includes(st);\r\n        return true;\r\n      })\r\n      .filter(p=>{\r\n        if(!srch) return true;\r\n        return [p.projectName, p.location?.name, p.projectmanager?.name, p.contractor]\r\n          .some(v=> (v||'').toLowerCase().includes(srch));\r\n      })\r\n      .sort((a,b)=>{\r\n        const pick=(o)=>{\r\n          switch(sortBy){\r\n            case 'location': return o.location?.name||'';\r\n            case 'manager': return o.projectmanager?.name||'';\r\n            case 'status': return o.status||'';\r\n            case 'startDate': return o.startDate ? new Date(o.startDate).getTime():0;\r\n            default: return o.projectName||'';\r\n          }\r\n        };\r\n        const av = pick(a); const bv = pick(b);\r\n        if(av===bv) return 0;\r\n        return (av>bv?1:-1)*(sortOrder==='asc'?1:-1);\r\n      });\r\n    return subset;\r\n  },[projects,filter,deferredSearch,sortBy,sortOrder]);\r\n\r\n  useEffect(()=>{ setPage(1); },[filter,deferredSearch,sortBy,sortOrder]);\r\n\r\n  const totalItems = filteredSorted.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const currentPage = Math.min(page, totalPages);\r\n  const paginatedProjects = useMemo(()=> filteredSorted.slice((currentPage-1)*pageSize, currentPage*pageSize),[filteredSorted,currentPage,pageSize]);\r\n\r\n  const counts = useMemo(()=>({\r\n    total: projects.length,\r\n    ongoing: projects.filter(p=> ['ongoing','on going'].includes((p.status||'').toLowerCase())).length,\r\n    completed: projects.filter(p=> (p.status||'').toLowerCase()==='completed').length,\r\n    pending: projects.filter(p=> ['pending','not started'].includes((p.status||'').toLowerCase())).length\r\n  }),[projects]);\r\n\r\n  const Skeleton = ({n=8}) => (\r\n    <div className={`projects-display ${viewMode}`}>\r\n      {Array.from({length:n}).map((_,i)=>(\r\n        <div key={i} className=\"project-card skeleton\">\r\n          <div className=\"project-image-wrapper shimmer\" />\r\n          <div className=\"project-content\">\r\n            <div className=\"skeleton-line w60\" />\r\n            <div className=\"skeleton-line w40\" />\r\n            <div className=\"skeleton-line w80\" />\r\n            <div className=\"skeleton-line w50\" />\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"dashboard-container no-inner-scroll ceo-projects-page\">\r\n      <AppHeader roleSegment=\"hr\" />\r\n      <main className=\"dashboard-main auto-height\">\r\n        <div className=\"projects-container projects-light\">\r\n          <div className=\"page-header enhanced\">\r\n            <div className=\"page-title-section\">\r\n              <h1 className=\"page-title\">Projects</h1>\r\n              <p className=\"page-subtitle\">HR project records</p>\r\n            </div>\r\n            <div className=\"page-actions\">\r\n              <div className=\"search-container\">\r\n                <FaSearch className=\"search-icon\" />\r\n                <input\r\n                  value={searchTerm}\r\n                  onChange={e=>setSearchTerm(e.target.value)}\r\n                  placeholder=\"Search by name, location, manager...\"\r\n                  className=\"search-input\"\r\n                />\r\n              </div>\r\n              <div className=\"view-mode-container\">\r\n                <button\r\n                  aria-label=\"Grid view\"\r\n                  className={`view-mode-btn ${viewMode==='grid'?'active':''}`}\r\n                  onClick={()=>setViewMode('grid')}><FaTh/></button>\r\n                <button\r\n                  aria-label=\"List view\"\r\n                  className={`view-mode-btn ${viewMode==='list'?'active':''}`}\r\n                  onClick={()=>setViewMode('list')}><FaList/></button>\r\n              </div>\r\n              <div className=\"sort-container\">\r\n                <select value={sortBy} onChange={e=>setSortBy(e.target.value)} className=\"sort-select\">\r\n                  <option value=\"name\">Name</option>\r\n                  <option value=\"location\">Location</option>\r\n                  <option value=\"manager\">Manager</option>\r\n                  <option value=\"status\">Status</option>\r\n                  <option value=\"startDate\">Start Date</option>\r\n                </select>\r\n                <button\r\n                  aria-label=\"Toggle sort order\"\r\n                  className=\"sort-order-btn\"\r\n                  onClick={()=>setSortOrder(o=>o==='asc'?'desc':'asc')}>\r\n                  {sortOrder==='asc'? <FaChevronUp/> : <FaChevronDown/>}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"filter-bar below-header\">\r\n            <button className={`filter-chip ${filter==='all'?'active':''}`} onClick={()=>setFilter('all')}>All <span className=\"badge\">{counts.total}</span></button>\r\n            <button className={`filter-chip ${filter==='ongoing'?'active':''}`} onClick={()=>setFilter('ongoing')}>Ongoing <span className=\"badge\">{counts.ongoing}</span></button>\r\n            <button className={`filter-chip ${filter==='completed'?'active':''}`} onClick={()=>setFilter('completed')}>Completed <span className=\"badge\">{counts.completed}</span></button>\r\n            <button className={`filter-chip ${filter==='pending'?'active':''}`} onClick={()=>setFilter('pending')}>Pending <span className=\"badge\">{counts.pending}</span></button>\r\n          </div>\r\n\r\n          {error && <div className=\"error-state compact\"><FaClock/><span>{error}</span></div>}\r\n          {loading && !error && <Skeleton n={8} />}\r\n\r\n          {!loading && !error && (\r\n            <>\r\n              <div className={`projects-display ${viewMode}`}>\r\n                {paginatedProjects.length===0 && (\r\n                  <div className=\"empty-state full\">\r\n                    <FaProjectDiagram size={42}/>\r\n                    <h3>No projects found</h3>\r\n                    <p>{searchTerm||filter!=='all' ? 'Adjust search text, filters or sorting.' : 'No projects available.'}</p>\r\n                  </div>\r\n                )}\r\n                {paginatedProjects.map(p=>{\r\n                  const meta = statusMeta(p.status);\r\n                  return (\r\n                    <div\r\n                      key={p._id}\r\n                      className={`project-card ${viewMode}`}\r\n                      onClick={()=>navigate(`/hr/project-records/${p._id}`)}\r\n                      role=\"button\"\r\n                      tabIndex={0}\r\n                      onKeyDown={e=>{ if(e.key==='Enter') navigate(`/hr/project-records/${p._id}`); }}\r\n                    >\r\n                      <div className=\"project-image-wrapper\">\r\n                        <img\r\n                          loading=\"lazy\"\r\n                          src={p.photos?.[0] || 'https://placehold.co/640x360?text=No+Photo'}\r\n                          alt={p.projectName}\r\n                          className=\"project-image\"\r\n                        />\r\n                        <div className=\"status-badge\" style={{backgroundColor:meta.color}}>\r\n                          <meta.Icon size={12}/>\r\n                          <span>{meta.label}</span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"project-content\">\r\n                        <h3 className=\"project-name clamp\">{p.projectName||'Untitled'}</h3>\r\n                        <div className=\"project-location\"><FaMapMarkerAlt/><span>{p.location?.name || 'No Location'}</span></div>\r\n                        <ul className=\"meta-list\">\r\n                          <li><FaUserTie/><span>{p.projectmanager?.name||'Unassigned'}</span></li>\r\n                          <li><FaBuilding/><span>{p.contractor||'No Contractor'}</span></li>\r\n                          <li><FaCalendarAlt/><span>{p.startDate && p.endDate ? `${dateFmt(p.startDate)} - ${dateFmt(p.endDate)}` : (p.startDate? dateFmt(p.startDate): 'No timeline')}</span></li>\r\n                          <li><FaUsersIcon/><span>{Array.isArray(p.manpower)&&p.manpower.length>0 ? `${p.manpower.length} manpower` : 'No manpower'}</span></li>\r\n                          {p.budget && <li><FaMoneyBillWave/><span>{currencyFmt.format(p.budget)}</span></li>}\r\n                        </ul>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              {paginatedProjects.length>0 && (\r\n                <div className=\"pagination-bar\">\r\n                  <div className=\"pagination-left\">\r\n                    <span className=\"pagination-info\">Showing {(currentPage-1)*pageSize + 1}-{Math.min(currentPage*pageSize,totalItems)} of {totalItems}</span>\r\n                    <label className=\"page-size-select-label\">\r\n                      <span>Per page:</span>\r\n                      <select value={pageSize} onChange={e=>{ setPageSize(parseInt(e.target.value)||12); setPage(1); }} className=\"page-size-select\">\r\n                        {[6,12,18,24,36].map(sz=> <option key={sz} value={sz}>{sz}</option>)}\r\n                      </select>\r\n                    </label>\r\n                  </div>\r\n                  <div className=\"pagination-pages\">\r\n                    <button disabled={currentPage===1} onClick={()=>setPage(p=>Math.max(1,p-1))} className=\"page-btn\" aria-label=\"Previous page\">‹</button>\r\n                    {Array.from({length: totalPages}).map((_,i)=>{\r\n                      const pageNumber = i+1;\r\n                      const show = pageNumber===1 || pageNumber===totalPages || Math.abs(pageNumber-currentPage)<=1;\r\n                      if(!show) {\r\n                        if(pageNumber===2 && currentPage>3) return <span key=\"start-ellipsis\" className=\"ellipsis\">…</span>;\r\n                        if(pageNumber===totalPages-1 && currentPage<totalPages-2) return <span key=\"end-ellipsis\" className=\"ellipsis\">…</span>;\r\n                        return null;\r\n                      }\r\n                      return (\r\n                        <button\r\n                          key={pageNumber}\r\n                          className={`page-btn ${pageNumber===currentPage?'active':''}`}\r\n                          onClick={()=>setPage(pageNumber)}\r\n                          aria-current={pageNumber===currentPage? 'page': undefined}\r\n                        >{pageNumber}</button>\r\n                      );\r\n                    })}\r\n                    <button disabled={currentPage===totalPages} onClick={()=>setPage(p=>Math.min(totalPages,p+1))} className=\"page-btn\" aria-label=\"Next page\">›</button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HrProj;\r\n","// Unified HrChat wrapper using AreaChat implementation\r\nimport React from 'react';\r\nimport AreaChat from './AreaChat';\r\n\r\nexport default function HrChat(){\r\n  return <AreaChat baseSegment=\"hr\" />;\r\n}\r\n"],"names":["_ref","forceUserUpdate","navigate","useNavigate","user","setUser","useState","stored","localStorage","getItem","JSON","parse","token","setToken","userId","setUserId","_id","useEffect","handleUserChange","undefined","window","addEventListener","removeEventListener","attendanceReports","setAttendanceReports","loading","setLoading","error","setError","totalReports","setTotalReports","searchTerm","setSearchTerm","dateFrom","setDateFrom","dateTo","setDateTo","sortBy","setSortBy","sortOrder","setSortOrder","showFilters","setShowFilters","projects","setProjects","selectedProject","setSelectedProject","dateFilter","setDateFilter","fetchProjects","useCallback","async","data","api","get","headers","Authorization","concat","console","fetchAttendanceReports","params","URLSearchParams","append","log","reports","total","_error$response","response","message","handleSort","field","clearFilters","handleSortByDate","order","formatDate","date","Date","toLocaleDateString","year","month","day","hour","minute","getSortIcon","_jsx","FaSort","className","FaSortUp","FaSortDown","handleLogout","post","finally","removeItem","dispatchEvent","Event","_jsxs","children","AppHeader","roleSegment","onLogout","overrideNav","to","label","icon","FaTachometerAlt","match","FaComments","FaUsers","FaExchangeAlt","FaProjectDiagram","FaCalendarAlt","FaSearch","type","placeholder","value","onChange","e","target","onClick","title","map","project","projectName","filter","now","toISOString","split","weekAgo","getTime","monthAgo","handleDateFilter","length","FaFileExcel","report","projectStartDate","projectEndDate","originalName","FaUser","uploadedByName","FaClock","generatedAt","projectId","path","outputPath","signedUrl","open","alert","FaDownload","pill","bg","background","color","arguments","padding","borderRadius","fontSize","fontWeight","display","alignItems","gap","labelStyle","marginBottom","letterSpacing","valueBox","border","minHeight","btn","variant","base","cursor","_objectSpread","AuditTrail","requestId","logs","setLogs","React","setOpen","filtered","l","_l$meta","meta","fetchLogs","style","marginTop","o","maxHeight","overflowY","_l$performedBy","borderBottom","lineHeight","action","description","timestamp","toLocaleString","performedBy","name","performedByRole","HrManpowerRequestDetail","_request$project","_request$createdBy","_request$project2","_request$manpowers","_request$status","_request$status2","_request$status3","_request$status4","_request$createdBy2","_request$project3","id","useParams","userName","role","request","setRequest","busy","setBusy","markReceived","setMarkReceived","showCalendar","setShowCalendar","selectedDate","setSelectedDate","isViewed","put","err","run","handleDelete","confirm","delete","isApproved","status","toLowerCase","FaExclamationTriangle","maxWidth","margin","boxShadow","justifyContent","flexWrap","createdBy","Pending","Approved","Overdue","Completed","Rejected","handleBack","disabled","gridTemplateColumns","acquisitionDate","duration","manpowers","m","i","quantity","FaCheckCircle","FaHourglassHalf","getStatusIcon","checked","FaFileAlt","requestNumber","slice","FaUserTie","returnDate","Array","isArray","mp","FaTrash","FaArrowLeft","handleScheduleReturn","FaCalendarPlus","min","_unused","loadFontFromPublic","doc","fontFile","family","Promise","resolve","fontPath","fetch","then","r","arrayBuffer","buf","addFileToVFS","addFont","_unused2","catch","_unused3","fontUsable","fonts","getFontList","_unused4","formatDateTime","dt","Number","isNaN","pad","n","String","padStart","exportManpowerRequestsPdf","rows","options","companyName","logoPath","exporterName","exporterRole","filters","reportTitle","jsPDF","unit","format","FAMILY","regOk","boldOk","canUseRegular","canUseBold","bodyFont","headStyle","marginX","y","logo","url","img","Image","crossOrigin","onload","c","document","createElement","width","naturalWidth","height","naturalHeight","getContext","drawImage","dataUrl","toDataURL","w","h","onerror","src","titleX","drawW","drawH","maxW","maxH","Math","fitInside","addImage","setFont","setFontSize","setTextColor","text","setDrawColor","setLineWidth","line","filterSummary","parts","push","search","join","buildFiltersSummary","metaY","forEach","tableStartY","body","_r$createdBy","_r$project","manpowerList","manpowerRequested","position","createdAt","req","autoTable","startY","head","styles","font","fontStyle","cellPadding","halign","overflow","headStyles","fillColor","textColor","theme","left","right","columnStyles","cellWidth","didDrawPage","str","page","getCurrentPageInfo","pageNumber","pages","getNumberOfPages","getTextWidth","save","prefix","d","getHours","getMinutes","buildFileName","HrMovementList","userRef","useRef","current","requests","setRequests","setStatus","currentPage","setCurrentPage","layoutView","setLayoutView","active","fetchAll","filteredRequests","useMemo","items","includes","s","proj","by","summary","totalPages","max","ceil","pageRows","start","summaryCounts","pending","approved","completed","rejected","overdue","archived","isOver","statusCounts","All","Archived","v","tab","_statusCounts$tab","_Fragment","_request$project4","_request$createdBy3","_request$createdBy4","badgeLabel","getStatusBadge","getStatusColor","Link","p","from","_","toPascalCase","string","camelCase","replace","p1","p2","toUpperCase","toCamelCase","charAt","mergeClasses","_len","classes","_key","index","array","Boolean","trim","indexOf","defaultAttributes","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Icon","forwardRef","ref","size","absoluteStrokeWidth","iconNode","rest","_objectWithoutProperties","_excluded","props","prop","startsWith","hasA11yProp","_ref2","tag","attrs","createLucideIcon","iconName","Component","displayName","Upload","key","points","x1","x2","y1","y2","Search","cx","cy","RefreshCw","X","ITEMS_PER_PAGE","ManpowerRow","_manpower$assignedPro","manpower","onReassignClick","onEditClick","isOnLoan","currentLoan","locationDisplay","location","assignedProject","preventDefault","FaReassign","FaUserPlus","Pagination","totalEntries","onPageChange","showingRange","visiblePages","end","HrManpowerList","setManpowers","positionFilter","setPositionFilter","assignmentSort","setAssignmentSort","reassignModalOpen","setReassignModalOpen","selectedManpower","setSelectedManpower","editingManpower","setEditingManpower","editForm","setEditForm","savingEdit","setSavingEdit","reassigning","setReassigning","fileInputRef","setUserName","userRole","setUserRole","manpowerData","loanRequests","processedManpower","_activeLoan$project","activeLoan","find","loan","manpowerProvided","fetchManpower","handleReassignClick","handleEditChange","f","handleReassign","newProjectId","manpowerId","manpowerName","previousProject","newProject","refreshManpower","_activeLoan$project2","filteredManpowers","_mp$name","_mp$position","_mp$employeeId","_mp$project","employeeId","_mp$position2","sort","a","b","aAssigned","bAssigned","startIndex","endIndex","currentManpowers","uniquePositions","Set","counts","assigned","unassigned","_fileInputRef$current","click","accept","event","file","files","Papa","header","skipEmptyLines","complete","results","parsedData","errors","newManpowers","invalidRows","row","stringify","createdManpowers","reload","marginLeft","backgroundColor","borderColor","FaUserCheck","FaUserClock","minWidth","textAlign","scrollTo","top","behavior","stopPropagation","loc","disp","prev","HrViewProject","overrides","ProjectView","navPathOverrides","useUnifiedHeader","HrManpowerRequestList","viewMode","setViewMode","exporting","setExporting","othersOnly","_r$createdBy2","_r$status","_r$status2","creatorId","isCompleted","_r$createdBy3","chats","setChats","loadingChats","setLoadingChats","chatsError","setChatsError","manpowerRequests","setManpowerRequests","loadingRequests","setLoadingRequests","requestsError","setRequestsError","viewedRequestIds","setViewedRequestIds","raw","arr","persistViewedIds","idsSet","setItem","stats","setStats","totalStaff","available","pendingRequests","approvedRequests","recentActivities","setRecentActivities","loadingActivities","setLoadingActivities","fetchHRStats","manpowerRes","movementRes","all","movements","mv","fetchChats","processedChats","conversation","_conversation$users","_conversation$users2","otherUser","users","u","otherUserName","firstname","lastname","allUserNames","lastMessageContent","lastMessageTime","lastMessage","content","isGroup","fetchManpowerRequests","sortedRequests","idStr","requestedBy","rawStatus","toString","displayStatus","acq","processedRequest","requestDate","priority","has","onFocus","fetchRecentActivities","processedActivities","_log$action","getActivityIcon","iconClass","time","actionLower","workforceData","item","diffTime","abs","diffDays","markRequestAsViewed","handleRequestClick","currentTarget","classList","remove","setAttribute","next","add","backgroundImage","FaClipboardList","ResponsiveContainer","PieChart","Pie","innerRadius","outerRadius","paddingAngle","dataKey","percent","toFixed","labelLine","entry","Cell","round","FaArrowRight","textDecoration","HrProj","setFilter","deferredSearch","useDeferredValue","setPage","pageSize","setPageSize","currencyFmt","Intl","NumberFormat","currency","maximumFractionDigits","dateFmt","filteredSorted","srch","st","_p$location","_p$projectmanager","projectmanager","contractor","some","pick","_o$location","_o$projectmanager","startDate","av","bv","totalItems","paginatedProjects","ongoing","Skeleton","FaTh","FaList","FaChevronUp","FaChevronDown","_p$photos","_p$location2","_p$projectmanager2","statusRaw","statusMeta","tabIndex","onKeyDown","photos","alt","FaMapMarkerAlt","FaBuilding","endDate","FaUsersIcon","budget","FaMoneyBillWave","parseInt","sz","HrChat","AreaChat","baseSegment"],"sourceRoot":""}