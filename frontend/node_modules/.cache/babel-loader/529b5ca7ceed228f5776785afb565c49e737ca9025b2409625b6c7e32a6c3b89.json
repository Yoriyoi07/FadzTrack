{"ast":null,"code":"var _jsxFileName = \"E:\\\\Fadz_web\\\\FADZtrack-web-\\\\frontend\\\\src\\\\components\\\\TwoFactorAuth.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from '../api/axiosInstance';\nimport './style/TwoFactorAuth.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TwoFactorAuth = ({\n  email,\n  onSuccess\n}) => {\n  _s();\n  const [code, setCode] = useState('');\n  const [message, setMessage] = useState('');\n  const [cooldown, setCooldown] = useState(0);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const {\n        data\n      } = await api.post('/auth/verify-2fa', {\n        email,\n        code\n      });\n      onSuccess(data.accessToken, {\n        ...data.user,\n        _id: data.user._id || data.user.id\n      });\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setMessage(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.msg) || 'Verification failed.');\n    }\n  };\n  const handleResend = async () => {\n    try {\n      const res = await api.post('/auth/resend-2fa', {\n        email\n      });\n      setMessage(res.data.msg);\n      setCooldown(30);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setMessage(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.msg) || 'Error resending code.');\n    }\n  };\n  useEffect(() => {\n    if (!cooldown) return;\n    const iv = setInterval(() => {\n      setCooldown(c => c <= 1 ? (clearInterval(iv), 0) : c - 1);\n    }, 1000);\n    return () => clearInterval(iv);\n  }, [cooldown]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"two-fa-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Enter Verification Code\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"6-digit code\",\n        value: code,\n        onChange: e => setCode(e.target.value),\n        maxLength: 6,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Verify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleResend,\n      disabled: cooldown > 0,\n      className: \"resend-button\",\n      children: cooldown > 0 ? `Resend in ${cooldown}s` : 'Resend Code'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(TwoFactorAuth, \"MbFY1BTXxgsjD518G9Ctg4i0DtE=\");\n_c = TwoFactorAuth;\nexport default TwoFactorAuth;\nvar _c;\n$RefreshReg$(_c, \"TwoFactorAuth\");","map":{"version":3,"names":["React","useState","useEffect","api","jsxDEV","_jsxDEV","TwoFactorAuth","email","onSuccess","_s","code","setCode","message","setMessage","cooldown","setCooldown","handleSubmit","e","preventDefault","data","post","accessToken","user","_id","id","error","_error$response","_error$response$data","response","msg","handleResend","res","err","_err$response","_err$response$data","iv","setInterval","c","clearInterval","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","maxLength","required","onClick","disabled","_c","$RefreshReg$"],"sources":["E:/Fadz_web/FADZtrack-web-/frontend/src/components/TwoFactorAuth.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../api/axiosInstance';\r\nimport './style/TwoFactorAuth.css';\r\n\r\nconst TwoFactorAuth = ({ email, onSuccess }) => {\r\n  const [code, setCode] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [cooldown, setCooldown] = useState(0);\r\n\r\n const handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  try {\r\n    const { data } = await api.post(\r\n      '/auth/verify-2fa',\r\n      { email, code }\r\n    );\r\n    onSuccess(data.accessToken, {\r\n      ...data.user,\r\n      _id: data.user._id || data.user.id\r\n    });\r\n  } catch (error) {\r\n    setMessage(error.response?.data?.msg || 'Verification failed.');\r\n  }\r\n};\r\n\r\nconst handleResend = async () => {\r\n  try {\r\n    const res = await api.post(\r\n      '/auth/resend-2fa',\r\n      { email }\r\n    );\r\n    setMessage(res.data.msg);\r\n    setCooldown(30);\r\n  } catch (err) {\r\n    setMessage(err.response?.data?.msg || 'Error resending code.');\r\n  }\r\n};\r\n\r\n  useEffect(() => {\r\n    if (!cooldown) return;\r\n    const iv = setInterval(() => {\r\n      setCooldown(c => (c <= 1 ? (clearInterval(iv), 0) : c - 1));\r\n    }, 1000);\r\n    return () => clearInterval(iv);\r\n  }, [cooldown]);\r\n\r\n  return (\r\n    <div className=\"two-fa-container\">\r\n      <h2>Enter Verification Code</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"6-digit code\"\r\n          value={code}\r\n          onChange={e => setCode(e.target.value)}\r\n          maxLength={6}\r\n          required\r\n        />\r\n        <button type=\"submit\">Verify</button>\r\n      </form>\r\n\r\n      <button\r\n        onClick={handleResend}\r\n        disabled={cooldown > 0}\r\n        className=\"resend-button\"\r\n      >\r\n        {cooldown > 0 ? `Resend in ${cooldown}s` : 'Resend Code'}\r\n      </button>\r\n\r\n      {message && <p className=\"error-message\">{message}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TwoFactorAuth;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}