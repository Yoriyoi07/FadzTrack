/* ===================== MODERN PM DASHBOARD STYLES (SCOPED) ===================== */
/* All selectors are prefixed with .pm-dashboard to isolate PM styles */

.pm-dashboard {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
  background-color: #f8fafc;
  color: #1e293b;
  line-height: 1.6;
  min-height: 100vh;
  width: 100%;
  display: flex;
  flex-direction: column;
}

.pm-dashboard * { box-sizing: border-box; }

/* Dashboard Container */
.pm-dashboard.dashboard-container, .pm-dashboard .dashboard-container {
  /* Allow natural document height so full page scroll works */
  height: auto;
  min-height: 100vh;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  margin: 0;
  padding: 0;
  width: 100%;
  overflow: visible; /* permit children to extend; scrolling handled by body */
  position: relative;
  display: flex;
  flex-direction: column;
  max-width: 100vw;
}

/* ===================== HEADER LAYOUT ===================== */
.pm-dashboard .dashboard-header {
  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
  color: white;
  padding: 1rem 2rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  position: sticky;
  top: 0;
  z-index: 100;
  backdrop-filter: blur(10px);
  flex-shrink: 0; /* Prevent header from shrinking */
  transition: all 0.3s ease;
}

/* Collapsed header state */
.pm-dashboard .dashboard-header.collapsed {
  padding: 0.5rem 2rem;
}

.pm-dashboard .dashboard-header.collapsed .header-top {
  margin-bottom: 0.5rem;
  padding-bottom: 0.5rem;
}

.pm-dashboard .dashboard-header.collapsed .header-bottom {
  padding-top: 0.5rem;
}

/* Hidden elements when collapsed */
.pm-dashboard .hidden {
  display: none !important;
}

/* Collapsed navigation items */
.pm-dashboard .dashboard-header.collapsed .nav-item {
  padding: 0.5rem 0.75rem;
  min-width: 50px;
  justify-content: center;
}

.pm-dashboard .dashboard-header.collapsed .nav-item span {
  display: none;
}

.pm-dashboard .dashboard-header.collapsed .nav-item svg {
  font-size: 1.2rem;
  margin: 0;
}

/* Collapsed profile section */
.pm-dashboard .dashboard-header.collapsed .profile-info {
  display: none;
}

.pm-dashboard .dashboard-header.collapsed .user-profile {
  padding: 0.25rem 0.5rem;
}

.pm-dashboard .dashboard-header.collapsed .profile-avatar {
  width: 35px;
  height: 35px;
  font-size: 1rem;
}

/* Top Row: Logo and Profile */
.pm-dashboard .header-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.pm-dashboard .logo-section {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.pm-dashboard .header-logo {
  width: 40px;
  height: 40px;
  object-fit: contain;
}

.pm-dashboard .header-brand {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 0;
  background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Bottom Row: Navigation and Notifications */
.pm-dashboard .header-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.pm-dashboard .header-nav {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  flex-wrap: wrap;
}

.pm-dashboard .nav-item {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  color: #cbd5e1;
  text-decoration: none;
  border-radius: 8px;
  transition: all 0.2s ease;
  font-weight: 500;
  font-size: 0.875rem;
  min-width: 120px;
  text-align: center;
  white-space: nowrap;
}

.pm-dashboard .nav-item:hover {
  color: white;
  background-color: rgba(59, 130, 246, 0.2);
  transform: translateY(-1px);
}

.pm-dashboard .nav-item.active {
  color: white;
  background-color: rgba(59, 130, 246, 0.2);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

.pm-dashboard .nav-item svg {
  font-size: 1rem;
}

.pm-dashboard .user-profile {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  background: rgba(59, 130, 246, 0.1);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.pm-dashboard .user-profile:hover {
  background-color: rgba(59, 130, 246, 0.2);
  border-color: rgba(59, 130, 246, 0.3);
}

.pm-dashboard .profile-avatar {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 600;
  font-size: 1.125rem;
  text-transform: uppercase;
}

.pm-dashboard .profile-info {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.pm-dashboard .profile-name {
  font-weight: 700;
  font-size: 0.9rem;
  color: white;
  line-height: 1.2;
}

.pm-dashboard .profile-role {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.8);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 500;
}

.pm-dashboard .profile-dropdown {
  position: absolute;
  top: calc(100% + 0.5rem);
  right: 0;
  background: white;
  border-radius: 8px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  padding: 0.5rem;
  min-width: 120px;
  z-index: 1000;
  border: 1px solid #e2e8f0;
  animation: fadeInUp 0.2s ease-out;
}

.pm-dashboard .profile-menu {
  position: absolute;
  top: calc(100% + 0.5rem);
  right: 0;
  background: white;
  border-radius: 8px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  padding: 0.5rem;
  min-width: 120px;
  z-index: 1000;
  border: 1px solid #e2e8f0;
  animation: fadeInUp 0.2s ease-out;
}

.pm-dashboard .profile-menu button {
  width: 100%;
  padding: 0.75rem 1rem;
  background: none;
  border: none;
  color: #ef4444;
  cursor: pointer;
  border-radius: 6px;
  font-weight: 500;
  transition: all 0.2s ease;
  text-align: left;
  font-size: 0.875rem;
}

.pm-dashboard .profile-menu button:hover {
  background-color: #fef2f2;
}

.pm-dashboard .logout-btn {
  width: 100%;
  padding: 0.75rem 1rem;
  background: none;
  border: none;
  color: #ef4444;
  cursor: pointer;
  border-radius: 6px;
  font-weight: 500;
  transition: all 0.2s ease;
  text-align: left;
  font-size: 0.875rem;
}

.pm-dashboard .logout-btn:hover {
  background-color: #fef2f2;
}

/* ===================== MAIN CONTENT ===================== */
.pm-dashboard .dashboard-main {
  padding: 2rem;
  max-width: 1400px;
  margin: 0 auto;
  width: 100%;
  flex: 1;
  overflow-y: auto; /* Enable vertical scrolling */
  overflow-x: hidden; /* Prevent horizontal scrolling */
  position: relative;
  right: 0;
  min-height: 0; /* Allow flex item to shrink */
}

/* Refined responsive grid: two balanced columns, auto-wrap for cards, full-width feature cards */
/* Structured grid with named areas for stable layout */
.pm-dashboard .dashboard-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  /* Side-by-side chats & requests under welcome */
  grid-template-areas:
    "welcome welcome"
    "chats requests"
    "chart chart";
  gap: 1.75rem;
  align-items: start;
  width: 100%;
  overflow: visible;
  min-height: auto;
  padding-bottom: 4rem;
}

.pm-dashboard .welcome-card, .pm-dashboard .pm-welcome-card { grid-area: welcome; margin-bottom:1.5rem; }
.pm-dashboard .chats-card { grid-area: chats; }
.pm-dashboard .requests-card { grid-area: requests; }
.pm-dashboard .chart-card { grid-area: chart; }

/* Large screens: allow three middle columns if very wide */
@media (min-width: 1700px) {
  .pm-dashboard .dashboard-grid {
    grid-template-columns: 1.2fr 1fr 1fr; /* wider welcome row then two content cols below */
    grid-template-areas:
      "welcome welcome welcome"
      "chats requests chart";
  }
  .pm-dashboard .chart-card { align-self: stretch; }
}

/* Medium screens fallback: two columns */
@media (max-width: 1300px) {
  .pm-dashboard .dashboard-grid {
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "welcome welcome"
      "chats requests"
      "chart chart";
  }
}

/* Small screens: single column stacking */
@media (max-width: 900px) {
  .pm-dashboard .dashboard-grid {
    grid-template-columns: 1fr;
    grid-template-areas:
      "welcome"
      "chats"
      "requests"
      "chart";
  }
}

/* ===================== DASHBOARD CARDS ===================== */
/* Base card now neutral; gradients reserved for hero/welcome */
.pm-dashboard .dashboard-card {
  background: #ffffff;
  color: #1e293b;
  border-radius: 16px;
  padding: 1.25rem 1.5rem;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
  border: 1px solid rgba(0,0,0,0.05);
  transition: box-shadow .25s ease, transform .25s ease;
  position: relative;
  isolation: isolate; /* ensure pseudo elements layer safely */
}

/* Single top gradient bar (removed earlier left stripe + duplicate definition) */
.pm-dashboard .dashboard-card::before { content:""; position:absolute; top:0; left:0; right:0; height:4px; background:linear-gradient(90deg,#3b82f6,#60a5fa,#93c5fd); opacity:0; transition:opacity .3s ease; border-radius:16px 16px 0 0; }
.pm-dashboard .dashboard-card:hover::before { opacity:1; }

.pm-dashboard .dashboard-card:hover { transform: translateY(-4px); box-shadow: 0 8px 30px rgba(59,130,246,0.25); }

.pm-dashboard .card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  background: hsla(0, 0%, 0%, 0);
}

.pm-dashboard .card-actions {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.pm-dashboard .refresh-btn {
  background: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 6px;
  padding: 0.5rem;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #6c757d;
}

.pm-dashboard .refresh-btn:hover:not(:disabled) {
  background: #e9ecef;
  border-color: #dee2e6;
  color: #495057;
}

.pm-dashboard .refresh-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.pm-dashboard .refresh-btn svg {
  transition: transform 0.2s ease;
}

.pm-dashboard .refresh-btn:not(:disabled):hover svg {
  transform: rotate(180deg);
}

.pm-dashboard .card-title { font-size:1.25rem; font-weight:700; color:#1e293b; margin:0; }
/* Preserve white titles only inside welcome card */
.pm-dashboard .welcome-card .card-title, .pm-dashboard .pm-welcome-card .card-title { color:#ffffff; }

.pm-dashboard .view-all-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: rgba(255, 255, 255, 0.8);
  text-decoration: none;
  font-weight: 500;
  font-size: 0.875rem;
  transition: all 0.2s ease;
}

.pm-dashboard .view-all-link:hover {
  color: white;
  transform: translateX(2px);
}

/* ===================== WELCOME CARD ===================== */
/* Hero welcome card retains gradient branding and spans full width row */
/* NOTE: The primary .welcome-card styles are defined ONCE later in this file (search for 'Polished welcome card').
  This earlier block was duplicating those rules and caused confusion when edits here appeared to do nothing
  because a later selector with identical specificity overwrote them. Keep changes in the later block only. */
/* (Intentionally left blank – duplicate removed) */
/* Maintain stacking order so metrics are not overlapped */
.pm-dashboard .dashboard-grid > .chats-card, .pm-dashboard .dashboard-grid > .requests-card, .pm-dashboard .dashboard-grid > .chart-card { z-index: 1; }

.pm-dashboard .welcome-card::before, .pm-dashboard .pm-welcome-card::before {
  display: none;
}

.pm-dashboard .welcome-card .card-header, .pm-dashboard .pm-welcome-card .card-header {
  margin-bottom: 2rem; /* reduced so content doesn't push out */
  background-color: hsla(0, 0%, 0%, 0);
}

.pm-dashboard .welcome-content h2 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 1rem;
  
}

.pm-dashboard .welcome-subtitle {
  font-size: 1rem;
  color: rgba(255, 255, 255, 0.9);
  margin: 0;
  margin-bottom: 2rem;
}

.pm-dashboard .project-badge {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255, 255, 255, 0.15);
  padding: 0.75rem 1rem;
  border-radius: 8px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.25);
}

.pm-dashboard .project-badge svg {
  font-size: 1.25rem;
}

/* Adaptive stats grid */
.pm-dashboard .project-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 1.25rem;
  margin-top: 1rem;
  position: relative;
  z-index: 2;
}

.pm-dashboard .stat-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: rgba(255, 255, 255, 0.1);
  padding: 1.25rem;
  border-radius: 12px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.pm-dashboard .stat-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.2);
  color: white;
  font-size: 1.5rem;
}

.pm-dashboard .stat-icon.completed {
  background: rgba(16, 185, 129, 0.2);
  color: #10b981;
}

.pm-dashboard .stat-icon.in-progress {
  background: rgba(59, 130, 246, 0.2);
  color: #3b82f6;
}

.pm-dashboard .stat-icon.not-started {
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
}

.pm-dashboard .stat-content {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.pm-dashboard .stat-value { font-size:1.75rem; font-weight:700; color:#ffffff; }

.pm-dashboard .stat-label {
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.8);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ===================== CHART CARD ===================== */
.pm-dashboard .chart-card {
  grid-column: 1 / -1;
}

.pm-dashboard .chart-container {
  height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

@media (max-width: 768px) {
  .pm-dashboard .chart-container {
    height: 180px;
    min-height: 180px;
  }
}

@media (max-width: 480px) {
  .pm-dashboard .chart-container {
    height: 150px;
    min-height: 150px;
  }
}

/* ===================== CHATS CARD ===================== */
.pm-dashboard .chats-card {
  grid-column: 1 / 2;
  background: white !important;
  color: #1e293b !important;
  display: flex;
  flex-direction: column;
}

.pm-dashboard .chats-card .card-title {
  color: #1e293b !important;
}

.pm-dashboard .chats-card .view-all-link {
  color: #3b82f6 !important;
}

.pm-dashboard .chats-card .view-all-link:hover {
  color: #1e40af !important;
}

.pm-dashboard .chats-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  height: 300px;
  overflow-y: scroll;
  padding-right: 0.5rem;
  flex: 1;
}

.pm-dashboard .chats-list::-webkit-scrollbar {
  width: 6px;
}

.pm-dashboard .chats-list::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 3px;
}

.pm-dashboard .chats-list::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}

.pm-dashboard .chats-list::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

.pm-dashboard .chat-item {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  background: #f8fafc;
  border-radius: 12px;
  transition: all 0.2s ease;
  border: 1px solid #e2e8f0;
  min-height: 80px;
  flex-shrink: 0;
  cursor: pointer;
  text-decoration: none;
  color: inherit;
}

.pm-dashboard .chat-item:hover {
  background: #f1f5f9;
  border-color: #3b82f6;
  transform: translateX(4px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
}

.pm-dashboard .chat-item:active {
  transform: translateX(2px);
  transition: transform 0.1s ease;
}

.pm-dashboard .chat-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 1rem;
  flex-shrink: 0;
}

.pm-dashboard .chat-content {
  flex: 1;
  min-width: 0;
}

/* ===================== PM DASHBOARD VISUAL REFRESH OVERRIDES ===================== */
/* Non-destructive aesthetic improvements scoped to pm-dashboard */
.pm-dashboard {
  --pm-surface: #ffffff;
  --pm-surface-alt: #f1f5f9;
  --pm-border: #e2e8f0;
  --pm-primary: #1e40af;
  --pm-primary-accent: #3b82f6;
  --pm-radius-lg: 20px;
  --pm-radius: 14px;
  --pm-gap: 1.5rem;
  --pm-shadow-sm: 0 2px 6px -1px rgba(0,0,0,.08),0 1px 3px rgba(0,0,0,.04);
  --pm-shadow: 0 8px 28px -6px rgba(30,64,175,.25),0 4px 16px -4px rgba(0,0,0,.2);
  --pm-shadow-hover: 0 14px 42px -8px rgba(30,64,175,.35),0 6px 24px -6px rgba(0,0,0,.28);
  --pm-glass-bg: rgba(255,255,255,0.12);
  --pm-glass-border: rgba(255,255,255,0.35);
  /* Adjustable welcome card bottom padding so metrics always sit inside blue area */
  --pm-welcome-padding-bottom: 5rem; /* tweak this value instead of editing multiple rules */
}

/* Elevate header separation */
.pm-dashboard .dashboard-header { box-shadow: 0 6px 24px -10px rgba(0,0,0,.4), 0 2px 6px -2px rgba(255,255,255,.15) inset; }

/* Polished welcome card with decorative overlays */
.pm-dashboard .welcome-card, .pm-dashboard .pm-welcome-card {
  border-radius: 20px !important;
  /* Use variable for bottom padding so future adjustments are one-line */
  padding: 1.75rem 2rem var(--pm-welcome-padding-bottom);
  background: linear-gradient(130deg,#1d3d96 0%,#1e40af 55%,#193579 100%) !important;
  box-shadow: 0 6px 24px -8px rgba(0,0,0,.45);
  position: relative;
  z-index:0; /* create stacking context */
}
/* Remove decorative overlays for cleaner look */
.pm-dashboard .welcome-card::after,
.pm-dashboard .welcome-card::before,
.pm-dashboard .pm-welcome-card::after,
.pm-dashboard .pm-welcome-card::before { display:none !important; }

/* Title refinement */
.pm-dashboard .welcome-title, .pm-dashboard .pm-welcome-card .welcome-title { font-size:2.2rem; letter-spacing:.5px; }
.pm-dashboard .welcome-subtitle, .pm-dashboard .pm-welcome-card .welcome-subtitle { opacity:.9; font-weight:500; }

/* Metric area layout (ensures contained & centered) */
.pm-dashboard .project-stats, .pm-dashboard .pm-welcome-card .project-stats { 
  margin-top:.75rem; /* tighten gap above metrics */
  display:grid; 
  grid-template-columns: repeat(auto-fit,minmax(170px,1fr)); 
  gap:1rem; 
  position:static; 
}
/* Reduce subtitle spacing & pull badge closer to metrics */
.pm-dashboard .welcome-subtitle, .pm-dashboard .pm-welcome-card .welcome-subtitle { margin:0 0 .5rem !important; }
.pm-dashboard .project-badge, .pm-dashboard .pm-welcome-card .project-badge { margin-top:0; margin-bottom:.25rem; }

/* Metric cards (glass look) */
.pm-dashboard .stat-item {
  display:flex;
  align-items:center;
  gap:.9rem;
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.25);
  border-radius:14px;
  padding:1rem 1.1rem;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  box-shadow:0 4px 14px -6px rgba(0,0,0,.5);
  transition:box-shadow .25s, transform .25s;
}

/* ===================== RESPONSIVE ENHANCEMENTS (PM DASH) ===================== */
/* Fluid typography for welcome title/subtitle */
.pm-dashboard .welcome-title, .pm-dashboard .pm-welcome-card .welcome-title { font-size:clamp(1.6rem,4vw,2.2rem); }
.pm-dashboard .welcome-subtitle, .pm-dashboard .pm-welcome-card .welcome-subtitle { font-size:clamp(.85rem,1.2vw,1rem); }

/* Slightly tighter gaps on very wide to keep focus centered */
@media (min-width:1700px){
  .pm-dashboard .dashboard-grid { gap:1.5rem 1.25rem; }
}

/* Medium screens: reduce padding & card density */
@media (max-width:1300px){
  .pm-dashboard .dashboard-card { padding:1.1rem 1.15rem; }
  .pm-dashboard .pm-welcome-card .project-stats, .pm-dashboard .welcome-card .project-stats { gap:.75rem; }
  .pm-dashboard .stat-item { padding:.5rem .4rem; }
}

/* Tablet: collapse stat grid to two columns, compress header */
@media (max-width:1000px){
  .pm-dashboard .pm-welcome-card .project-stats, .pm-dashboard .welcome-card .project-stats { grid-template-columns:repeat(2,minmax(140px,1fr)); }
  .pm-dashboard .dashboard-main { padding:1.5rem 1.25rem; }
  .pm-dashboard .dashboard-grid { gap:1.25rem; }
  .pm-dashboard .project-badge { font-size:.75rem; }
}

/* Phones: single column already handled; tighten further */
@media (max-width:700px){
  .pm-dashboard .dashboard-main { padding:1.25rem 1rem 2.5rem; }
  .pm-dashboard .dashboard-card { border-radius:14px; }
  .pm-dashboard .pm-welcome-card, .pm-dashboard .welcome-card { padding:1.25rem 1.25rem 1.75rem; }
  .pm-dashboard .stat-value { font-size:1.35rem; }
  .pm-dashboard .stat-label { font-size:.65rem; letter-spacing:.5px; }
  .pm-dashboard .chats-list, .pm-dashboard .requests-content { max-height:320px; }
}

/* Ultra small devices */
@media (max-width:500px){
  .pm-dashboard .pm-welcome-card .project-stats, .pm-dashboard .welcome-card .project-stats { grid-template-columns:1fr 1fr; }
  .pm-dashboard .project-badge { display:inline-flex; max-width:100%; }
  .pm-dashboard .stat-item { flex-direction:row; } /* retain horizontal icon + text */
}

/* Improve scroll container feel without layout shift */
.pm-dashboard .chats-list, .pm-dashboard .requests-content { scrollbar-width:thin; }
.pm-dashboard .chats-list::-webkit-scrollbar, .pm-dashboard .requests-content::-webkit-scrollbar { width:6px; }
.pm-dashboard .chats-list::-webkit-scrollbar-thumb, .pm-dashboard .requests-content::-webkit-scrollbar-thumb { background:rgba(0,0,0,.15); border-radius:20px; }

/* Ensure stacked full-width cards breathe */
.pm-dashboard .chats-card, .pm-dashboard .requests-card, .pm-dashboard .chart-card { scroll-margin-top:90px; }

/* Guard: if viewport height is short, prevent welcome card from hiding content below header */
@media (max-height:760px){
  .pm-dashboard .pm-welcome-card, .pm-dashboard .welcome-card { margin-bottom:1rem; }
}

/* Accessibility: enforce min tap area for refresh/view-all buttons on small screens */
@media (max-width:700px){
  .pm-dashboard .refresh-btn, .pm-dashboard .view-all-link { min-height:38px; }
}
.pm-dashboard .stat-item:hover { transform:translateY(-4px); box-shadow:0 10px 26px -8px rgba(0,0,0,.55); }
.pm-dashboard .stat-icon { background: linear-gradient(135deg,#3b82f6,#1e40af); box-shadow:0 4px 12px -4px rgba(0,0,0,.55); }
.pm-dashboard .stat-value { font-size:1.65rem; letter-spacing:.25px; }
.pm-dashboard .stat-label { font-weight:600; letter-spacing:.5px; }

/* Neutral cards restyle (other than hero) */
.pm-dashboard .dashboard-card:not(.welcome-card) { background:var(--pm-surface); border:1px solid var(--pm-border); border-radius:var(--pm-radius-lg); box-shadow:var(--pm-shadow-sm); position:relative; }
.pm-dashboard .dashboard-card:not(.welcome-card):hover { box-shadow:var(--pm-shadow); }

/* Ensure top bar still visible for hover accent */
.pm-dashboard .dashboard-card:not(.welcome-card)::before { height:3px; }

/* Card headers unify */
.pm-dashboard .card-header { padding:0 0 .75rem; margin-bottom:1.25rem; border-bottom:1px solid #e2e8f0; }
.pm-dashboard .welcome-card .card-header { border-bottom-color:rgba(255,255,255,.25); }

/* Chat & Requests scroll subtle overlay */
.pm-dashboard .chats-list, .pm-dashboard .requests-content { position:relative; }
.pm-dashboard .chats-list::after, .pm-dashboard .requests-content::after { content:""; position:absolute; left:0; right:0; bottom:0; height:28px; background:linear-gradient(to top, rgba(248,250,252,1),rgba(248,250,252,0)); pointer-events:none; }
/* Remove previous bottom gradient bar under metrics */
.pm-dashboard .welcome-card .project-stats::after { display:none !important; }

/* Responsive tuning */
@media (max-width: 900px) { .pm-dashboard .welcome-title { font-size:1.65rem; } }
@media (max-width: 600px) { .pm-dashboard .project-stats { grid-template-columns:repeat(2,minmax(0,1fr)); } }
@media (max-width: 420px) { .pm-dashboard .project-stats { grid-template-columns:1fr; } }

/* Accessibility contrast tweak */
.pm-dashboard .chats-card .card-title, .pm-dashboard .requests-card .card-title, .pm-dashboard .chart-card .card-title { color:#1e293b; }
.pm-dashboard .view-all-link { color:#1e40af; }
.pm-dashboard .view-all-link:hover { color:#0f2d64; }

/* Smooth appearance */
.pm-dashboard .dashboard-grid > * { animation: pmFadeIn .5s ease both; }
@keyframes pmFadeIn { from { opacity:0; transform:translateY(10px);} to { opacity:1; transform:translateY(0);} }


/* ===================== ROLE SCOPE ISOLATION (Appended) ===================== */
/* Constrain PM dashboard styles so they don't leak and defend against other role overrides */
/* (Removed redundant earlier isolation overrides; card gradient kept only for welcome card) */
/* .pm-dashboard specific overrides consolidated above */


.pm-dashboard .chat-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.pm-dashboard .chat-name {
  font-weight: 600;
  color: #1e293b;
  font-size: 0.875rem;
}

.pm-dashboard .chat-time {
  font-size: 0.75rem;
  color: #64748b;
}

.pm-dashboard .chat-message {
  color: #1e293b !important;
  font-size: 0.875rem !important;
  margin: 0 !important;
  line-height: 1.4 !important;
  white-space: normal !important;
  overflow: visible !important;
  text-overflow: clip !important;
  max-width: 100% !important;
  display: block !important;
  word-wrap: break-word !important;
  word-break: break-word !important;
}

/* ===================== REQUESTS CARD ===================== */
.pm-dashboard .requests-card {
  /* In wide layout sits beside chats via grid-area; no forced span */
  background: white !important;
  color: #1e293b !important;
  display: flex;
  flex-direction: column;
}

.pm-dashboard .requests-card .card-title {
  color: #1e293b !important;
}

.pm-dashboard .requests-card .view-all-link {
  color: #3b82f6 !important;
}

.pm-dashboard .requests-card .view-all-link:hover {
  color: #1e40af !important;
}

.pm-dashboard .requests-content {
  height: 300px;
  overflow-y: scroll;
  padding-right: 0.5rem;
  flex: 1;
}

.pm-dashboard .requests-content::-webkit-scrollbar {
  width: 6px;
}

.pm-dashboard .requests-content::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 3px;
}

.pm-dashboard .requests-content::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}

.pm-dashboard .requests-content::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

.pm-dashboard .loading-state,
.pm-dashboard .error-state,
.pm-dashboard .empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  padding: 2rem;
  text-align: center;
  color: #64748b;
  height: 100%;
  min-height: 200px;
}

.pm-dashboard .loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid #e2e8f0;
  border-top: 3px solid #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.pm-dashboard .error-state svg {
  font-size: 2rem;
  color: #ef4444;
}

.pm-dashboard .empty-state svg {
  font-size: 2rem;
  color: #94a3b8;
}

.pm-dashboard .empty-state p {
  font-size: 0.875rem;
  color: #94a3b8;
  margin: 0;
}

.pm-dashboard .requests-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.pm-dashboard .request-item {
  display: flex;
  gap: 1rem;
  padding: .9rem 1rem 1rem;
  background: linear-gradient(180deg,#f8fafc 0%,#f1f5f9 100%);
  border-radius: 14px;
  text-decoration: none;
  color: inherit;
  transition: box-shadow .25s ease, transform .25s ease, background .25s ease;
  border: 1px solid #e2e8f0;
  min-height: 82px;
  flex-shrink: 0;
  position: relative;
  isolation: isolate; /* so pseudo elements don't bleed */
  backdrop-filter: saturate(1.2) blur(2px);
}
.pm-dashboard .request-item::before {
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  background:linear-gradient(90deg,#6366f1 0%,rgba(99,102,241,0) 35%);
  opacity:0;
  transition:opacity .3s ease;
  pointer-events:none;
}
.pm-dashboard .request-item::after {
  content:"";
  position:absolute;
  top:50%;
  right:.85rem;
  width:10px;
  height:10px;
  border-right:2px solid #64748b;
  border-top:2px solid #64748b;
  transform:translateY(-50%) rotate(45deg) translateX(-2px);
  opacity:.25;
  transition:opacity .25s ease, transform .25s ease;
  pointer-events:none;
}
.pm-dashboard .request-item:hover {
  background:#ffffff;
  border-color:#d1d9e5;
  box-shadow:0 8px 22px -6px rgba(15,23,42,.15);
  transform:translateY(-2px);
}
.pm-dashboard .request-item:hover::before { opacity:.08; }
.pm-dashboard .request-item:hover::after { opacity:.55; transform:translateY(-50%) rotate(45deg) translateX(0); }

.pm-dashboard .request-item:active { transform:translateY(0); box-shadow:0 4px 14px -4px rgba(15,23,42,.18); }
.pm-dashboard .request-item:focus-visible { outline:2px solid #6366f1; outline-offset:2px; }

.pm-dashboard .request-details {
  flex: 1;
  min-width: 0;
}

.pm-dashboard .request-title {
  font-size: .85rem;
  font-weight:600;
  color:#1e293b;
  margin:0 0 .35rem;
  line-height:1.35;
  display:-webkit-box;
  line-clamp:2;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
  text-overflow:ellipsis;
}

.pm-dashboard .request-description {
  font-size:.72rem;
  color:#64748b;
  margin:0 0 .55rem;
  line-height:1.35;
  display:-webkit-box;
  line-clamp:2;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
  text-overflow:ellipsis;
}

.pm-dashboard .request-meta {
  display:flex;
  flex-wrap:wrap;
  gap:.75rem 1rem;
  font-size:.65rem;
  color:#64748b;
  font-weight:500;
  line-height:1.2;
}

.pm-dashboard .request-status {
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:.35rem;
  min-width:78px;
}

.pm-dashboard .status-icon {
  font-size: 1.25rem;
}

.pm-dashboard .status-icon.completed {
  color: #10b981;
}

.pm-dashboard .status-icon.pending {
  color: #f59e0b;
}

.pm-dashboard .status-icon.rejected {
  color: #ef4444;
}

.pm-dashboard .status-text {
  font-size:.6rem;
  font-weight:600;
  text-align:center;
  padding:.22rem .45rem;
  border-radius:30px;
  text-transform:uppercase;
  letter-spacing:.6px;
  background:#f1f5f9;
  border:1px solid #e2e8f0;
  color:#334155;
  box-shadow:0 0 0 1px rgba(255,255,255,.6) inset, 0 1px 2px rgba(0,0,0,.06);
}

/* Status color accents */
.pm-dashboard .status-text.approved, .pm-dashboard .status-text.completed { background:#dcfce7; border-color:#bbf7d0; color:#166534; }
.pm-dashboard .status-text.pending { background:#fef3c7; border-color:#fde68a; color:#92400e; }
.pm-dashboard .status-text.rejected, .pm-dashboard .status-text.denied { background:#fee2e2; border-color:#fecaca; color:#b91c1c; }

/* Responsive material requests adjustments */
@media (max-width:900px){
  .pm-dashboard .request-item { flex-direction:column; padding: .9rem .9rem .95rem; }
  .pm-dashboard .request-status { flex-direction:row; min-width:0; justify-content:flex-start; }
  .pm-dashboard .status-icon { font-size:1rem; }
  .pm-dashboard .status-text { font-size:.55rem; }
  .pm-dashboard .request-meta { gap:.5rem .75rem; }
}

.pm-dashboard .status-text.completed {
  background: #d1fae5;
  color: #065f46;
}

.pm-dashboard .status-text.pending {
  background: #fef3c7;
  color: #92400e;
}

.pm-dashboard .status-text.rejected {
  background: #fee2e2;
  color: #991b1b;
}

/* ===================== ANIMATIONS ===================== */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===================== RESPONSIVE DESIGN ===================== */
@media (max-width: 1400px) {
  .pm-dashboard .dashboard-main {
    padding: 1.5rem;
    max-width: 1200px;
  }
  
  .pm-dashboard .dashboard-grid {
    gap: 1.5rem;
  }
  
  .pm-dashboard .project-stats {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1.25rem;
  }
}

@media (max-width: 1200px) {
  .pm-dashboard .dashboard-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  
  .pm-dashboard .chats-card,
  .pm-dashboard .requests-card {
    grid-column: 1 / -1;
  }
  
  .pm-dashboard .project-stats {
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }
  
  .pm-dashboard .welcome-content h2 {
    font-size: 1.75rem;
  }
}

@media (max-width: 768px) {
  .pm-dashboard .dashboard-main {
    padding: 1rem;
  }
  
  .pm-dashboard .dashboard-header {
    padding: 1rem;
  }
  
  .pm-dashboard .header-top {
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    text-align: center;
  }
  
  .pm-dashboard .header-bottom {
    flex-direction: column;
    gap: 1rem;
    align-items: center;
  }
  
  .pm-dashboard .header-nav {
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.5rem;
  }
  
  .pm-dashboard .nav-item {
    padding: 0.5rem 0.75rem;
    font-size: 0.8rem;
    min-width: 100px;
  }
  
  .pm-dashboard .project-stats {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  
  .pm-dashboard .stat-item {
    padding: 1rem;
  }
  
  .pm-dashboard .stat-value {
    font-size: 1.5rem;
  }
  
  .pm-dashboard .welcome-content h2 {
    font-size: 1.5rem;
  }
  
  .pm-dashboard .dashboard-card {
    padding: 1.25rem;
  }
  
  .pm-dashboard .chats-list,
  .pm-dashboard .requests-content {
    height: 250px;
  }
  
  .pm-dashboard .chat-item,
  .pm-dashboard .request-item {
    padding: 0.75rem;
    min-height: 70px;
  }
  
  .pm-dashboard .chat-avatar,
  .pm-dashboard .request-icon {
    width: 35px;
    height: 35px;
    font-size: 0.875rem;
  }
}

@media (max-width: 480px) {
  .pm-dashboard .dashboard-main {
    padding: 0.75rem;
  }
  
  .pm-dashboard .dashboard-header {
    padding: 0.75rem;
  }
  
  .pm-dashboard .header-top {
    gap: 0.75rem;
  }
  
  .pm-dashboard .header-bottom {
    gap: 0.75rem;
  }
  
  .pm-dashboard .header-nav {
    gap: 0.25rem;
  }
  
  .pm-dashboard .nav-item {
    padding: 0.4rem 0.6rem;
    font-size: 0.75rem;
    min-width: 90px;
  }
  
  .pm-dashboard .nav-item span {
    display: none;
  }
  
  .pm-dashboard .nav-item svg {
    font-size: 1.1rem;
  }
  
  .pm-dashboard .welcome-content h2 {
    font-size: 1.25rem;
  }
  
  .pm-dashboard .welcome-subtitle {
    font-size: 0.875rem;
  }
  
  .pm-dashboard .dashboard-card {
    padding: 1rem;
  }
  
  .pm-dashboard .card-title {
    font-size: 1.1rem;
  }
  
  .pm-dashboard .project-stats {
    gap: 0.75rem;
  }
  
  .pm-dashboard .stat-item {
    padding: 0.75rem;
  }
  
  .pm-dashboard .stat-icon {
    width: 40px;
    height: 40px;
    font-size: 1.25rem;
  }
  
  .pm-dashboard .stat-value {
    font-size: 1.25rem;
  }
  
  .pm-dashboard .stat-label {
    font-size: 0.75rem;
  }
  
  .pm-dashboard .chats-list,
  .pm-dashboard .requests-content {
    height: 200px;
  }
  
  .pm-dashboard .chat-item,
  .pm-dashboard .request-item {
    padding: 0.5rem;
    min-height: 60px;
    gap: 0.75rem;
  }
  
  .pm-dashboard .chat-avatar,
  .pm-dashboard .request-icon {
    width: 30px;
    height: 30px;
    font-size: 0.75rem;
  }
  
  .pm-dashboard .chat-name,
  .pm-dashboard .request-title {
    font-size: 0.8rem;
  }
  
  .pm-dashboard .chat-message,
  .pm-dashboard .request-description {
    font-size: 0.75rem;
  }
  
  .pm-dashboard .chat-time,
  .pm-dashboard .request-meta {
    font-size: 0.7rem;
  }
  
  .pm-dashboard .project-badge {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
  }
  
  .pm-dashboard .project-badge svg {
    font-size: 1rem;
  }
}

@media (max-width: 360px) {
  .pm-dashboard .dashboard-main {
    padding: 0.5rem;
  }
  
  .pm-dashboard .dashboard-header {
    padding: 0.5rem;
  }
  
  .pm-dashboard .header-nav {
    gap: 0.2rem;
  }
  
  .pm-dashboard .nav-item {
    padding: 0.35rem 0.5rem;
    min-width: 80px;
  }
  
  .pm-dashboard .dashboard-card {
    padding: 0.75rem;
  }
  
  .pm-dashboard .welcome-content h2 {
    font-size: 1.1rem;
  }
  
  .pm-dashboard .welcome-subtitle {
    font-size: 0.8rem;
  }
  
  .pm-dashboard .stat-item {
    padding: 0.6rem;
  }
  
  .pm-dashboard .stat-icon {
    width: 35px;
    height: 35px;
    font-size: 1.1rem;
  }
  
  .pm-dashboard .stat-value {
    font-size: 1.1rem;
  }
  
  .pm-dashboard .stat-label {
    font-size: 0.7rem;
  }
}

/* ===================== SCROLLBAR FIXES ===================== */
/* Ensure main content scrollbar is properly positioned */
.pm-dashboard .dashboard-main::-webkit-scrollbar {
  width: 12px;
}

.pm-dashboard .dashboard-main::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 6px;
}

.pm-dashboard .dashboard-main::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 6px;
  border: 2px solid #f1f5f9;
}

.pm-dashboard .dashboard-main::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

.pm-dashboard .chats-card,
.pm-dashboard .requests-card {
  position: relative;
}

.pm-dashboard .chats-card 
.pm-dashboard .requests-card  {
  padding-bottom: 1rem;
  margin-bottom: 1rem;
  border-bottom: 1px solid #e2e8f0;
}

/* Ensure the scrollable content area is properly contained */
.pm-dashboard .chats-list,
.pm-dashboard .requests-content {
  margin-top: 0;
  padding-top: 0;
}

/* Ensure chat items don't cause horizontal overflow */
.pm-dashboard .chat-content {
  flex: 1;
  min-width: 0;
}
